{"version":3,"file":"index.56baf9.js","mappings":"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","sources":["webpack:///webpack/runtime/chunk loaded","webpack:///./src/js/strings.js","webpack:///./src/js/toast.js","webpack:///./src/js/config.js","webpack:///./src/js/ServerDataError.js","webpack:///./src/js/data.js","webpack:///./src/js/helpers.js","webpack:///./src/pdf.mjs","webpack:///./src/js/show-structure.js","webpack:///./src/js/numbers.js","webpack:///./src/js/app-constructor.js","webpack:///./src/js/app-editor.js","webpack:///./src/index.js","webpack:///./src/scss/index.scss?6330","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// @ts-check\n\n/** getErrorText - Return plain text for error.\n * @param {string|Error|string[]|Error[]} error - Error or errors list.\n * @return {string}\n */\nexport function getErrorText(error) {\n  if (!error) {\n    return '';\n  }\n  if (Array.isArray(error)) {\n    return error.map(this.getErrorText.bind(this)).join('\\n');\n  }\n  if (error instanceof Error) {\n    error = error.message;\n  } else if (typeof error !== 'string') {\n    // TODO?\n    error = String(error);\n  }\n  return error;\n}\n","// @ts-check\n\nimport { Toast } from 'bootstrap';\nimport { getErrorText } from './strings';\n\n/** @type {Record<ToastType, string>} */\nconst bgClasses = {\n  info: 'bg-primary',\n  error: 'bg-danger',\n  success: 'bg-success',\n};\n\n/** @type {Record<ToastType, string>} */\nconst textClasses = {\n  error: 'text-danger',\n  info: 'text-primary',\n  success: 'text-success',\n};\n\n/** @type {Record<ToastType, string>} */\nconst iconClasses = {\n  error: 'exclamation',\n  info: 'info',\n  success: 'check',\n};\n\n/** @type {HTMLElement} */\nlet toastNode;\n\nlet toastInstance;\n\nfunction getToastNode() {\n  if (!toastNode) {\n    toastNode = /** @type {HTMLElement} */ (document.getElementById('toast-node'));\n  }\n  return toastNode;\n}\n\nfunction getToastInstance() {\n  if (!toastInstance) {\n    const node = getToastNode();\n    toastInstance = new Toast(node);\n  }\n  return toastInstance;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {string} removeClassPrefix\n * @param {string} replaceClass\n */\nfunction replaceNodeClasses(node, removeClassPrefix, replaceClass) {\n  const regEx = new RegExp('\\\\b(' + removeClassPrefix + '\\\\S*)\\\\b', 'g');\n  // const match = node.className.match(/\\b(text-bg-\\S+)\\b/g);\n  const match = node.className.match(regEx);\n  if (match && match.length) {\n    match.forEach((str) => {\n      if (str !== replaceClass) {\n        node.classList.remove(str);\n      }\n    });\n    // Remove fpound classes\n  }\n  node.classList.toggle(replaceClass, true);\n}\n\n/** @param {ToastParams} params */\nfunction updateToastNode(params) {\n  const { type = 'info' } = params;\n  const node = getToastNode();\n  replaceNodeClasses(node, 'bg-', bgClasses[type]);\n  // const iconWrapperNode = [>* @type {HTMLElement} <] (node.querySelector('.toast-icon-wrapper'));\n  // if (iconWrapperNode) {\n  //   replaceNodeClasses(iconWrapperNode, 'bg-', bgClasses[type]);\n  // }\n  const iconNode = /** @type {HTMLElement} */ (node.querySelector('#toast-icon'));\n  if (iconNode) {\n    // replaceNodeClasses(iconNode, 'text-', textClasses[type]);\n    iconNode.className = textClasses[type] + ' bi bi-' + iconClasses[type];\n  }\n  const titleNode = /** @type {HTMLElement} */ (node.querySelector('#toast-title'));\n  if (titleNode) {\n    titleNode.innerText = params.title || '';\n  }\n  const bodyNode = /** @type {HTMLElement} */ (node.querySelector('#toast-body'));\n  if (bodyNode) {\n    bodyNode.innerText = params.body || '';\n  }\n}\n\n/** @param {ToastParams} params */\nexport function showToast(params) {\n  updateToastNode(params);\n  const instance = getToastInstance();\n  instance.show();\n}\n\n/** @param {Error|string} body */\nexport function showErrorToast(body) {\n  showToast({ type: 'error', body: getErrorText(body) });\n}\n\n/** @param {string} body */\nexport function showInfoToast(body) {\n  showToast({ type: 'info', body });\n}\n\n/** @param {string} body */\nexport function showSuccessToast(body) {\n  showToast({ type: 'success', body });\n}\n","// @ts-check\n\nexport const nodeDev = process.env.NODE_ENV;\nexport const isDev = nodeDev === 'development';\n\nexport const dataFileUrl = './data/data.json';\n\nexport const updatePricesUrl = './update-prices.php';\n\nexport const defaultContentType = 'application/json; charset=utf-8';\n","// @ts-check\n\nexport class ServerDataError extends Error {\n  /**\n   * @param {string} message\n   * @param {string} [details]\n   */\n  constructor(message, details) {\n    super(message);\n    this.name = 'ServerDataError';\n    this.details = details;\n  }\n}\n","// @ts-check\n\nimport { getErrorText } from './strings';\nimport { dataFileUrl } from './config';\nimport { ServerDataError } from './ServerDataError';\nimport { defaultContentType, updatePricesUrl } from './config';\n\n/** @return {Promise<DataJson>} */\nexport async function loadServerData() {\n  const url = dataFileUrl;\n  /** @type {string|undefined} */\n  let text;\n  try {\n    const res = await fetch(url);\n    const { ok, status, statusText } = res;\n    // eslint-disable-next-line no-console\n    console.log('[loadServerData] Got response', {\n      ok,\n      status,\n      statusText,\n      res,\n    });\n    if (!ok) {\n      const reason = [status, statusText].filter(Boolean).join(', ');\n      const msg = [\n        '  ',\n        // Reson?\n        reason && `(${reason})`,\n      ]\n        .filter(Boolean)\n        .join(' ');\n      throw new Error(msg);\n    }\n    text = await res.text();\n    // eslint-disable-next-line no-console\n    console.log('[loadServerData] success: Got plain content', {\n      text,\n    });\n  } catch (err) {\n    const details = getErrorText(err);\n    const error = new ServerDataError('   ', details);\n    // eslint-disable-next-line no-console\n    console.error('[loadServerData] Network error', error.message, {\n      url,\n      details,\n      err,\n      error,\n    });\n    debugger; // eslint-disable-line no-debugger\n    throw error;\n  }\n  try {\n    /** @type {DataJson} */\n    const data = JSON.parse(text);\n    // eslint-disable-next-line no-console\n    console.log('[loadServerData] success: Got parsed data', {\n      data,\n    });\n    if (!data) {\n      const error = new Error('    .');\n      // eslint-disable-next-line no-console\n      console.error('[start]', error.message, {\n        error,\n      });\n      debugger; // eslint-disable-line no-debugger\n      throw error;\n    }\n    return data;\n  } catch (err) {\n    const details = getErrorText(err);\n    const error = new ServerDataError('  ', details);\n    // eslint-disable-next-line no-console\n    console.error('[loadServerData] Data error', error.message, {\n      details,\n      err,\n      error,\n    });\n    debugger; // eslint-disable-line no-debugger\n    throw error;\n  }\n}\n\n/** Send updated prices data to server\n * @param {DataJson} data\n * @param {number[]} pricesChangedDataTypes\n */\nexport async function saveCostChangesToServer(data, pricesChangedDataTypes) {\n  const changedPricesData = pricesChangedDataTypes.map((idx) => {\n    return {\n      idx,\n      prices: data.types[idx].prices,\n    };\n  });\n  const reqUrl = updatePricesUrl;\n  /** @type {RequestInit} */\n  const reqInit = {\n    method: 'POST',\n    headers: {\n      Accept: defaultContentType,\n      'Content-Type': defaultContentType,\n    },\n    body: JSON.stringify({ changedPrices: changedPricesData }),\n  };\n  console.log('[saveCostChangesToServer] start', {\n    changedPricesData,\n    reqInit,\n    reqUrl,\n    // yamlData,\n    data,\n  });\n  debugger;\n  const res = await fetch(reqUrl, reqInit);\n  const { ok, status, statusText } = res;\n  // eslint-disable-next-line no-console\n  console.log('[saveCostChangesToServer] response', {\n    ok,\n    status,\n    statusText,\n    res,\n  });\n  debugger;\n  if (!ok) {\n    const reason = [status, statusText].filter(Boolean).join(', ');\n    const msg = ['  ', reason && `(${reason})`].filter(Boolean).join(' ');\n    throw new Error(msg);\n  }\n  const resText = await res.text(); // res.json();\n  // eslint-disable-next-line no-console\n  console.log('[saveCostChangesToServer] success: Got data (raw)', resText);\n  if (resText.startsWith('{') || resText.startsWith('[')) {\n    const resData = JSON.parse(resText);\n    const { error } = resData;\n    if (error) {\n      const msg = [' ', error].filter(Boolean).join(': ');\n      throw new Error(msg);\n    }\n    console.log('[saveCostChangesToServer] success: Got data (parsed json)', {\n      resData,\n    });\n    debugger;\n    return resData;\n  } else {\n    const error = new ServerDataError('  ');\n    // eslint-disable-next-line no-console\n    console.error('[saveCostChangesToServer]', error.message, {\n      resText,\n      error,\n    });\n    debugger; // eslint-disable-line no-debugger\n    throw error;\n  }\n}\n","// @ts-check\n\nimport { isDev } from './config';\nimport { ServerDataError } from './ServerDataError';\nimport {\n  getAllDataTypeItems,\n  // getDataTypeSelectedItems,\n  // showDataStruct,\n} from './show-structure';\nimport { getErrorText } from './strings';\n\n/** Check if the page is in a 'manager'  mode?\n * @return {AppMode}\n */\nexport function getAppMode() {\n  const { pathname, search } = window.location;\n  if (pathname === '/manage' || (isDev && search === '?manage')) {\n    return 'manage';\n  }\n  if (pathname === '/editor' || (isDev && (pathname === '/editor.html' || search === '?editor'))) {\n    return 'editor';\n  }\n  return undefined;\n}\n\n/** DEBUG: Print the data structure tree/options\n * @param {DataJson} data\n */\nexport function debugDataStruct(data) {\n  /*\n   * const showTree = true;\n   * const title = !showTree ? 'Options' : 'Structure';\n   * const struct = showDataStruct(data, !showTree);\n   * // eslint-disable-next-line no-console\n   * console.log(title + ':\\n' + struct);\n   */\n  const allItems = getAllDataTypeItems(data, { getAll: true });\n  // const firstItems = getDataTypeSelectedItems(data.types[0], { getAll: true });\n  // eslint-disable-next-line no-console\n  console.log('All items:\\n' + allItems.join('\\n'));\n}\n\n/** @param {ServerDataError|Error|string} err */\nexport function showGlobalError(err) {\n  const errorNode = document.getElementById('global-error');\n  if (!errorNode) {\n    // TODO: To create the node?\n    return;\n  }\n  document.body.classList.toggle('with-error', true);\n  errorNode.classList.toggle('visible', true);\n  const title = getErrorText(err);\n  const details = err instanceof ServerDataError ? err.details : '';\n  const titleNode = /** @type {HTMLElement} */ (errorNode.querySelector('.error-title'));\n  const detailsNode = /** @type {HTMLElement} */ (errorNode.querySelector('.error-details'));\n  if (titleNode && detailsNode) {\n    titleNode.innerText = title;\n    detailsNode.innerText = details || '';\n  } else {\n    errorNode.innerText = [title, details].filter(Boolean).join('\\n\\n');\n  }\n}\n","/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/******/ // The require scope\n/******/ var __foobar_require__ = {};\n/******/\n/************************************************************************/\n/******/ /* webpack/runtime/define property getters */\n/******/ (() => {\n  /******/ // define getter functions for harmony exports\n  /******/ __foobar_require__.d = (exports, definition) => {\n    /******/ for (var key in definition) {\n      /******/ if (__foobar_require__.o(definition, key) && !__foobar_require__.o(exports, key)) {\n        /******/ Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        /******/\n      }\n      /******/\n    }\n    /******/\n  };\n  /******/\n})();\n/******/\n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/ (() => {\n  /******/ __foobar_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n  /******/\n})();\n/******/\n/************************************************************************/\nvar __foobar_exports__ = (globalThis.pdfjsLib = {});\n\n// EXPORTS\n__foobar_require__.d(__foobar_exports__, {\n  AbortException: () => /* reexport */ AbortException,\n  AnnotationEditorLayer: () => /* reexport */ AnnotationEditorLayer,\n  AnnotationEditorParamsType: () => /* reexport */ AnnotationEditorParamsType,\n  AnnotationEditorType: () => /* reexport */ AnnotationEditorType,\n  AnnotationEditorUIManager: () => /* reexport */ AnnotationEditorUIManager,\n  AnnotationLayer: () => /* reexport */ AnnotationLayer,\n  AnnotationMode: () => /* reexport */ AnnotationMode,\n  CMapCompressionType: () => /* reexport */ CMapCompressionType,\n  ColorPicker: () => /* reexport */ ColorPicker,\n  DOMSVGFactory: () => /* reexport */ DOMSVGFactory,\n  DrawLayer: () => /* reexport */ DrawLayer,\n  FeatureTest: () => /* reexport */ util_FeatureTest,\n  GlobalWorkerOptions: () => /* reexport */ GlobalWorkerOptions,\n  ImageKind: () => /* reexport */ util_ImageKind,\n  InvalidPDFException: () => /* reexport */ InvalidPDFException,\n  MissingPDFException: () => /* reexport */ MissingPDFException,\n  OPS: () => /* reexport */ OPS,\n  Outliner: () => /* reexport */ Outliner,\n  PDFDataRangeTransport: () => /* reexport */ PDFDataRangeTransport,\n  PDFDateString: () => /* reexport */ PDFDateString,\n  PDFWorker: () => /* reexport */ PDFWorker,\n  PasswordResponses: () => /* reexport */ PasswordResponses,\n  PermissionFlag: () => /* reexport */ PermissionFlag,\n  PixelsPerInch: () => /* reexport */ PixelsPerInch,\n  RenderingCancelledException: () => /* reexport */ RenderingCancelledException,\n  TextLayer: () => /* reexport */ TextLayer,\n  UnexpectedResponseException: () => /* reexport */ UnexpectedResponseException,\n  Util: () => /* reexport */ Util,\n  VerbosityLevel: () => /* reexport */ VerbosityLevel,\n  XfaLayer: () => /* reexport */ XfaLayer,\n  build: () => /* reexport */ build,\n  createValidAbsoluteUrl: () => /* reexport */ createValidAbsoluteUrl,\n  fetchData: () => /* reexport */ fetchData,\n  getDocument: () => /* reexport */ getDocument,\n  getFilenameFromUrl: () => /* reexport */ getFilenameFromUrl,\n  getPdfFilenameFromUrl: () => /* reexport */ getPdfFilenameFromUrl,\n  getXfaPageViewport: () => /* reexport */ getXfaPageViewport,\n  isDataScheme: () => /* reexport */ isDataScheme,\n  isPdfFile: () => /* reexport */ isPdfFile,\n  noContextMenu: () => /* reexport */ noContextMenu,\n  normalizeUnicode: () => /* reexport */ normalizeUnicode,\n  renderTextLayer: () => /* reexport */ renderTextLayer,\n  setLayerDimensions: () => /* reexport */ setLayerDimensions,\n  shadow: () => /* reexport */ shadow,\n  updateTextLayer: () => /* reexport */ updateTextLayer,\n  version: () => /* reexport */ version,\n}); // CONCATENATED MODULE: ./src/shared/util.js\n\nconst isNodeJS =\n  typeof process === 'object' &&\n  process + '' === '[object process]' &&\n  !process.versions.nw &&\n  !(process.versions.electron && process.type && process.type !== 'browser');\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst MAX_IMAGE_SIZE_TO_CACHE = 10e6;\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  OPLIST: 0x100,\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3,\n};\nconst AnnotationEditorPrefix = 'pdfjs_internal_editor_';\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800,\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4,\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3,\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26,\n};\nconst AnnotationReplyType = {\n  GROUP: 'Group',\n  REPLY: 'R',\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200,\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5,\n};\nconst AnnotationActionEventType = {\n  E: 'Mouse Enter',\n  X: 'Mouse Exit',\n  D: 'Mouse Down',\n  U: 'Mouse Up',\n  Fo: 'Focus',\n  Bl: 'Blur',\n  PO: 'PageOpen',\n  PC: 'PageClose',\n  PV: 'PageVisible',\n  PI: 'PageInvisible',\n  K: 'Keystroke',\n  F: 'Format',\n  V: 'Validate',\n  C: 'Calculate',\n};\nconst DocumentActionEventType = {\n  WC: 'WillClose',\n  WS: 'WillSave',\n  DS: 'DidSave',\n  WP: 'WillPrint',\n  DP: 'DidPrint',\n};\nconst PageActionEventType = {\n  O: 'PageOpen',\n  C: 'PageClose',\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5,\n};\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1,\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2,\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case 'http:':\n    case 'https:':\n    case 'ftp:':\n    case 'mailto:':\n    case 'tel:':\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  try {\n    if (options && typeof url === 'string') {\n      if (options.addDefaultProtocol && url.startsWith('www.')) {\n        const dots = url.match(/\\./g);\n        if (dots?.length >= 2) {\n          url = `http://${url}`;\n        }\n      }\n      if (options.tryConvertEncoding) {\n        try {\n          url = stringToUTF8String(url);\n        } catch {}\n      }\n    }\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch {}\n  return null;\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false,\n  });\n  return value;\n}\nconst BaseException = (function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    if (this.constructor === BaseException) {\n      unreachable('Cannot initialize BaseException.');\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n})();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, 'PasswordException');\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, 'UnknownErrorException');\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, 'InvalidPDFException');\n  }\n}\nclass MissingPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, 'MissingPDFException');\n  }\n}\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg, 'UnexpectedResponseException');\n    this.status = status;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, 'FormatError');\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, 'AbortException');\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== 'object' || bytes?.length === undefined) {\n    unreachable('Invalid argument for bytesToString');\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join('');\n}\nfunction stringToBytes(str) {\n  if (typeof str !== 'string') {\n    unreachable('Invalid argument for stringToBytes');\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(\n    (value >> 24) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 8) & 0xff,\n    value & 0xff,\n  );\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction objectFromMap(map) {\n  const obj = Object.create(null);\n  for (const [key, value] of map) {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function('');\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, 'isLittleEndian', isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, 'isEvalSupported', isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, 'isOffscreenCanvasSupported', typeof OffscreenCanvas !== 'undefined');\n  }\n  static get platform() {\n    if (typeof navigator !== 'undefined' && typeof navigator?.platform === 'string') {\n      return shadow(this, 'platform', {\n        isMac: navigator.platform.includes('Mac'),\n      });\n    }\n    return shadow(this, 'platform', {\n      isMac: false,\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(\n      this,\n      'isCSSRoundSupported',\n      globalThis.CSS?.supports?.('width: round(1.5px, 1px)'),\n    );\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), (n) => n.toString(16).padStart(2, '0'));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5],\n    ];\n  }\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = this.applyTransform(r, m);\n    const p2 = this.applyTransform(r.slice(2, 4), m);\n    const p3 = this.applyTransform([r[0], r[3]], m);\n    const p4 = this.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1]),\n    ];\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [\n      m[3] / d,\n      -m[1] / d,\n      -m[2] / d,\n      m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d,\n      (m[4] * m[1] - m[5] * m[0]) / d,\n    ];\n  }\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    if (minMax) {\n      minMax[0] = Math.min(minMax[0], x0, x3);\n      minMax[1] = Math.min(minMax[1], y0, y3);\n      minMax[2] = Math.max(minMax[2], x0, x3);\n      minMax[3] = Math.max(minMax[3], y0, y3);\n    } else {\n      minMax = [Math.min(x0, x3), Math.min(y0, y3), Math.max(x0, x3), Math.max(y0, y3)];\n    }\n    this.#getExtremum(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      3 * (-x0 + 3 * (x1 - x2) + x3),\n      6 * (x0 - 2 * x1 + x2),\n      3 * (x1 - x0),\n      minMax,\n    );\n    this.#getExtremum(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      3 * (-y0 + 3 * (y1 - y2) + y3),\n      6 * (y0 - 2 * y1 + y2),\n      3 * (y1 - y0),\n      minMax,\n    );\n    return minMax;\n  }\n}\nconst PDFStringTranslateTable = /* unused pure expression or super */ null && [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6,\n  0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039,\n  0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02,\n  0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac,\n];\nfunction stringToPDFString(str) {\n  if (str[0] >= '\\xEF') {\n    let encoding;\n    if (str[0] === '\\xFE' && str[1] === '\\xFF') {\n      encoding = 'utf-16be';\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === '\\xFF' && str[1] === '\\xFE') {\n      encoding = 'utf-16le';\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === '\\xEF' && str[1] === '\\xBB' && str[2] === '\\xBF') {\n      encoding = 'utf-8';\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true,\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (!decoded.includes('\\x1b')) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, '');\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join('');\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [\n    date.getUTCFullYear().toString(),\n    (date.getUTCMonth() + 1).toString().padStart(2, '0'),\n    date.getUTCDate().toString().padStart(2, '0'),\n    date.getUTCHours().toString().padStart(2, '0'),\n    date.getUTCMinutes().toString().padStart(2, '0'),\n    date.getUTCSeconds().toString().padStart(2, '0'),\n  ];\n  return buffer.join('');\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex =\n      /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([['', 't']]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) =>\n    p1 ? p1.normalize('NFKC') : NormalizationMap.get(p2),\n  );\n}\nfunction getUuid() {\n  if (typeof crypto !== 'undefined' && typeof crypto?.randomUUID === 'function') {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  if (typeof crypto !== 'undefined' && typeof crypto?.getRandomValues === 'function') {\n    crypto.getRandomValues(buf);\n  } else {\n    for (let i = 0; i < 32; i++) {\n      buf[i] = Math.floor(Math.random() * 255);\n    }\n  }\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = 'pdfjs_internal_id_';\nconst FontRenderOps = {\n  BEZIER_CURVE_TO: 0,\n  MOVE_TO: 1,\n  LINE_TO: 2,\n  QUADRATIC_CURVE_TO: 3,\n  RESTORE: 4,\n  SAVE: 5,\n  SCALE: 6,\n  TRANSFORM: 7,\n  TRANSLATE: 8,\n}; // CONCATENATED MODULE: ./src/display/base_factory.js\n\nclass BaseFilterFactory {\n  constructor() {\n    if (this.constructor === BaseFilterFactory) {\n      unreachable('Cannot initialize BaseFilterFactory.');\n    }\n  }\n  addFilter(maps) {\n    return 'none';\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return 'none';\n  }\n  addAlphaFilter(map) {\n    return 'none';\n  }\n  addLuminosityFilter(map) {\n    return 'none';\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return 'none';\n  }\n  destroy(keepHCM = false) {}\n}\nclass BaseCanvasFactory {\n  constructor() {\n    if (this.constructor === BaseCanvasFactory) {\n      unreachable('Cannot initialize BaseCanvasFactory.');\n    }\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error('Invalid canvas size');\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext('2d'),\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error('Canvas is not specified');\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error('Invalid canvas size');\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error('Canvas is not specified');\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable('Abstract method `_createCanvas` called.');\n  }\n}\nclass BaseCMapReaderFactory {\n  constructor({ baseUrl = null, isCompressed = true }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      unreachable('Cannot initialize BaseCMapReaderFactory.');\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({ name }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The CMap \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.',\n      );\n    }\n    if (!name) {\n      throw new Error('CMap name must be specified.');\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? '.bcmap' : '');\n    const compressionType = this.isCompressed\n      ? CMapCompressionType.BINARY\n      : CMapCompressionType.NONE;\n    return this._fetchData(url, compressionType).catch((reason) => {\n      throw new Error(`Unable to load ${this.isCompressed ? 'binary ' : ''}CMap at: ${url}`);\n    });\n  }\n  _fetchData(url, compressionType) {\n    unreachable('Abstract method `_fetchData` called.');\n  }\n}\nclass BaseStandardFontDataFactory {\n  constructor({ baseUrl = null }) {\n    if (this.constructor === BaseStandardFontDataFactory) {\n      unreachable('Cannot initialize BaseStandardFontDataFactory.');\n    }\n    this.baseUrl = baseUrl;\n  }\n  async fetch({ filename }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The standard font \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"standardFontDataUrl\" API parameter is provided.',\n      );\n    }\n    if (!filename) {\n      throw new Error('Font filename must be specified.');\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetchData(url).catch((reason) => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  _fetchData(url) {\n    unreachable('Abstract method `_fetchData` called.');\n  }\n}\nclass BaseSVGFactory {\n  constructor() {\n    if (this.constructor === BaseSVGFactory) {\n      unreachable('Cannot initialize BaseSVGFactory.');\n    }\n  }\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error('Invalid SVG dimensions');\n    }\n    const svg = this._createSVG('svg:svg');\n    svg.setAttribute('version', '1.1');\n    if (!skipDimensions) {\n      svg.setAttribute('width', `${width}px`);\n      svg.setAttribute('height', `${height}px`);\n    }\n    svg.setAttribute('preserveAspectRatio', 'none');\n    svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== 'string') {\n      throw new Error('Invalid SVG element type');\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable('Abstract method `_createSVG` called.');\n  }\n} // CONCATENATED MODULE: ./src/display/display_utils.js\n\nconst SVG_NS = 'http://www.w3.org/2000/svg';\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({ docId, ownerDocument = globalThis.document } = {}) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return (this.#_cache ||= new Map());\n  }\n  get #hcmCache() {\n    return (this.#_hcmCache ||= new Map());\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement('div');\n      const { style } = div;\n      style.visibility = 'hidden';\n      style.contain = 'strict';\n      style.width = style.height = 0;\n      style.position = 'absolute';\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, 'svg');\n      svg.setAttribute('width', 0);\n      svg.setAttribute('height', 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, 'defs');\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(',');\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(','), bufferG.join(','), bufferB.join(',')];\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return 'none';\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = 'base';\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = 'none';\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: 'none',\n        filter: null,\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = '';\n    if ((fgColor === '#000000' && bgColor === '#ffffff') || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(',');\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = (info.filter = this.#createFilter(id));\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + (i / n) * (end - start);\n      }\n      return arr.join(',');\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || 'luminosity');\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = 'luminosity';\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = 'none';\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: 'none',\n        filter: null,\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = '';\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(',');\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = (info.filter = this.#createFilter(id));\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(\n      getSteps(newFgRGB[0], newBgRGB[0], 5),\n      getSteps(newFgRGB[1], newBgRGB[1], 5),\n      getSteps(newFgRGB[2], newBgRGB[2], 5),\n      filter,\n    );\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#hcmCache.size !== 0) {\n      return;\n    }\n    if (this.#_defs) {\n      this.#_defs.parentNode.parentNode.remove();\n      this.#_defs = null;\n    }\n    if (this.#_cache) {\n      this.#_cache.clear();\n      this.#_cache = null;\n    }\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, 'feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('values', '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0');\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, 'feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute(\n      'values',\n      '0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0',\n    );\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, 'filter');\n    filter.setAttribute('color-interpolation-filters', 'sRGB');\n    filter.setAttribute('id', id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute('type', 'discrete');\n    feFunc.setAttribute('tableValues', table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, 'feComponentTransfer');\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, 'feFuncR', rTable);\n    this.#appendFeFunc(feComponentTransfer, 'feFuncG', gTable);\n    this.#appendFeFunc(feComponentTransfer, 'feFuncB', bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, 'feComponentTransfer');\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, 'feFuncA', aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue('color'));\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({ ownerDocument = globalThis.document } = {}) {\n    super();\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\nasync function fetchData(url, type = 'text') {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case 'arraybuffer':\n        return response.arrayBuffer();\n      case 'blob':\n        return response.blob();\n      case 'json':\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case 'arraybuffer':\n          case 'blob':\n          case 'json':\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    return fetchData(url, this.isCompressed ? 'arraybuffer' : 'text').then((data) => ({\n      cMapData: data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data),\n      compressionType,\n    }));\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  _fetchData(url) {\n    return fetchData(url, 'arraybuffer').then((data) => new Uint8Array(data));\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\nclass PageViewport {\n  constructor({ viewBox, scale, rotation, offsetX = 0, offsetY = 0, dontFlip = false }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error('PageViewport: Invalid rotation, must be a multiple of 90 degrees.');\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY,\n    ];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const { viewBox } = this;\n    return shadow(this, 'rawDims', {\n      pageWidth: viewBox[2] - viewBox[0],\n      pageHeight: viewBox[3] - viewBox[1],\n      pageX: viewBox[0],\n      pageY: viewBox[1],\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n  convertToViewportPoint(x, y) {\n    return Util.applyTransform([x, y], this.transform);\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    return Util.applyInverseTransform([x, y], this.transform);\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, 'RenderingCancelledException');\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === '') {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === 'data:';\n}\nfunction isPdfFile(filename) {\n  return typeof filename === 'string' && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf('/') + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = 'document.pdf') {\n  if (typeof url !== 'string') {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename =\n    reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes('%')) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now(),\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const { name } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const { name, start, end } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join('');\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  try {\n    const { protocol } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    return protocol === 'http:' || protocol === 'https:';\n  } catch {\n    return false;\n  }\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction deprecated(details) {\n  console.log('Deprecated API usage: ' + details);\n}\nlet pdfDateStringRegex;\nclass PDFDateString {\n  static toDateObject(input) {\n    if (!input || typeof input !== 'string') {\n      return null;\n    }\n    pdfDateStringRegex ||= new RegExp(\n      '^D:' +\n        '(\\\\d{4})' +\n        '(\\\\d{2})?' +\n        '(\\\\d{2})?' +\n        '(\\\\d{2})?' +\n        '(\\\\d{2})?' +\n        '(\\\\d{2})?' +\n        '([Z|+|-])?' +\n        '(\\\\d{2})?' +\n        \"'?\" +\n        '(\\\\d{2})?' +\n        \"'?\",\n    );\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || 'Z';\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === '-') {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === '+') {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, { scale = 1, rotation = 0 }) {\n  const { width, height } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    scale,\n    rotation,\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith('#')) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith('rgb(')) {\n    return color\n      .slice(4, -1)\n      .split(',')\n      .map((x) => parseInt(x));\n  }\n  if (color.startsWith('rgba(')) {\n    return color\n      .slice(5, -1)\n      .split(',')\n      .map((x) => parseInt(x))\n      .slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement('span');\n  span.style.visibility = 'hidden';\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const { pageWidth, pageHeight } = viewport.rawDims;\n    const { style } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--scale-factor) * ${pageWidth}px`,\n      h = `var(--scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(${w}, 1px)` : `calc(${w})`,\n      heightStr = useRound ? `round(${h}, 1px)` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute('data-main-rotation', viewport.rotation);\n  }\n} // CONCATENATED MODULE: ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  constructor(editor) {\n    this.#editor = editor;\n  }\n  render() {\n    const editToolbar = (this.#toolbar = document.createElement('div'));\n    editToolbar.className = 'editToolbar';\n    editToolbar.setAttribute('role', 'toolbar');\n    editToolbar.addEventListener('contextmenu', noContextMenu);\n    editToolbar.addEventListener('pointerdown', EditorToolbar.#pointerDown);\n    const buttons = (this.#buttons = document.createElement('div'));\n    buttons.className = 'buttons';\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const { style } = editToolbar;\n      const x = this.#editor._uiManager.direction === 'ltr' ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    this.#addDeleteButton();\n    return editToolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  #addListenersToElement(element) {\n    element.addEventListener('focusin', this.#focusIn.bind(this), {\n      capture: true,\n    });\n    element.addEventListener('focusout', this.#focusOut.bind(this), {\n      capture: true,\n    });\n    element.addEventListener('contextmenu', noContextMenu);\n  }\n  hide() {\n    this.#toolbar.classList.add('hidden');\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove('hidden');\n  }\n  #addDeleteButton() {\n    const button = document.createElement('button');\n    button.className = 'delete';\n    button.tabIndex = 0;\n    button.setAttribute('data-l10n-id', `pdfjs-editor-remove-${this.#editor.editorType}-button`);\n    this.#addListenersToElement(button);\n    button.addEventListener('click', (e) => {\n      this.#editor._uiManager.delete();\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement('div');\n    divider.className = 'divider';\n    return divider;\n  }\n  addAltTextButton(button) {\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = (this.#toolbar = document.createElement('div'));\n    editToolbar.className = 'editToolbar';\n    editToolbar.setAttribute('role', 'toolbar');\n    editToolbar.addEventListener('contextmenu', noContextMenu);\n    const buttons = (this.#buttons = document.createElement('div'));\n    buttons.className = 'buttons';\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const { style } = (this.#toolbar ||= this.#render());\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement('button');\n    button.className = 'highlightButton';\n    button.tabIndex = 0;\n    button.setAttribute('data-l10n-id', `pdfjs-highlight-floating-button1`);\n    const span = document.createElement('span');\n    button.append(span);\n    span.className = 'visuallyHidden';\n    span.setAttribute('data-l10n-id', 'pdfjs-highlight-floating-button-label');\n    button.addEventListener('contextmenu', noContextMenu);\n    button.addEventListener('click', () => {\n      this.#uiManager.highlightSelection('floating_button');\n    });\n    this.#buttons.append(button);\n  }\n} // CONCATENATED MODULE: ./src/display/editor/tools.js\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nfunction opacityToHex(opacity) {\n  return Math.round(Math.min(255, Math.max(1, 255 * opacity)))\n    .toString(16)\n    .padStart(2, '0');\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext('2d');\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, '_isSVGFittingCanvas', promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false,\n      };\n      let image;\n      if (typeof rawData === 'string') {\n        data.url = rawData;\n        image = await fetchData(rawData, 'blob');\n      } else {\n        image = data.file = rawData;\n      }\n      if (image.type === 'image/svg+xml') {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = (data.svgUrl = fileReader.result);\n            imageElement.src = (await mustRemoveAspectRatioPromise)\n              ? `${url}#svgView(preserveAspectRatio(none))`\n              : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      console.error(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const { lastModified, name, size, type } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({ cmd, undo, post, mustExec, type = NaN, overwriteIfSameType = false, keepUndo = false }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type,\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const { undo, post } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const { cmd, post } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const { isMac } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith('mac+');\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options,\n          });\n          this.allKeys.add(key.split('+').at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options,\n          });\n          this.allKeys.add(key.split('+').at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push('alt');\n    }\n    if (event.ctrlKey) {\n      this.buffer.push('ctrl');\n    }\n    if (event.metaKey) {\n      this.buffer.push('meta');\n    }\n    if (event.shiftKey) {\n      this.buffer.push('shift');\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join('+');\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: { bubbles = false, args = [], checker = null },\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([\n    ['CanvasText', [0, 0, 0]],\n    ['Canvas', [255, 255, 255]],\n  ]);\n  get _colors() {\n    const colors = new Map([\n      ['CanvasText', null],\n      ['Canvas', null],\n    ]);\n    getColorValues(colors);\n    return shadow(this, '_colors', colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia('(forced-colors: active)').matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  #enableHighlightFloatingButton = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #boundBlur = this.blur.bind(this);\n  #boundFocus = this.focus.bind(this);\n  #boundCopy = this.copy.bind(this);\n  #boundCut = this.cut.bind(this);\n  #boundPaste = this.paste.bind(this);\n  #boundKeydown = this.keydown.bind(this);\n  #boundKeyup = this.keyup.bind(this);\n  #boundOnEditingAction = this.onEditingAction.bind(this);\n  #boundOnPageChanging = this.onPageChanging.bind(this);\n  #boundOnScaleChanging = this.onScaleChanging.bind(this);\n  #boundSelectionChange = this.#selectionChange.bind(this);\n  #boundOnRotationChanging = this.onRotationChanging.bind(this);\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false,\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = (self) =>\n      self.#container.contains(document.activeElement) &&\n      document.activeElement.tagName !== 'BUTTON' &&\n      self.hasSomethingToControl();\n    const textInputChecker = (_self, { target: el }) => {\n      if (el instanceof HTMLInputElement) {\n        const { type } = el;\n        return type !== 'text' && type !== 'number';\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(\n      this,\n      '_keyboardManager',\n      new KeyboardManager([\n        [\n          ['ctrl+a', 'mac+meta+a'],\n          proto.selectAll,\n          {\n            checker: textInputChecker,\n          },\n        ],\n        [\n          ['ctrl+z', 'mac+meta+z'],\n          proto.undo,\n          {\n            checker: textInputChecker,\n          },\n        ],\n        [\n          ['ctrl+y', 'ctrl+shift+z', 'mac+meta+shift+z', 'ctrl+shift+Z', 'mac+meta+shift+Z'],\n          proto.redo,\n          {\n            checker: textInputChecker,\n          },\n        ],\n        [\n          [\n            'Backspace',\n            'alt+Backspace',\n            'ctrl+Backspace',\n            'shift+Backspace',\n            'mac+Backspace',\n            'mac+alt+Backspace',\n            'mac+ctrl+Backspace',\n            'Delete',\n            'ctrl+Delete',\n            'shift+Delete',\n            'mac+Delete',\n          ],\n          proto.delete,\n          {\n            checker: textInputChecker,\n          },\n        ],\n        [\n          ['Enter', 'mac+Enter'],\n          proto.addNewEditorFromKeyboard,\n          {\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(el) &&\n              !self.isEnterHandled,\n          },\n        ],\n        [\n          [' ', 'mac+ '],\n          proto.addNewEditorFromKeyboard,\n          {\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(document.activeElement),\n          },\n        ],\n        [['Escape', 'mac+Escape'], proto.unselectAll],\n        [\n          ['ArrowLeft', 'mac+ArrowLeft'],\n          proto.translateSelectedEditors,\n          {\n            args: [-small, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowLeft', 'mac+shift+ArrowLeft'],\n          proto.translateSelectedEditors,\n          {\n            args: [-big, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowRight', 'mac+ArrowRight'],\n          proto.translateSelectedEditors,\n          {\n            args: [small, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowRight', 'mac+shift+ArrowRight'],\n          proto.translateSelectedEditors,\n          {\n            args: [big, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowUp', 'mac+ArrowUp'],\n          proto.translateSelectedEditors,\n          {\n            args: [0, -small],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowUp', 'mac+shift+ArrowUp'],\n          proto.translateSelectedEditors,\n          {\n            args: [0, -big],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowDown', 'mac+ArrowDown'],\n          proto.translateSelectedEditors,\n          {\n            args: [0, small],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowDown', 'mac+shift+ArrowDown'],\n          proto.translateSelectedEditors,\n          {\n            args: [0, big],\n            checker: arrowChecker,\n          },\n        ],\n      ]),\n    );\n  }\n  constructor(\n    container,\n    viewer,\n    altTextManager,\n    eventBus,\n    pdfDocument,\n    pageColors,\n    highlightColors,\n    enableHighlightFloatingButton,\n    mlManager,\n  ) {\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this._eventBus = eventBus;\n    this._eventBus._on('editingaction', this.#boundOnEditingAction);\n    this._eventBus._on('pagechanging', this.#boundOnPageChanging);\n    this._eventBus._on('scalechanging', this.#boundOnScaleChanging);\n    this._eventBus._on('rotationchanging', this.#boundOnRotationChanging);\n    this.#addSelectionListener();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0,\n    };\n    this.isShiftKeyDown = false;\n  }\n  destroy() {\n    this.#removeKeyboardManager();\n    this.#removeFocusManager();\n    this._eventBus._off('editingaction', this.#boundOnEditingAction);\n    this._eventBus._off('pagechanging', this.#boundOnPageChanging);\n    this._eventBus._off('scalechanging', this.#boundOnScaleChanging);\n    this._eventBus._off('rotationchanging', this.#boundOnRotationChanging);\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this.#removeSelectionListener();\n  }\n  async mlGuess(data) {\n    return this.#mlManager?.guess(data) || null;\n  }\n  get hasMLManager() {\n    return !!this.#mlManager;\n  }\n  get hcmFilter() {\n    return shadow(\n      this,\n      'hcmFilter',\n      this.#pageColors\n        ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background)\n        : 'none',\n    );\n  }\n  get direction() {\n    return shadow(this, 'direction', getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(\n      this,\n      'highlightColors',\n      this.#highlightColors\n        ? new Map(\n            this.#highlightColors.split(',').map((pair) => pair.split('=').map((x) => x.trim())),\n          )\n        : null,\n    );\n  }\n  get highlightColorNames() {\n    return shadow(\n      this,\n      'highlightColorNames',\n      this.highlightColors ? new Map(Array.from(this.highlightColors, (e) => e.reverse())) : null,\n    );\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor) {\n    this.#altTextManager?.editAltText(this, editor);\n  }\n  onPageChanging({ pageNumber }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const { x: layerX, y: layerY, width, height } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle('noUserSelect', value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({ scale }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n  }\n  onRotationChanging({ pagesRotation }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({ anchorNode }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  highlightSelection(methodOfCreation = '') {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const { anchorNode, anchorOffset, focusNode, focusOffset } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest('.textLayer');\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    if (this.#mode === AnnotationEditorType.NONE) {\n      this._eventBus.dispatch('showannotationeditorui', {\n        source: this,\n        mode: AnnotationEditorType.HIGHLIGHT,\n      });\n      this.showAllEditors('highlight', true, true);\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        layer.createAndAddNewEditor(\n          {\n            x: 0,\n            y: 0,\n          },\n          false,\n          {\n            methodOfCreation,\n            boxes,\n            anchorNode,\n            anchorOffset,\n            focusNode,\n            focusOffset,\n            text,\n          },\n        );\n        break;\n      }\n    }\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest('.textLayer');\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === 'ltr');\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false,\n        });\n      }\n      return;\n    }\n    const { anchorNode } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest('.textLayer');\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false,\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true,\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors('highlight', true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const pointerup = (e) => {\n        if (e.type === 'pointerup' && e.button !== 0) {\n          return;\n        }\n        window.removeEventListener('pointerup', pointerup);\n        window.removeEventListener('blur', pointerup);\n        if (e.type === 'pointerup') {\n          this.#onSelectEnd('main_toolbar');\n        }\n      };\n      window.addEventListener('pointerup', pointerup);\n      window.addEventListener('blur', pointerup);\n    }\n  }\n  #onSelectEnd(methodOfCreation = '') {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener('selectionchange', this.#boundSelectionChange);\n  }\n  #removeSelectionListener() {\n    document.removeEventListener('selectionchange', this.#boundSelectionChange);\n  }\n  #addFocusManager() {\n    window.addEventListener('focus', this.#boundFocus);\n    window.addEventListener('blur', this.#boundBlur);\n  }\n  #removeFocusManager() {\n    window.removeEventListener('focus', this.#boundFocus);\n    window.removeEventListener('blur', this.#boundBlur);\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd('main_toolbar');\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const { activeElement } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\n      'focusin',\n      () => {\n        lastEditor._focusEventsAllowed = true;\n      },\n      {\n        once: true,\n      },\n    );\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    window.addEventListener('keydown', this.#boundKeydown);\n    window.addEventListener('keyup', this.#boundKeyup);\n  }\n  #removeKeyboardManager() {\n    window.removeEventListener('keydown', this.#boundKeydown);\n    window.removeEventListener('keyup', this.#boundKeyup);\n  }\n  #addCopyPasteListeners() {\n    document.addEventListener('copy', this.#boundCopy);\n    document.addEventListener('cut', this.#boundCut);\n    document.addEventListener('paste', this.#boundPaste);\n  }\n  #removeCopyPasteListeners() {\n    document.removeEventListener('copy', this.#boundCopy);\n    document.removeEventListener('cut', this.#boundCut);\n    document.removeEventListener('paste', this.#boundPaste);\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData('application/pdfjs', JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  paste(event) {\n    event.preventDefault();\n    const { clipboardData } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData('application/pdfjs');\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true,\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === 'Shift') {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === 'Shift') {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd('main_toolbar');\n      }\n    }\n  }\n  onEditingAction({ name }) {\n    switch (name) {\n      case 'undo':\n      case 'redo':\n      case 'delete':\n      case 'selectAll':\n        this[name]();\n        break;\n      case 'highlightSelection':\n        this.highlightSelection('context_menu');\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(\n      ([key, value]) => this.#previousStates[key] !== value,\n    );\n    if (hasChanged) {\n      this._eventBus.dispatch('annotationeditorstateschanged', {\n        source: this,\n        details: Object.assign(this.#previousStates, details),\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch('annotationeditorparamschanged', {\n      source: this,\n      details,\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false,\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false,\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      return;\n    }\n    this.setEditingState(true);\n    this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId && isFromKeyboard) {\n      this.addNewEditorFromKeyboard();\n      return;\n    }\n    if (!editId) {\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n        break;\n      }\n    }\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(mode) {\n    if (mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch('switchannotationeditormode', {\n      source: this,\n      mode,\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor();\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch('reporttelemetry', {\n          source: this,\n          details: {\n            type: 'editing',\n            data: {\n              type: 'highlight',\n              action: 'toggle_visibility',\n            },\n          },\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors('highlight', value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle('waiting', mustWait);\n    }\n  }\n  #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      for (const layer of this.#allLayers.values()) {\n        layer.enable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    this.unselect(editor);\n    if (\n      !editor.annotationElementId ||\n      !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)\n    ) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {\n    }\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection,\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n  setSelected(editor) {\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection,\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty(),\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [...this.#selectedEditors];\n    const cmd = () => {\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true,\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection,\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false,\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n            }\n          }\n        },\n        mustExec: false,\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1,\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{ x, y, pageIndex }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||=\n        x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, { newX, newY, newPageIndex }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, { savedX, savedY, savedPageIndex }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true,\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return (\n      this.getActive()?.shouldGetKeyboardEvents() ||\n      (this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents())\n    );\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, 'imageManager', new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute('data-main-rotation')) {\n      case '90':\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      case '180':\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n      case '270':\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const { x, y, width, height } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({ annotationElementId, id }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({ annotationElementId }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n} // CONCATENATED MODULE: ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = '';\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #editor = null;\n  static _l10nPromise = null;\n  constructor(editor) {\n    this.#editor = editor;\n  }\n  static initialize(l10nPromise) {\n    AltText._l10nPromise ||= l10nPromise;\n  }\n  async render() {\n    const altText = (this.#altTextButton = document.createElement('button'));\n    altText.className = 'altText';\n    const msg = await AltText._l10nPromise.get('pdfjs-editor-alt-text-button-label');\n    altText.textContent = msg;\n    altText.setAttribute('aria-label', msg);\n    altText.tabIndex = '0';\n    altText.addEventListener('contextmenu', noContextMenu);\n    altText.addEventListener('pointerdown', (event) => event.stopPropagation());\n    const onClick = (event) => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n    };\n    altText.addEventListener('click', onClick, {\n      capture: true,\n    });\n    altText.addEventListener('keydown', (event) => {\n      if (event.target === altText && event.key === 'Enter') {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    });\n    await this.#setState();\n    return altText;\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard,\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative,\n    };\n  }\n  set data({ altText, decorative }) {\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    this.#altText = altText;\n    this.#altTextDecorative = decorative;\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextTooltip = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (!this.#altText && !this.#altTextDecorative) {\n      button.classList.remove('done');\n      this.#altTextTooltip?.remove();\n      return;\n    }\n    button.classList.add('done');\n    AltText._l10nPromise.get('pdfjs-editor-alt-text-edit-button-label').then((msg) => {\n      button.setAttribute('aria-label', msg);\n    });\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement('span');\n      tooltip.className = 'tooltip';\n      tooltip.setAttribute('role', 'tooltip');\n      const id = (tooltip.id = `alt-text-tooltip-${this.#editor.id}`);\n      button.setAttribute('aria-describedby', id);\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      button.addEventListener('mouseenter', () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add('show');\n          this.#editor._reportTelemetry({\n            action: 'alt_text_tooltip',\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      });\n      button.addEventListener('mouseleave', () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove('show');\n      });\n    }\n    tooltip.innerText = this.#altTextDecorative\n      ? await AltText._l10nPromise.get('pdfjs-editor-alt-text-decorative-tooltip')\n      : this.#altText;\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getImageForAltText();\n    element?.setAttribute('aria-describedby', tooltip.id);\n  }\n} // CONCATENATED MODULE: ./src/display/editor/editor.js\n\nclass AnnotationEditor {\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #savedDimensions = null;\n  #boundFocusin = this.focusin.bind(this);\n  #boundFocusout = this.focusout.bind(this);\n  #editToolbar = null;\n  #focusedResizerName = '';\n  #hasBeenClicked = false;\n  #initialPosition = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  _initialOptions = Object.create(null);\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  _l10nPromise = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(\n      this,\n      '_resizerKeyboardManager',\n      new KeyboardManager([\n        [\n          ['ArrowLeft', 'mac+ArrowLeft'],\n          resize,\n          {\n            args: [-small, 0],\n          },\n        ],\n        [\n          ['ctrl+ArrowLeft', 'mac+shift+ArrowLeft'],\n          resize,\n          {\n            args: [-big, 0],\n          },\n        ],\n        [\n          ['ArrowRight', 'mac+ArrowRight'],\n          resize,\n          {\n            args: [small, 0],\n          },\n        ],\n        [\n          ['ctrl+ArrowRight', 'mac+shift+ArrowRight'],\n          resize,\n          {\n            args: [big, 0],\n          },\n        ],\n        [\n          ['ArrowUp', 'mac+ArrowUp'],\n          resize,\n          {\n            args: [0, -small],\n          },\n        ],\n        [\n          ['ctrl+ArrowUp', 'mac+shift+ArrowUp'],\n          resize,\n          {\n            args: [0, -big],\n          },\n        ],\n        [\n          ['ArrowDown', 'mac+ArrowDown'],\n          resize,\n          {\n            args: [0, small],\n          },\n        ],\n        [\n          ['ctrl+ArrowDown', 'mac+shift+ArrowDown'],\n          resize,\n          {\n            args: [0, big],\n          },\n        ],\n        [['Escape', 'mac+Escape'], AnnotationEditor.prototype._stopResizingWithKeyboard],\n      ]),\n    );\n  }\n  constructor(parameters) {\n    if (this.constructor === AnnotationEditor) {\n      unreachable('Cannot initialize AnnotationEditor.');\n    }\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: { pageWidth, pageHeight, pageX, pageY },\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, '_defaultLineColor', this._colorManager.getHexCode('CanvasText'));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager,\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager, options) {\n    AnnotationEditor._l10nPromise ||= new Map(\n      [\n        'pdfjs-editor-alt-text-button-label',\n        'pdfjs-editor-alt-text-edit-button-label',\n        'pdfjs-editor-alt-text-decorative-tooltip',\n        'pdfjs-editor-resizer-label-topLeft',\n        'pdfjs-editor-resizer-label-topMiddle',\n        'pdfjs-editor-resizer-label-topRight',\n        'pdfjs-editor-resizer-label-middleRight',\n        'pdfjs-editor-resizer-label-bottomRight',\n        'pdfjs-editor-resizer-label-bottomMiddle',\n        'pdfjs-editor-resizer-label-bottomLeft',\n        'pdfjs-editor-resizer-label-middleLeft',\n      ].map((str) => [str, l10n.get(str.replaceAll(/([A-Z])/g, (c) => `-${c.toLowerCase()}`))]),\n    );\n    if (options?.strings) {\n      for (const str of options.strings) {\n        AnnotationEditor._l10nPromise.set(str, l10n.get(str));\n      }\n    }\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue('--outline-width')) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable('Not implemented');\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle('draggable', value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= (this.height * pageHeight) / (pageWidth * 2);\n        this.y += (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += (this.height * pageHeight) / (pageWidth * 2);\n        this.y -= (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialPosition ||= [this.x, this.y];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: 'nearest',\n    });\n  }\n  drag(tx, ty) {\n    this.#initialPosition ||= [this.x, this.y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const { x, y } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let { x, y } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    this.div.style.left = `${(100 * x).toFixed(2)}%`;\n    this.div.style.top = `${(100 * y).toFixed(2)}%`;\n    this.div.scrollIntoView({\n      block: 'nearest',\n    });\n  }\n  get _hasBeenMoved() {\n    return (\n      !!this.#initialPosition &&\n      (this.#initialPosition[0] !== this.x || this.#initialPosition[1] !== this.y)\n    );\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const { _borderLineWidth } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    let { x, y, width, height } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = Math.max(0, Math.min(pageWidth - width, x));\n          y = Math.max(0, Math.min(pageHeight - height, y));\n          break;\n        case 90:\n          x = Math.max(0, Math.min(pageWidth - height, x));\n          y = Math.min(pageHeight, Math.max(width, y));\n          break;\n        case 180:\n          x = Math.min(pageWidth, Math.max(width, x));\n          y = Math.min(pageHeight, Math.max(height, y));\n          break;\n        case 270:\n          x = Math.min(pageWidth, Math.max(height, x));\n          y = Math.max(0, Math.min(pageHeight - width, y));\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const { style } = this.div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n      }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n      }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight],\n    } = this;\n    const scaledWidth = pageWidth * parentScale;\n    const scaledHeight = pageHeight * parentScale;\n    return util_FeatureTest.isCSSRoundSupported\n      ? [Math.round(scaledWidth), Math.round(scaledHeight)]\n      : [scaledWidth, scaledHeight];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.div.style.width = `${((100 * width) / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      this.div.style.height = `${((100 * height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const { style } = this.div;\n    const { height, width } = style;\n    const widthPercent = width.endsWith('%');\n    const heightPercent = !this.#keepAspectRatio && height.endsWith('%');\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${((100 * parseFloat(width)) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${((100 * parseFloat(height)) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement('div');\n    this.#resizersDiv.classList.add('resizers');\n    const classes = this._willKeepAspectRatio\n      ? ['topLeft', 'topRight', 'bottomRight', 'bottomLeft']\n      : [\n          'topLeft',\n          'topMiddle',\n          'topRight',\n          'middleRight',\n          'bottomRight',\n          'bottomMiddle',\n          'bottomLeft',\n          'middleLeft',\n        ];\n    for (const name of classes) {\n      const div = document.createElement('div');\n      this.#resizersDiv.append(div);\n      div.classList.add('resizer', name);\n      div.setAttribute('data-resizer-name', name);\n      div.addEventListener('pointerdown', this.#resizerPointerdown.bind(this, name));\n      div.addEventListener('contextmenu', noContextMenu);\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const { isMac } = util_FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const boundResizerPointermove = this.#resizerPointermove.bind(this, name);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    const pointerMoveOptions = {\n      passive: true,\n      capture: true,\n    };\n    this.parent.togglePointerEvents(false);\n    window.addEventListener('pointermove', boundResizerPointermove, pointerMoveOptions);\n    window.addEventListener('contextmenu', noContextMenu);\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(\n      event.target,\n    ).cursor;\n    const pointerUpCallback = () => {\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      window.removeEventListener('pointerup', pointerUpCallback);\n      window.removeEventListener('blur', pointerUpCallback);\n      window.removeEventListener('pointermove', boundResizerPointermove, pointerMoveOptions);\n      window.removeEventListener('contextmenu', noContextMenu);\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n    };\n    window.addEventListener('pointerup', pointerUpCallback);\n    window.addEventListener('blur', pointerUpCallback);\n  }\n  #addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight) {\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (\n      newX === savedX &&\n      newY === savedY &&\n      newWidth === savedWidth &&\n      newHeight === savedHeight\n    ) {\n      return;\n    }\n    this.addCommands({\n      cmd: () => {\n        this.width = newWidth;\n        this.height = newHeight;\n        this.x = newX;\n        this.y = newY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n        this.fixAndSetPosition();\n      },\n      undo: () => {\n        this.width = savedWidth;\n        this.height = savedHeight;\n        this.x = savedX;\n        this.y = savedY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * savedWidth, parentHeight * savedHeight);\n        this.fixAndSetPosition();\n      },\n      mustExec: true,\n    });\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const round = (x) => Math.round(x * 10000) / 10000;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [\n      rotationMatrix[0] * x + rotationMatrix[2] * y,\n      rotationMatrix[1] * x + rotationMatrix[3] * y,\n    ];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [\n      invRotationMatrix[0] * x + invRotationMatrix[2] * y,\n      invRotationMatrix[1] * x + invRotationMatrix[3] * y,\n    ];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case 'topLeft':\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case 'topMiddle':\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case 'topRight':\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case 'middleRight':\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case 'bottomRight':\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case 'bottomMiddle':\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case 'bottomLeft':\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case 'middleLeft':\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = round(savedX + transfOppositePoint[0]);\n    const oppositeY = round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let [deltaX, deltaY] = this.screenToPageTranslation(event.movementX, event.movementY);\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(\n        Math.min(\n          Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) /\n            oldDiag,\n          1 / savedWidth,\n          1 / savedHeight,\n        ),\n        minWidth / savedWidth,\n        minHeight / savedHeight,\n      );\n    } else if (isHorizontal) {\n      ratioX =\n        Math.max(minWidth, Math.min(1, Math.abs(oppositePoint[0] - point[0] - deltaX))) /\n        savedWidth;\n    } else {\n      ratioY =\n        Math.max(minHeight, Math.min(1, Math.abs(oppositePoint[1] - point[1] - deltaY))) /\n        savedHeight;\n    }\n    const newWidth = round(savedWidth * ratioX);\n    const newHeight = round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n  }\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  async addEditToolbar() {\n    if (this.#editToolbar || this.#isInEditMode) {\n      return this.#editToolbar;\n    }\n    this.#editToolbar = new EditorToolbar(this);\n    this.div.append(this.#editToolbar.render());\n    if (this.#altText) {\n      this.#editToolbar.addAltTextButton(await this.#altText.render());\n    }\n    return this.#editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this.#editToolbar) {\n      return;\n    }\n    this.#editToolbar.remove();\n    this.#editToolbar = null;\n    this.#altText?.destroy();\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10nPromise);\n    this.#altText = new AltText(this);\n    await this.addEditToolbar();\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  hasAltText() {\n    return !this.#altText?.isEmpty();\n  }\n  render() {\n    this.div = document.createElement('div');\n    this.div.setAttribute('data-editor-rotation', (360 - this.rotation) % 360);\n    this.div.className = this.name;\n    this.div.setAttribute('id', this.id);\n    this.div.tabIndex = this.#disabled ? -1 : 0;\n    if (!this._isVisible) {\n      this.div.classList.add('hidden');\n    }\n    this.setInForeground();\n    this.div.addEventListener('focusin', this.#boundFocusin);\n    this.div.addEventListener('focusout', this.#boundFocusout);\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      this.div.style.maxWidth = `${((100 * parentHeight) / parentWidth).toFixed(2)}%`;\n      this.div.style.maxHeight = `${((100 * parentWidth) / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, this.div, ['pointerdown']);\n    return this.div;\n  }\n  pointerdown(event) {\n    const { isMac } = util_FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const { isMac } = util_FeatureTest.platform;\n    if ((event.ctrlKey && !isMac) || event.shiftKey || (event.metaKey && isMac)) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const isSelected = this._uiManager.isSelected(this);\n    this._uiManager.setUpDragSession();\n    let pointerMoveOptions, pointerMoveCallback;\n    if (isSelected) {\n      this.div.classList.add('moving');\n      pointerMoveOptions = {\n        passive: true,\n        capture: true,\n      };\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      pointerMoveCallback = (e) => {\n        const { clientX: x, clientY: y } = e;\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      };\n      window.addEventListener('pointermove', pointerMoveCallback, pointerMoveOptions);\n    }\n    const pointerUpCallback = () => {\n      window.removeEventListener('pointerup', pointerUpCallback);\n      window.removeEventListener('blur', pointerUpCallback);\n      if (isSelected) {\n        this.div.classList.remove('moving');\n        window.removeEventListener('pointermove', pointerMoveCallback, pointerMoveOptions);\n      }\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(event);\n      }\n    };\n    window.addEventListener('pointerup', pointerUpCallback);\n    window.addEventListener('blur', pointerUpCallback);\n  }\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [\n          x + shiftX + pageX,\n          pageHeight - y - shiftY - height + pageY,\n          x + shiftX + width + pageX,\n          pageHeight - y - shiftY + pageY,\n        ];\n      case 90:\n        return [\n          x + shiftY + pageX,\n          pageHeight - y + shiftX + pageY,\n          x + shiftY + height + pageX,\n          pageHeight - y + shiftX + width + pageY,\n        ];\n      case 180:\n        return [\n          x - shiftX - width + pageX,\n          pageHeight - y + shiftY + pageY,\n          x - shiftX + pageX,\n          pageHeight - y + shiftY + height + pageY,\n        ];\n      case 270:\n        return [\n          x - shiftY - height + pageX,\n          pageHeight - y - shiftX - width + pageY,\n          x - shiftY + pageX,\n          pageHeight - y - shiftX + pageY,\n        ];\n      default:\n        throw new Error('Invalid rotation');\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error('Invalid rotation');\n    }\n  }\n  onceAdded() {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    this.#isInEditMode = true;\n  }\n  disableEditMode() {\n    this.#isInEditMode = false;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  rebuild() {\n    this.div?.addEventListener('focusin', this.#boundFocusin);\n    this.div?.addEventListener('focusout', this.#boundFocusout);\n  }\n  rotate(_angle) {}\n  serialize(isForCopying = false, context = null) {\n    unreachable('An editor must be serializable');\n  }\n  static deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager,\n    });\n    editor.rotation = data.rotation;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.div.removeEventListener('focusin', this.#boundFocusin);\n    this.div.removeEventListener('focusout', this.#boundFocusout);\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove('hidden');\n      bindEvents(this, this.div, ['keydown']);\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== 'Enter') {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height,\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute('data-resizer-name');\n        div.setAttribute('role', 'spinbutton');\n        div.addEventListener('keydown', boundResizerKeydown);\n        div.addEventListener('blur', boundResizerBlur);\n        div.addEventListener('focus', this.#resizerFocus.bind(this, name));\n        AnnotationEditor._l10nPromise\n          .get(`pdfjs-editor-resizer-label-${name}`)\n          .then((msg) => div.setAttribute('aria-label', msg));\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition =\n      (((360 - this.rotation + this.parentRotation) % 360) / 90) *\n      (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute('data-resizer-name');\n        AnnotationEditor._l10nPromise\n          .get(`pdfjs-editor-resizer-label-${name}`)\n          .then((msg) => child.setAttribute('aria-label', msg));\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true,\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (\n      this.#isResizerEnabledForKeyboard &&\n      event.relatedTarget?.parentNode !== this.#resizersDiv\n    ) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : '';\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      movementX: x,\n      movementY: y,\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    if (this.#savedDimensions) {\n      const { savedX, savedY, savedWidth, savedHeight } = this.#savedDimensions;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n      this.#savedDimensions = null;\n    }\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    this.makeResizable();\n    this.div?.classList.add('selectedEditor');\n    if (!this.#editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains('selectedEditor')) {\n          this.#editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this.#editToolbar?.show();\n  }\n  unselect() {\n    this.#resizersDiv?.classList.add('hidden');\n    this.div?.classList.remove('selectedEditor');\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true,\n      });\n    }\n    this.#editToolbar?.hide();\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  enterInEditMode() {}\n  getImageForAltText() {\n    return null;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const { style } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = 'auto';\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: 'added',\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const { action } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch('reporttelemetry', {\n      source: this,\n      details: {\n        type: 'editing',\n        data,\n      },\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle('hidden', !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector('.annotationContent');\n    if (!content) {\n      content = document.createElement('div');\n      content.classList.add('annotationContent', this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === 'CANVAS') {\n      const canvas = content;\n      content = document.createElement('div');\n      content.classList.add('annotationContent', this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const { firstChild } = annotation.container;\n    if (firstChild.nodeName === 'DIV' && firstChild.classList.contains('annotationContent')) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n    };\n  }\n} // CONCATENATED MODULE: ./src/shared/murmurhash3.js\n\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === 'string') {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error('Invalid data format, must be a string or TypedArray.');\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        h1 ^= k1;\n        h1 = (h1 << 13) | (h1 >>> 19);\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = ((k2 * C1) & MASK_HIGH) | ((k2 * C1_LOW) & MASK_LOW);\n        k2 = (k2 << 15) | (k2 >>> 17);\n        k2 = ((k2 * C2) & MASK_HIGH) | ((k2 * C2_LOW) & MASK_LOW);\n        h2 ^= k2;\n        h2 = (h2 << 13) | (h2 >>> 19);\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0xed558ccd) & MASK_HIGH) | ((h1 * 0x8ccd) & MASK_LOW);\n    h2 =\n      ((h2 * 0xff51afd7) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xafd7ed55) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0x1a85ec53) & MASK_HIGH) | ((h1 * 0xec53) & MASK_LOW);\n    h2 =\n      ((h2 * 0xc4ceb9fe) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xb9fe1a85) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, '0') + (h2 >>> 0).toString(16).padStart(8, '0');\n  }\n} // CONCATENATED MODULE: ./src/display/annotation_storage.js\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: '',\n  transfer: undefined,\n});\nclass AnnotationStorage {\n  #modified = false;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === 'function') {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === 'function') {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  getAll() {\n    return this.#storage.size > 0 ? objectFromMap(this.#storage) : null;\n  }\n  setAll(obj) {\n    for (const [key, val] of Object.entries(obj)) {\n      this.setValue(key, val);\n    }\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === 'function') {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === 'function') {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0\n      ? {\n          map,\n          hash: hash.hexdigest(),\n          transfer,\n        }\n      : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const { type } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = (stats[type] ||= new Map());\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === 'type') {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const { map, hash, transfer } = parent.serializable;\n    const clone = structuredClone(\n      map,\n      transfer\n        ? {\n            transfer,\n          }\n        : null,\n    );\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer,\n    };\n  }\n  get print() {\n    unreachable('Should not call PrintAnnotationStorage.print');\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n} // CONCATENATED MODULE: ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({ ownerDocument = globalThis.document, styleElement = null }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement('style');\n      this._document.documentElement.getElementsByTagName('head')[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({ systemFontInfo: info, _inspectFont }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(\n      !this.disableFontFace,\n      \"loadSystemFont shouldn't be called when `disableFontFace` is set.\",\n    );\n    if (this.isFontLoadingAPISupported) {\n      const { loadedName, src, style } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(\n          `Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`,\n        );\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable('Not implemented: loadSystemFont without the Font Loading API.');\n  }\n  async bind(font) {\n    if (font.attached || (font.missingFile && !font.systemFontInfo)) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise((resolve) => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, 'isFontLoadingAPISupported', hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    let supported = false;\n    if (isNodeJS) {\n      supported = true;\n    } else if (\n      typeof navigator !== 'undefined' &&\n      typeof navigator?.userAgent === 'string' &&\n      /Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)\n    ) {\n      supported = true;\n    }\n    return shadow(this, 'isSyncFontLoadingSupported', supported);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, 'completeRequest() cannot be called twice.');\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const { loadingRequests } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback,\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\n      'T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA' +\n        'FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA' +\n        'ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA' +\n        'AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1' +\n        'AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD' +\n        '6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM' +\n        'AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D' +\n        'IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA' +\n        'AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA' +\n        'AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB' +\n        'AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY' +\n        'AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA' +\n        'AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n        'AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n        'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n        'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n        'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n        'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA' +\n        'AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC' +\n        'AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3' +\n        'Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj' +\n        'FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==',\n    );\n    return shadow(this, '_loadTestFont', testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return (\n        (data.charCodeAt(offset) << 24) |\n        (data.charCodeAt(offset + 1) << 16) |\n        (data.charCodeAt(offset + 2) << 8) |\n        (data.charCodeAt(offset + 3) & 0xff)\n      );\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext('2d');\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn('Load test font never loaded.');\n        callback();\n        return;\n      }\n      ctx.font = '30px ' + name;\n      ctx.fillText('.', 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId + 'XXX', i)) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement('div');\n    div.style.visibility = 'hidden';\n    div.style.width = div.style.height = '10px';\n    div.style.position = 'absolute';\n    div.style.top = div.style.left = '0px';\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement('span');\n      span.textContent = 'Hi';\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, { disableFontFace = false, inspectFont = null }) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.disableFontFace = disableFontFace === true;\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight,\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = bytesToString(this.data);\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    let cmds;\n    try {\n      cmds = objs.get(this.loadedName + '_path_' + character);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    if (!Array.isArray(cmds) || cmds.length === 0) {\n      return (this.compiledGlyphs[character] = function (c, size) {});\n    }\n    const commands = [];\n    for (let i = 0, ii = cmds.length; i < ii; ) {\n      switch (cmds[i++]) {\n        case FontRenderOps.BEZIER_CURVE_TO:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push((ctx) => ctx.bezierCurveTo(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.MOVE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push((ctx) => ctx.moveTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.LINE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push((ctx) => ctx.lineTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.QUADRATIC_CURVE_TO:\n          {\n            const [a, b, c, d] = cmds.slice(i, i + 4);\n            commands.push((ctx) => ctx.quadraticCurveTo(a, b, c, d));\n            i += 4;\n          }\n          break;\n        case FontRenderOps.RESTORE:\n          commands.push((ctx) => ctx.restore());\n          break;\n        case FontRenderOps.SAVE:\n          commands.push((ctx) => ctx.save());\n          break;\n        case FontRenderOps.SCALE:\n          assert(commands.length === 2, 'Scale command is only valid at the third position.');\n          break;\n        case FontRenderOps.TRANSFORM:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push((ctx) => ctx.transform(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.TRANSLATE:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push((ctx) => ctx.translate(a, b));\n            i += 2;\n          }\n          break;\n      }\n    }\n    return (this.compiledGlyphs[character] = function glyphDrawer(ctx, size) {\n      commands[0](ctx);\n      commands[1](ctx);\n      ctx.scale(size, -size);\n      for (let i = 2, ii = commands.length; i < ii; i++) {\n        commands[i](ctx);\n      }\n    });\n  }\n} // CONCATENATED MODULE: ./src/display/node_utils.js\n\nif (isNodeJS) {\n  var packageCapability = Promise.withResolvers();\n  var packageMap = null;\n  const loadPackages = async () => {\n    const fs = await import(/*webpackIgnore: true*/ 'fs'),\n      http = await import(/*webpackIgnore: true*/ 'http'),\n      https = await import(/*webpackIgnore: true*/ 'https'),\n      url = await import(/*webpackIgnore: true*/ 'url');\n    let canvas, path2d;\n    return new Map(\n      Object.entries({\n        fs,\n        http,\n        https,\n        url,\n        canvas,\n        path2d,\n      }),\n    );\n  };\n  loadPackages().then(\n    (map) => {\n      packageMap = map;\n      packageCapability.resolve();\n    },\n    (reason) => {\n      warn(`loadPackages: ${reason}`);\n      packageMap = new Map();\n      packageCapability.resolve();\n    },\n  );\n}\nclass NodePackages {\n  static get promise() {\n    return packageCapability.promise;\n  }\n  static get(name) {\n    return packageMap?.get(name);\n  }\n}\nconst node_utils_fetchData = function (url) {\n  const fs = NodePackages.get('fs');\n  return fs.promises.readFile(url).then((data) => new Uint8Array(data));\n};\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const canvas = NodePackages.get('canvas');\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    return node_utils_fetchData(url).then((data) => ({\n      cMapData: data,\n      compressionType,\n    }));\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  _fetchData(url) {\n    return node_utils_fetchData(url);\n  }\n} // CONCATENATED MODULE: ./src/display/pattern_helper.js\n\nconst PathType = {\n  FILL: 'Fill',\n  STROKE: 'Stroke',\n  SHADING: 'Shading',\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  constructor() {\n    if (this.constructor === BaseShadingPattern) {\n      unreachable('Cannot initialize BaseShadingPattern.');\n    }\n  }\n  getPattern() {\n    unreachable('Abstract method `getPattern` called.');\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === 'axial') {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === 'radial') {\n      grad = ctx.createRadialGradient(\n        this._p0[0],\n        this._p0[1],\n        this._r0,\n        this._p1[0],\n        this._p1[1],\n        this._r1,\n      );\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(\n        pathType,\n        getCurrentTransform(ctx),\n      ) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas('pattern', width, height, true);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, 'no-repeat');\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = (car - (car - cbr) * k) | 0;\n      bytes[j++] = (cag - (cag - cbg) * k) | 0;\n      bytes[j++] = (cab - (cab - cbb) * k) | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case 'lattice':\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(\n            data,\n            context,\n            ps[q],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q],\n            cs[q + 1],\n            cs[q + verticesPerRow],\n          );\n          drawTriangle(\n            data,\n            context,\n            ps[q + verticesPerRow + 1],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q + verticesPerRow + 1],\n            cs[q + 1],\n            cs[q + verticesPerRow],\n          );\n        }\n      }\n      break;\n    case 'triangles':\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error('illegal figure');\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[7];\n    this._background = IR[8];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(\n      Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE,\n    );\n    const height = Math.min(\n      Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE,\n    );\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas('mesh', paddedWidth, paddedHeight, false);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY,\n    };\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    let scale;\n    if (pathType === PathType.SHADING) {\n      scale = Util.singularValueDecompose2dScale(getCurrentTransform(ctx));\n    } else {\n      scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n      if (this.matrix) {\n        const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n      }\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(\n      scale,\n      pathType === PathType.SHADING ? null : this._background,\n      owner.cachedCanvases,\n    );\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, 'no-repeat');\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return 'hotpink';\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case 'RadialAxial':\n      return new RadialAxialShadingPattern(IR);\n    case 'Mesh':\n      return new MeshShadingPattern(IR);\n    case 'Dummy':\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2,\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const operatorList = this.operatorList;\n    const bbox = this.bbox;\n    const xstep = this.xstep;\n    const ystep = this.ystep;\n    const paintType = this.paintType;\n    const tilingType = this.tilingType;\n    const color = this.color;\n    const canvasGraphicsFactory = this.canvasGraphicsFactory;\n    info('TilingType: ' + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n    const curMatrixScale = Util.singularValueDecompose2dScale(this.baseTransform);\n    const combinedScale = [matrixScale[0] * curMatrixScale[0], matrixScale[1] * curMatrixScale[1]];\n    const dimx = this.getSizeAndScale(xstep, this.ctx.canvas.width, combinedScale[0]);\n    const dimy = this.getSizeAndScale(ystep, this.ctx.canvas.height, combinedScale[1]);\n    const tmpCanvas = owner.cachedCanvases.getCanvas('pattern', dimx.size, dimy.size, true);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    let adjustedX0 = x0;\n    let adjustedY0 = y0;\n    let adjustedX1 = x1;\n    let adjustedY1 = y1;\n    if (x0 < 0) {\n      adjustedX0 = 0;\n      adjustedX1 += Math.abs(x0);\n    }\n    if (y0 < 0) {\n      adjustedY0 = 0;\n      adjustedY1 += Math.abs(y0);\n    }\n    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: adjustedX0,\n      offsetY: adjustedY0,\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    step = Math.abs(step);\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size,\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx), [x0, y0, x1, y1]);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(\n      1 / temporaryPatternCanvas.scaleX,\n      1 / temporaryPatternCanvas.scaleY,\n    );\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, 'repeat');\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n} // CONCATENATED MODULE: ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false,\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & (1 << (7 - j)) ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos,\n  };\n}\nfunction convertRGBToRGBA({ src, srcPos = 0, dest, destPos = 0, width, height }) {\n  let i = 0;\n  const len32 = src.length >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = (s1 >>> 24) | (s2 << 8) | 0xff000000;\n      dest[destPos + 2] = (s2 >>> 16) | (s3 << 16) | 0xff000000;\n      dest[destPos + 3] = (s3 >>> 8) | 0xff000000;\n    }\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] = src[j] | (src[j + 1] << 8) | (src[j + 2] << 16) | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = (s1 << 24) | (s2 >>> 8) | 0xff;\n      dest[destPos + 2] = (s2 << 16) | (s3 >>> 16) | 0xff;\n      dest[destPos + 3] = (s3 << 8) | 0xff;\n    }\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] = (src[j] << 24) | (src[j + 1] << 16) | (src[j + 2] << 8) | 0xff;\n    }\n  }\n  return {\n    srcPos,\n    destPos,\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x10101) | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x1010100) | 0x000000ff;\n    }\n  }\n} // CONCATENATED MODULE: ./src/display/canvas.js\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst MAX_SIZE_TO_COMPILE = 1000;\nconst FULL_CHUNK_HEIGHT = 16;\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error('Context is already forwarding operations.');\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function ctxSave() {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function ctxRestore() {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function ctxTranslate(x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function ctxScale(x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function ctxResetTransform() {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function ctxRotate(angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function ctxRotate(rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nfunction compileType3Glyph(imgData) {\n  const { width, height } = imgData;\n  if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {\n    return null;\n  }\n  const POINT_TO_PROCESS_LIMIT = 1000;\n  const POINT_TYPES = new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);\n  const width1 = width + 1;\n  let points = new Uint8Array(width1 * (height + 1));\n  let i, j, j0;\n  const lineSize = (width + 7) & ~7;\n  let data = new Uint8Array(lineSize * height),\n    pos = 0;\n  for (const elem of imgData.data) {\n    let mask = 128;\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n  let count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) + (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  const path = new Path2D();\n  for (i = 0; count && i <= height; i++) {\n    let p = i * width1;\n    const end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    path.moveTo(p % width1, i);\n    const p0 = p;\n    let type = points[p];\n    do {\n      const step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n      const pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        type = pp;\n        points[p] = 0;\n      } else {\n        type = pp & ((0x33 * type) >> 4);\n        points[p] &= (type >> 2) | (type << 2);\n      }\n      path.lineTo(p % width1, (p / width1) | 0);\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n    --i;\n  }\n  data = null;\n  points = null;\n  const drawOutline = function (c) {\n    c.save();\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.fill(path);\n    c.beginPath();\n    c.restore();\n  };\n  return drawOutline;\n}\nclass CanvasExtraState {\n  constructor(width, height) {\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    this.x = 0;\n    this.y = 0;\n    this.lineX = 0;\n    this.lineY = 0;\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    this.fillColor = '#000000';\n    this.strokeColor = '#000000';\n    this.patternFill = false;\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.transferMaps = 'none';\n    this.startNewPathAndClipBox([0, 0, width, height]);\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    return clone;\n  }\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  updatePathMinMax(transform, x, y) {\n    [x, y] = Util.applyTransform([x, y], transform);\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n  updateRectMinMax(transform, rect) {\n    const p1 = Util.applyTransform(rect, transform);\n    const p2 = Util.applyTransform(rect.slice(2), transform);\n    const p3 = Util.applyTransform([rect[0], rect[3]], transform);\n    const p4 = Util.applyTransform([rect[2], rect[1]], transform);\n    this.minX = Math.min(this.minX, p1[0], p2[0], p3[0], p4[0]);\n    this.minY = Math.min(this.minY, p1[1], p2[1], p3[1], p4[1]);\n    this.maxX = Math.max(this.maxX, p1[0], p2[0], p3[0], p4[0]);\n    this.maxY = Math.max(this.maxY, p1[1], p2[1], p3[1], p4[1]);\n  }\n  updateScalingPathMinMax(transform, minMax) {\n    Util.scaleMinMax(transform, minMax);\n    this.minX = Math.min(this.minX, minMax[0]);\n    this.minY = Math.min(this.minY, minMax[1]);\n    this.maxX = Math.max(this.maxX, minMax[2]);\n    this.maxY = Math.max(this.maxY, minMax[3]);\n  }\n  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    const box = Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax);\n    if (minMax) {\n      return;\n    }\n    this.updateRectMinMax(transform, box);\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = [this.minX, this.minY, this.maxX, this.maxY];\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable('Stroke bounding box must include transform.');\n      }\n      const scale = Util.singularValueDecompose2dScale(transform);\n      const xStrokePad = (scale[0] * this.lineWidth) / 2;\n      const yStrokePad = (scale[1] * this.lineWidth) / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minX === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox = box;\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = 0;\n    this.maxY = 0;\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (typeof ImageData !== 'undefined' && imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = (width + 7) >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--; ) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({ srcPos } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0,\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\n    'strokeStyle',\n    'fillStyle',\n    'fillRule',\n    'globalAlpha',\n    'lineWidth',\n    'lineCap',\n    'lineJoin',\n    'miterLimit',\n    'globalCompositeOperation',\n    'font',\n    'filter',\n  ];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = '#000000';\n  ctx.fillRule = 'nonzero';\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = 'butt';\n  ctx.lineJoin = 'miter';\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = 'source-over';\n  ctx.font = '10px sans-serif';\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  if (!isNodeJS) {\n    const { filter } = ctx;\n    if (filter !== 'none' && filter !== '') {\n      ctx.filter = 'none';\n    }\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  const scale = Util.singularValueDecompose2dScale(transform);\n  scale[0] = Math.fround(scale[0]);\n  scale[1] = Math.fround(scale[1]);\n  const actualScale = Math.fround(\n    (globalThis.devicePixelRatio || 1) * PixelsPerInch.PDF_TO_CSS_UNITS,\n  );\n  return scale[0] <= actualScale && scale[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = ['butt', 'round', 'square'];\nconst LINE_JOIN_STYLES = ['miter', 'round', 'bevel'];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(\n    canvasCtx,\n    commonObjs,\n    objs,\n    canvasFactory,\n    filterFactory,\n    { optionalContentConfig, markedContentStack = null },\n    annotationCanvasMap,\n    pageColors,\n  ) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.processingType3 = null;\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === 'string') {\n      return data.startsWith('g_') ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({ transform, viewport, transparency = false, background = null }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || '#ffffff';\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas('transparent', width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations =\n      argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === 'function';\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith('g_') ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== 'undefined' && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(\n        this.pageColors.foreground,\n        this.pageColors.background,\n      );\n      if (hcmFilterId !== 'none') {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width;\n    const height = img.height;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = 'prescale1';\n    let tmpCanvas, tmpCtx;\n    while ((widthScale > 2 && paintWidth > 1) || (heightScale > 2 && paintHeight > 1)) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth =\n          paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight =\n          paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === 'prescale1' ? 'prescale2' : 'prescale1';\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight,\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const { width, height } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(\n        isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor],\n      );\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(\n          Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4],\n        );\n        const offsetY = Math.round(\n          Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5],\n        );\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY,\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas('maskCanvas', width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const [minX, minY, maxX, maxY] = Util.getAxialAlignedBoundingBox(\n      [0, 0, width, height],\n      maskToCanvas,\n    );\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas('fillCanvas', drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(fillCtx),\n      img.interpolate,\n    );\n    drawImageAtIntegerCoords(\n      fillCtx,\n      scaled,\n      0,\n      0,\n      scaled.width,\n      scaled.height,\n      0,\n      0,\n      width,\n      height,\n    );\n    fillCtx.globalCompositeOperation = 'source-in';\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [\n      1,\n      0,\n      0,\n      1,\n      -offsetX,\n      -offsetY,\n    ]);\n    fillCtx.fillStyle = isPatternFill\n      ? fillColor.getPattern(ctx, this, inverse, PathType.FILL)\n      : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete('fillCanvas');\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY),\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case 'LW':\n          this.setLineWidth(value);\n          break;\n        case 'LC':\n          this.setLineCap(value);\n          break;\n        case 'LJ':\n          this.setLineJoin(value);\n          break;\n        case 'ML':\n          this.setMiterLimit(value);\n          break;\n        case 'D':\n          this.setDash(value[0], value[1]);\n          break;\n        case 'RI':\n          this.setRenderingIntent(value);\n          break;\n        case 'FL':\n          this.setFlatness(value);\n          break;\n        case 'Font':\n          this.setFont(value[0], value[1]);\n          break;\n        case 'CA':\n          this.current.strokeAlpha = value;\n          break;\n        case 'ca':\n          this.current.fillAlpha = value;\n          this.ctx.globalAlpha = value;\n          break;\n        case 'BM':\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case 'SMask':\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case 'TR':\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error('beginSMaskMode called while already in smask mode');\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = 'smaskGroupAt' + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    this.ctx = scratchCanvas.context;\n    const ctx = this.ctx;\n    ctx.setTransform(...getCurrentTransform(this.suspendedCtx));\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([\n      ['BM', 'source-over'],\n      ['ca', 1],\n      ['CA', 1],\n    ]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error('endSMaskMode called while not in smask mode');\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(\n      smask.context,\n      layerCtx,\n      layerWidth,\n      layerHeight,\n      smask.subtype,\n      smask.backdrop,\n      smask.transferMap,\n      layerOffsetX,\n      layerOffsetY,\n      smask.offsetX,\n      smask.offsetY,\n    );\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = 'source-over';\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(\n    maskCtx,\n    layerCtx,\n    width,\n    height,\n    subtype,\n    backdrop,\n    transferMap,\n    layerOffsetX,\n    layerOffsetY,\n    maskOffsetX,\n    maskOffsetY,\n  ) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (\n        maskX < 0 ||\n        maskY < 0 ||\n        maskX + width > maskCanvas.width ||\n        maskY + height > maskCanvas.height\n      ) {\n        const canvas = this.cachedCanvases.getCanvas('maskExtension', width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        if (backdrop.some((c) => c !== 0)) {\n          ctx.globalCompositeOperation = 'destination-atop';\n          ctx.fillStyle = Util.makeHexColor(...backdrop);\n          ctx.fillRect(0, 0, width, height);\n          ctx.globalCompositeOperation = 'source-over';\n        }\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else if (backdrop.some((c) => c !== 0)) {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = 'destination-atop';\n        maskCtx.fillStyle = Util.makeHexColor(...backdrop);\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === 'Alpha' && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === 'Luminosity') {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = 'destination-in';\n    layerCtx.drawImage(\n      maskCanvas,\n      maskX,\n      maskY,\n      width,\n      height,\n      layerOffsetX,\n      layerOffsetY,\n      width,\n      height,\n    );\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n      this.suspendedCtx.save();\n    } else {\n      this.ctx.save();\n    }\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0 && this.inSMaskMode) {\n      this.endSMaskMode();\n    }\n    if (this.stateStack.length !== 0) {\n      this.current = this.stateStack.pop();\n      if (this.inSMaskMode) {\n        this.suspendedCtx.restore();\n        copyCtxState(this.suspendedCtx, this.ctx);\n      } else {\n        this.ctx.restore();\n      }\n      this.checkSMaskState();\n      this.pendingClip = null;\n      this._cachedScaleForStroking[0] = -1;\n      this._cachedGetSinglePixelWidth = null;\n    }\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(ops, args, minMax) {\n    const ctx = this.ctx;\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let startX, startY;\n    const currentTransform = getCurrentTransform(ctx);\n    const isScalingMatrix =\n      (currentTransform[0] === 0 && currentTransform[3] === 0) ||\n      (currentTransform[1] === 0 && currentTransform[2] === 0);\n    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n      switch (ops[i] | 0) {\n        case OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n          const xw = x + width;\n          const yh = y + height;\n          ctx.moveTo(x, y);\n          if (width === 0 || height === 0) {\n            ctx.lineTo(xw, yh);\n          } else {\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n          }\n          if (!isScalingMatrix) {\n            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n          }\n          ctx.closePath();\n          break;\n        case OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.moveTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.lineTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.curveTo:\n          startX = x;\n          startY = y;\n          x = args[j + 4];\n          y = args[j + 5];\n          ctx.bezierCurveTo(args[j], args[j + 1], args[j + 2], args[j + 3], x, y);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y,\n            minMaxForBezier,\n          );\n          j += 6;\n          break;\n        case OPS.curveTo2:\n          startX = x;\n          startY = y;\n          ctx.bezierCurveTo(x, y, args[j], args[j + 1], args[j + 2], args[j + 3]);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            minMaxForBezier,\n          );\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case OPS.curveTo3:\n          startX = x;\n          startY = y;\n          x = args[j + 2];\n          y = args[j + 3];\n          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            x,\n            y,\n            x,\n            y,\n            minMaxForBezier,\n          );\n          j += 4;\n          break;\n        case OPS.closePath:\n          ctx.closePath();\n          break;\n      }\n    }\n    if (isScalingMatrix) {\n      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n    }\n    current.setCurrentPoint(x, y);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === 'object' && strokeColor?.getPattern) {\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(\n          ctx,\n          this,\n          getCurrentTransformInverse(ctx),\n          PathType.STROKE,\n        );\n        this.rescaleAndStroke(false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(this.current.getClippedPathBoundingBox());\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n  fill(consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL,\n      );\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill('evenodd');\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(intersect);\n    }\n  }\n  eoFill() {\n    this.pendingEOFill = true;\n    this.fill();\n  }\n  fillStroke() {\n    this.fill(false);\n    this.stroke(false);\n    this.consumePath();\n  }\n  eoFillStroke() {\n    this.pendingEOFill = true;\n    this.fillStroke();\n  }\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n  closeEOFillStroke() {\n    this.pendingEOFill = true;\n    this.closePath();\n    this.fillStroke();\n  }\n  endPath() {\n    this.consumePath();\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = IDENTITY_MATRIX;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      ctx.beginPath();\n      return;\n    }\n    ctx.save();\n    ctx.beginPath();\n    for (const path of paths) {\n      ctx.setTransform(...path.transform);\n      ctx.translate(path.x, path.y);\n      path.addToPath(ctx, path.fontSize);\n    }\n    ctx.restore();\n    ctx.clip();\n    ctx.beginPath();\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn('Invalid font matrix for font ' + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || 'sans-serif';\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = 'normal';\n    if (fontObj.black) {\n      bold = '900';\n    } else if (fontObj.bold) {\n      bold = 'bold';\n    }\n    const italic = fontObj.italic ? 'italic' : 'normal';\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(a, b, c, d, e, f) {\n    this.current.textMatrix = [a, b, c, d, e, f];\n    this.current.textMatrixScale = Math.hypot(a, b);\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  paintChar(character, x, y, patternTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    let addToPath;\n    if (font.disableFontFace || isAddToPathSet || patternFill) {\n      addToPath = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      addToPath(ctx, fontSize);\n      if (patternTransform) {\n        ctx.setTransform(...patternTransform);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fill();\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.stroke();\n      }\n      ctx.restore();\n    } else {\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fillText(character, x, y);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = (this.pendingTextPaths ||= []);\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        addToPath,\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const { context: ctx } = this.cachedCanvases.getCanvas('isFontSubpixelAAEnabled', 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText('I', 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, 'isFontSubpixelAAEnabled', enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText =\n      current.textRenderingMode === TextRenderingMode.FILL &&\n      !font.disableFontFace &&\n      !current.patternFill;\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL,\n      );\n      patternTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(''), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === 'number') {\n        x += (spacingDir * glyph * fontSize) / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth =\n          ((ctx.measureText(character).width * 1000) / fontSize) * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (((width - measuredWidth) / 2000) * fontSize) / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + (fontSize * accent.offset.x) / fontSizeScale;\n            const scaledAccentY = scaledY - (fontSize * accent.offset.y) / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternTransform);\n          }\n        }\n      }\n      const charWidth = vertical\n        ? width * widthAdvanceScale - spacing * fontDirection\n        : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === 'number') {\n        spacingLength = (spacingDir * glyph * fontSize) / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n        continue;\n      }\n      if (this.contentVisible) {\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n      width = transformed[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    this.processingType3 = null;\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    this.ctx.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip();\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === 'TilingPattern') {\n      const color = IR[1];\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: (ctx) =>\n          new CanvasGraphics(\n            ctx,\n            this.commonObjs,\n            this.objs,\n            this.canvasFactory,\n            this.filterFactory,\n            {\n              optionalContentConfig: this.optionalContentConfig,\n              markedContentStack: this.markedContentStack,\n            },\n          ),\n      };\n      pattern = new TilingPattern(IR, color, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.strokeStyle = color;\n    this.current.strokeColor = color;\n  }\n  setFillRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.fillStyle = color;\n    this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(\n      ctx,\n      this,\n      getCurrentTransformInverse(ctx),\n      PathType.SHADING,\n    );\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const { width, height } = ctx.canvas;\n      const [x0, y0, x1, y1] = Util.getAxialAlignedBoundingBox([0, 0, width, height], inv);\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable('Should not call beginInlineImage');\n  }\n  beginImageData() {\n    unreachable('Should not call beginImageData');\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      this.ctx.rect(bbox[0], bbox[1], width, height);\n      this.current.updateRectMinMax(getCurrentTransform(this.ctx), bbox);\n      this.clip();\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info('TODO: Support non-isolated groups.');\n    }\n    if (group.knockout) {\n      warn('Knockout groups not supported.');\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error('Bounding box is required.');\n    }\n    let bounds = Util.getAxialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx));\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = 'groupAt' + this.groupLevel;\n    if (group.smask) {\n      cacheId += '_smask_' + (this.smaskCounter++ % 2);\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null,\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([\n      ['BM', 'source-over'],\n      ['ca', 1],\n      ['CA', 1],\n    ]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = Util.getAxialAlignedBoundingBox(\n        [0, 0, groupCtx.canvas.width, groupCtx.canvas.height],\n        currentMtx,\n      );\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        const [scaleX, scaleY] = Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx));\n        const { viewportScale } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const { canvas, context } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.ctx.clip();\n        this.endPath();\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const glyph = this.processingType3;\n    if (glyph) {\n      if (glyph.compiled === undefined) {\n        glyph.compiled = compileType3Glyph(img);\n      }\n      if (glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n    }\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(\n      1,\n      0,\n      0,\n      1,\n      mask.offsetX - currentTransform[4],\n      mask.offsetY - currentTransform[5],\n    );\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [\n        scaleX,\n        skewX,\n        skewY,\n        scaleY,\n        positions[i],\n        positions[i + 1],\n      ]);\n      const [x, y] = Util.applyTransform([0, 0], trans);\n      ctx.drawImage(mask.canvas, x, y);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const { data, width, height, transform } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas('maskCanvas', width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = 'source-in';\n      maskCtx.fillStyle = isPatternFill\n        ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL)\n        : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height,\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== 'none') {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = 'none';\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === 'none') {\n      return imgData.bitmap;\n    }\n    const { bitmap, width, height } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas('inlineImage', width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = 'none';\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    if (!isNodeJS) {\n      const { filter } = ctx;\n      if (filter !== 'none' && filter !== '') {\n        ctx.filter = 'none';\n      }\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (\n      (typeof HTMLElement === 'function' && imgData instanceof HTMLElement) ||\n      !imgData.data\n    ) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas('inlineImage', width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(ctx),\n      imgData.interpolate,\n    );\n    drawImageAtIntegerCoords(\n      ctx,\n      scaled.img,\n      0,\n      0,\n      scaled.paintWidth,\n      scaled.paintHeight,\n      0,\n      -height,\n      width,\n      height,\n    );\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas('inlineImage', w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true,\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === 'OC') {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties),\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true,\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip('evenodd');\n        } else {\n          ctx.clip();\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n    ctx.beginPath();\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const { lineWidth } = this.current;\n      const { a, b, c, d } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(saveRestore) {\n    const { ctx } = this;\n    const { lineWidth } = this.current;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    ctx.lineWidth = lineWidth || 1;\n    if (scaleX === 1 && scaleY === 1) {\n      ctx.stroke();\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map((x) => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.stroke();\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n} // CONCATENATED MODULE: ./src/display/worker_options.js\n\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = '';\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== 'undefined' && val instanceof Worker) && val !== null) {\n      throw new Error('Invalid `workerPort` type.');\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== 'string') {\n      throw new Error('Invalid `workerSrc` type.');\n    }\n    this.#src = val;\n  }\n} // CONCATENATED MODULE: ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2,\n};\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8,\n};\nfunction wrapReason(reason) {\n  if (!(reason instanceof Error || (typeof reason === 'object' && reason !== null))) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (reason.name) {\n    case 'AbortException':\n      return new AbortException(reason.message);\n    case 'MissingPDFException':\n      return new MissingPDFException(reason.message);\n    case 'PasswordException':\n      return new PasswordException(reason.message, reason.code);\n    case 'UnexpectedResponseException':\n      return new UnexpectedResponseException(reason.message, reason.status);\n    case 'UnknownErrorException':\n      return new UnknownErrorException(reason.message, reason.details);\n    default:\n      return new UnknownErrorException(reason.message, reason.toString());\n  }\n}\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    this._onComObjOnMessage = (event) => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this.#processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error('Unexpected callback case');\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(\n          function (result) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.DATA,\n              callbackId: data.callbackId,\n              data: result,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.ERROR,\n              callbackId: data.callbackId,\n              reason: wrapReason(reason),\n            });\n          },\n        );\n        return;\n      }\n      if (data.streamId) {\n        this.#createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener('message', this._onComObjOnMessage);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage(\n      {\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        data,\n      },\n      transfers,\n    );\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage(\n        {\n          sourceName: this.sourceName,\n          targetName: this.targetName,\n          action: actionName,\n          callbackId,\n          data,\n        },\n        transfers,\n      );\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream(\n      {\n        start: (controller) => {\n          const startCapability = Promise.withResolvers();\n          this.streamControllers[streamId] = {\n            controller,\n            startCall: startCapability,\n            pullCall: null,\n            cancelCall: null,\n            isClosed: false,\n          };\n          comObj.postMessage(\n            {\n              sourceName,\n              targetName,\n              action: actionName,\n              streamId,\n              data,\n              desiredSize: controller.desiredSize,\n            },\n            transfers,\n          );\n          return startCapability.promise;\n        },\n        pull: (controller) => {\n          const pullCapability = Promise.withResolvers();\n          this.streamControllers[streamId].pullCall = pullCapability;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL,\n            streamId,\n            desiredSize: controller.desiredSize,\n          });\n          return pullCapability.promise;\n        },\n        cancel: (reason) => {\n          assert(reason instanceof Error, 'cancel must have a valid reason');\n          const cancelCapability = Promise.withResolvers();\n          this.streamControllers[streamId].cancelCall = cancelCapability;\n          this.streamControllers[streamId].isClosed = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL,\n            streamId,\n            reason: wrapReason(reason),\n          });\n          return cancelCapability.promise;\n        },\n      },\n      queueingStrategy,\n    );\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage(\n          {\n            sourceName,\n            targetName,\n            stream: StreamKind.ENQUEUE,\n            streamId,\n            chunk,\n          },\n          transfers,\n        );\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId,\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, 'error must have a valid reason');\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null,\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(\n      function () {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          success: true,\n        });\n      },\n      function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n    );\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true,\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        new Promise(function (resolve) {\n          resolve(streamSink.onPull?.());\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          },\n        );\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, 'enqueue should have stream controller');\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, 'close should have stream controller');\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, 'error should have stream controller');\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        new Promise(function (resolve) {\n          resolve(streamSink.onCancel?.(wrapReason(data.reason)));\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          },\n        );\n        streamSink.sinkCapability.reject(wrapReason(data.reason));\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error('Unexpected stream case');\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([\n      streamController.startCall?.promise,\n      streamController.pullCall?.promise,\n      streamController.cancelCall?.promise,\n    ]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.comObj.removeEventListener('message', this._onComObjOnMessage);\n  }\n} // CONCATENATED MODULE: ./src/display/metadata.js\n\nclass Metadata {\n  #metadataMap;\n  #data;\n  constructor({ parsedData, rawData }) {\n    this.#metadataMap = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#metadataMap.get(name) ?? null;\n  }\n  getAll() {\n    return objectFromMap(this.#metadataMap);\n  }\n  has(name) {\n    return this.#metadataMap.has(name);\n  }\n} // CONCATENATED MODULE: ./src/display/optional_content_config.js\n\nconst INTERNAL = Symbol('INTERNAL');\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, { name, intent, usage }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const { print, view } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== 'OFF';\n    } else if (this.#isPrint) {\n      return print?.printState !== 'OFF';\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable('Internal method `_setVisible` called.');\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === 'OFF') {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case 'And':\n          if (!state) {\n            return false;\n          }\n          break;\n        case 'Or':\n          if (state) {\n            return true;\n          }\n          break;\n        case 'Not':\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === 'And';\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info('Optional content group not defined.');\n      return true;\n    }\n    if (group.type === 'OCG') {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === 'OCMD') {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === 'AnyOn') {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === 'AllOn') {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === 'AnyOff') {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === 'AllOff') {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({ state, preserveRB }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case 'ON':\n        case 'OFF':\n        case 'Toggle':\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case 'ON':\n          group._setVisible(INTERNAL, true);\n          break;\n        case 'OFF':\n          group._setVisible(INTERNAL, false);\n          break;\n        case 'Toggle':\n          group._setVisible(INTERNAL, !group.visible);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroups() {\n    return this.#groups.size > 0 ? objectFromMap(this.#groups) : null;\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return (this.#cachedGetHash = hash.hexdigest());\n  }\n} // CONCATENATED MODULE: ./src/display/transport_stream.js\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, { disableRange = false, disableStream = false }) {\n    assert(\n      pdfDataRangeTransport,\n      'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.',\n    );\n    const { length, initialData, progressiveDone, contentDispositionFilename } =\n      pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer =\n        initialData instanceof Uint8Array &&\n        initialData.byteLength === initialData.buffer.byteLength\n          ? initialData.buffer\n          : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk,\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total,\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener((chunk) => {\n      this._onReceiveData({\n        chunk,\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({ begin, chunk }) {\n    const buffer =\n      chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength\n        ? chunk.buffer\n        : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, '_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.');\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded,\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total,\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      'PDFDataTransportStream.getFullReader can only be called once.',\n    );\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(\n      this,\n      queuedChunks,\n      this._progressiveDone,\n      this._contentDispositionFilename,\n    );\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false,\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false,\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false,\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true,\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false,\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n} // CONCATENATED MODULE: ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp('filename\\\\*', 'i').exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp('filename', 'i').exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\n      '(?:^|;)\\\\s*' +\n        attributePattern +\n        '\\\\s*=\\\\s*' +\n        '(' +\n        '[^\";\\\\s][^;\\\\s]*' +\n        '|' +\n        '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' +\n        ')',\n      flags,\n    );\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true,\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode('utf-8', value);\n      if (needsEncodingFixup) {\n        value = textdecode('iso-8859-1', value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp('filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)', 'ig');\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join('');\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, '$1');\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, '');\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith('=?') || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(\n      /=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,\n      function (matches, charset, encoding, text) {\n        if (encoding === 'q' || encoding === 'Q') {\n          text = text.replaceAll('_', ' ');\n          text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n            return String.fromCharCode(parseInt(hex, 16));\n          });\n          return textdecode(charset, text);\n        }\n        try {\n          text = atob(text);\n        } catch {}\n        return textdecode(charset, text);\n      },\n    );\n  }\n  return '';\n} // CONCATENATED MODULE: ./src/display/network_utils.js\n\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange,\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined,\n  };\n  const length = parseInt(getResponseHeader('Content-Length'), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader('Accept-Ranges') !== 'bytes') {\n    return returnValues;\n  }\n  const contentEncoding = getResponseHeader('Content-Encoding') || 'identity';\n  if (contentEncoding !== 'identity') {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader('Content-Disposition');\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes('%')) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || (status === 0 && url.startsWith('file:'))) {\n    return new MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new UnexpectedResponseException(\n    `Unexpected server response (${status}) while retrieving PDF \"${url}\".`,\n    status,\n  );\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n} // CONCATENATED MODULE: ./src/display/fetch_stream.js\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: 'GET',\n    headers,\n    signal: abortController.signal,\n    mode: 'cors',\n    credentials: withCredentials ? 'include' : 'same-origin',\n    redirect: 'follow',\n  };\n}\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (value === undefined) {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, 'PDFFetchStream.getFullReader can only be called once.');\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._headers = createHeaders(this._stream.httpHeaders);\n    const url = source.url;\n    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController))\n      .then((response) => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._reader = response.body.getReader();\n        this._headersCapability.resolve();\n        const getResponseHeader = (name) => response.headers.get(name);\n        const { allowRangeRequests, suggestedLength } = validateRangeRequestCapabilities({\n          getResponseHeader,\n          isHttp: this._stream.isHttp,\n          rangeChunkSize: this._rangeChunkSize,\n          disableRange: this._disableRange,\n        });\n        this._isRangeSupported = allowRangeRequests;\n        this._contentLength = suggestedLength || this._contentLength;\n        this._filename = extractFilenameFromHeader(getResponseHeader);\n        if (!this._isStreamingSupported && this._isRangeSupported) {\n          this.cancel(new AbortException('Streaming is disabled.'));\n        }\n      })\n      .catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done,\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false,\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append('Range', `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController))\n      .then((response) => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._readCapability.resolve();\n        this._reader = response.body.getReader();\n      })\n      .catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done,\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false,\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n} // CONCATENATED MODULE: ./src/display/network.js\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== 'string') {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  constructor(url, args = {}) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = (this.isHttp && args.httpHeaders) || Object.create(null);\n    this.withCredentials = args.withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end,\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = (this.pendingRequests[xhrId] = {\n      xhr,\n    });\n    xhr.open('GET', this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && 'begin' in args && 'end' in args) {\n      xhr.setRequestHeader('Range', `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = 'arraybuffer';\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request =\n      xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader('Content-Range');\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk,\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk,\n      });\n    } else {\n      pendingRequest.onError?.(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials,\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, 'PDFNetworkStream.getFullReader can only be called once.');\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    const getResponseHeader = (name) => fullRequestXhr.getResponseHeader(name);\n    const { allowRangeRequests, suggestedLength } = validateRangeRequestCapabilities({\n      getResponseHeader,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange,\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(getResponseHeader);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersReceivedCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false,\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    this._headersReceivedCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength,\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false,\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    const args = {\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = manager.url;\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false,\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded,\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false,\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n} // CONCATENATED MODULE: ./src/display/node_stream.js\n\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\nfunction parseUrl(sourceUrl) {\n  const url = NodePackages.get('url');\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === 'file:' || parsedUrl.host) {\n    return parsedUrl;\n  }\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = 'file:';\n  }\n  return parsedUrl;\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp = this.url.protocol === 'http:' || this.url.protocol === 'https:';\n    this.isFsUrl = this.url.protocol === 'file:';\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, 'PDFNodeStream.getFullReader can only be called once.');\n    this._fullRequestReader = this.isFsUrl\n      ? new PDFNodeStreamFsFullReader(this)\n      : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl\n      ? new PDFNodeStreamFsRangeReader(this, start, end)\n      : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false,\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on('readable', () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on('end', () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on('error', (reason) => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException('streaming is disabled'));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false,\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on('readable', () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on('end', () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on('error', (reason) => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: 'GET',\n    headers,\n  };\n}\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n    const handleResponse = (response) => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n      const getResponseHeader = (name) => this._readableStream.headers[name.toLowerCase()];\n      const { allowRangeRequests, suggestedLength } = validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange,\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n    };\n    this._request = null;\n    if (this._url.protocol === 'http:') {\n      const http = NodePackages.get('http');\n      this._request = http.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse,\n      );\n    } else {\n      const https = NodePackages.get('https');\n      this._request = https.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse,\n      );\n    }\n    this._request.on('error', (reason) => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    this._request.end();\n  }\n}\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n    const handleResponse = (response) => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n    this._request = null;\n    if (this._url.protocol === 'http:') {\n      const http = NodePackages.get('http');\n      this._request = http.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse,\n      );\n    } else {\n      const https = NodePackages.get('https');\n      this._request = https.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse,\n      );\n    }\n    this._request.on('error', (reason) => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n    let path = decodeURIComponent(this._url.path);\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, '');\n    }\n    const fs = NodePackages.get('fs');\n    fs.promises.lstat(path).then(\n      (stat) => {\n        this._contentLength = stat.size;\n        this._setReadableStream(fs.createReadStream(path));\n        this._headersCapability.resolve();\n      },\n      (error) => {\n        if (error.code === 'ENOENT') {\n          error = new MissingPDFException(`Missing PDF \"${path}\".`);\n        }\n        this._storedError = error;\n        this._headersCapability.reject(error);\n      },\n    );\n  }\n}\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n    let path = decodeURIComponent(this._url.path);\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, '');\n    }\n    const fs = NodePackages.get('fs');\n    this._setReadableStream(\n      fs.createReadStream(path, {\n        start,\n        end: end - 1,\n      }),\n    );\n  }\n} // CONCATENATED MODULE: ./src/display/text_layer.js\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nconst DEFAULT_FONT_ASCENT = 0.8;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #pendingTextLayers = new Set();\n  constructor({ textContentSource, container, viewport }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === 'object') {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        },\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      properties: null,\n      ctx: null,\n    };\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    setLayerDimensions(container, viewport);\n    TextLayer.#pendingTextLayers.add(this);\n    this.#capability.promise\n      .catch(() => {})\n      .then(() => {\n        TextLayer.#pendingTextLayers.delete(this);\n        this.#layoutTextParams = null;\n        this.#styleCache = null;\n      });\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({ value, done }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    pump();\n    return this.#capability.promise;\n  }\n  update({ viewport, onBefore = null }) {\n    const scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation,\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        prevFontSize: null,\n        prevFontFamily: null,\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang),\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException('TextLayer task cancelled.');\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ||= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn('Ignoring additional textDivs for performance reasons.');\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === 'beginMarkedContentProps' || item.type === 'beginMarkedContent') {\n          const parent = this.#container;\n          this.#container = document.createElement('span');\n          this.#container.classList.add('markedContent');\n          if (item.id !== null) {\n            this.#container.setAttribute('id', `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === 'endMarkedContent') {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement('span');\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== '',\n      hasEOL: geom.hasEOL,\n      fontSize: 0,\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    const fontFamily = (this.#fontInspectorEnabled && style.fontSubstitution) || style.fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = 'calc(var(--scale-factor)*';\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${((100 * left) / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${((100 * top) / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${fontHeight.toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute('role', 'presentation');\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== ' ' && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (\n        absScaleX !== absScaleY &&\n        Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5\n      ) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement('br');\n      br.setAttribute('role', 'presentation');\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const { div, properties, ctx, prevFontSize, prevFontFamily } = params;\n    const { style } = div;\n    let transform = '';\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const { fontFamily } = style;\n      const { canvasWidth, fontSize } = properties;\n      if (prevFontSize !== fontSize || prevFontFamily !== fontFamily) {\n        ctx.font = `${fontSize * this.#scale}px ${fontFamily}`;\n        params.prevFontSize = fontSize;\n        params.prevFontFamily = fontFamily;\n      }\n      const { width } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${(canvasWidth * this.#scale) / width})`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const { canvas } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let canvasContext = this.#canvasContexts.get((lang ||= ''));\n    if (!canvasContext) {\n      const canvas = document.createElement('canvas');\n      canvas.className = 'hiddenCanvasElement';\n      canvas.lang = lang;\n      document.body.append(canvas);\n      canvasContext = canvas.getContext('2d', {\n        alpha: false,\n      });\n      this.#canvasContexts.set(lang, canvasContext);\n    }\n    return canvasContext;\n  }\n  static #getAscent(fontFamily, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    const savedFont = ctx.font;\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;\n    const metrics = ctx.measureText('');\n    let ascent = metrics.fontBoundingBoxAscent;\n    let descent = Math.abs(metrics.fontBoundingBoxDescent);\n    if (ascent) {\n      const ratio = ascent / (ascent + descent);\n      this.#ascentCache.set(fontFamily, ratio);\n      ctx.canvas.width = ctx.canvas.height = 0;\n      ctx.font = savedFont;\n      return ratio;\n    }\n    ctx.strokeStyle = 'red';\n    ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n    ctx.strokeText('g', 0, 0);\n    let pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n    descent = 0;\n    for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n      if (pixels[i] > 0) {\n        descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n        break;\n      }\n    }\n    ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n    ctx.strokeText('A', 0, DEFAULT_FONT_SIZE);\n    pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n    ascent = 0;\n    for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n      if (pixels[i] > 0) {\n        ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n        break;\n      }\n    }\n    ctx.canvas.width = ctx.canvas.height = 0;\n    ctx.font = savedFont;\n    const ratio = ascent ? ascent / (ascent + descent) : DEFAULT_FONT_ASCENT;\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\nfunction renderTextLayer() {\n  deprecated('`renderTextLayer`, please use `TextLayer` instead.');\n  const { textContentSource, container, viewport, ...rest } = arguments[0];\n  const restKeys = Object.keys(rest);\n  if (restKeys.length > 0) {\n    warn('Ignoring `renderTextLayer` parameters: ' + restKeys.join(', '));\n  }\n  const textLayer = new TextLayer({\n    textContentSource,\n    container,\n    viewport,\n  });\n  const { textDivs, textContentItemsStr } = textLayer;\n  const promise = textLayer.render();\n  return {\n    promise,\n    textDivs,\n    textContentItemsStr,\n  };\n}\nfunction updateTextLayer() {\n  deprecated('`updateTextLayer`, please use `TextLayer` instead.');\n} // CONCATENATED MODULE: ./src/display/xfa_text.js\n\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null),\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === '#text') {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str,\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === 'textarea' || name === 'input' || name === 'option' || name === 'select');\n  }\n} // CONCATENATED MODULE: ./src/display/api.js\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536;\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nconst DELAYED_CLEANUP_TIMEOUT = 5000;\nconst DefaultCanvasFactory = isNodeJS ? NodeCanvasFactory : DOMCanvasFactory;\nconst DefaultCMapReaderFactory = isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory;\nconst DefaultFilterFactory = isNodeJS ? NodeFilterFactory : DOMFilterFactory;\nconst DefaultStandardFontDataFactory = isNodeJS\n  ? NodeStandardFontDataFactory\n  : DOMStandardFontDataFactory;\nfunction getDocument(src) {\n  if (typeof src === 'string' || src instanceof URL) {\n    src = {\n      url: src,\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src,\n    };\n  }\n  if (typeof src !== 'object') {\n    throw new Error('Invalid parameter in getDocument, need parameter object.');\n  }\n  if (!src.url && !src.data && !src.range) {\n    throw new Error('Invalid parameter object: need either .data, .range or .url');\n  }\n  const task = new PDFDocumentLoadingTask();\n  const { docId } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize =\n    Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0\n      ? src.rangeChunkSize\n      : DEFAULT_RANGE_CHUNK_SIZE;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl =\n    typeof src.docBaseUrl === 'string' && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = typeof src.cMapUrl === 'string' ? src.cMapUrl : null;\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || DefaultCMapReaderFactory;\n  const standardFontDataUrl =\n    typeof src.standardFontDataUrl === 'string' ? src.standardFontDataUrl : null;\n  const StandardFontDataFactory = src.StandardFontDataFactory || DefaultStandardFontDataFactory;\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize =\n    Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported =\n    typeof src.isOffscreenCanvasSupported === 'boolean'\n      ? src.isOffscreenCanvasSupported\n      : !isNodeJS;\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes)\n    ? src.canvasMaxAreaInBytes\n    : -1;\n  const disableFontFace = typeof src.disableFontFace === 'boolean' ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const length = rangeTransport ? rangeTransport.length : (src.length ?? NaN);\n  const useSystemFonts =\n    typeof src.useSystemFonts === 'boolean' ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch =\n    typeof src.useWorkerFetch === 'boolean'\n      ? src.useWorkerFetch\n      : CMapReaderFactory === DOMCMapReaderFactory &&\n        StandardFontDataFactory === DOMStandardFontDataFactory &&\n        cMapUrl &&\n        standardFontDataUrl &&\n        isValidFetchUrl(cMapUrl, document.baseURI) &&\n        isValidFetchUrl(standardFontDataUrl, document.baseURI);\n  const canvasFactory =\n    src.canvasFactory ||\n    new DefaultCanvasFactory({\n      ownerDocument,\n    });\n  const filterFactory =\n    src.filterFactory ||\n    new DefaultFilterFactory({\n      docId,\n      ownerDocument,\n    });\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory,\n    filterFactory,\n  };\n  if (!useWorkerFetch) {\n    transportFactory.cMapReaderFactory = new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked,\n    });\n    transportFactory.standardFontDataFactory = new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl,\n    });\n  }\n  if (!worker) {\n    const workerParams = {\n      verbosity,\n      port: GlobalWorkerOptions.workerPort,\n    };\n    worker = workerParams.port ? PDFWorker.fromPort(workerParams) : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: '4.3.99',\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      cMapUrl: useWorkerFetch ? cMapUrl : null,\n      standardFontDataUrl: useWorkerFetch ? standardFontDataUrl : null,\n    },\n  };\n  const transportParams = {\n    disableFontFace,\n    fontExtraProperties,\n    enableXfa,\n    ownerDocument,\n    disableAutoFetch,\n    pdfBug,\n    styleElement,\n  };\n  worker.promise\n    .then(function () {\n      if (task.destroyed) {\n        throw new Error('Loading aborted');\n      }\n      if (worker.destroyed) {\n        throw new Error('Worker was destroyed');\n      }\n      const workerIdPromise = worker.messageHandler.sendWithPromise(\n        'GetDocRequest',\n        docParams,\n        data ? [data.buffer] : null,\n      );\n      let networkStream;\n      if (rangeTransport) {\n        networkStream = new PDFDataTransportStream(rangeTransport, {\n          disableRange,\n          disableStream,\n        });\n      } else if (!data) {\n        const createPDFNetworkStream = (params) => {\n          if (isNodeJS) {\n            const isFetchSupported = function () {\n              return (\n                typeof fetch !== 'undefined' &&\n                typeof Response !== 'undefined' &&\n                'body' in Response.prototype\n              );\n            };\n            return isFetchSupported() && isValidFetchUrl(params.url)\n              ? new PDFFetchStream(params)\n              : new PDFNodeStream(params);\n          }\n          return isValidFetchUrl(params.url)\n            ? new PDFFetchStream(params)\n            : new PDFNetworkStream(params);\n        };\n        networkStream = createPDFNetworkStream({\n          url,\n          length,\n          httpHeaders,\n          withCredentials,\n          rangeChunkSize,\n          disableRange,\n          disableStream,\n        });\n      }\n      return workerIdPromise.then((workerId) => {\n        if (task.destroyed) {\n          throw new Error('Loading aborted');\n        }\n        if (worker.destroyed) {\n          throw new Error('Worker was destroyed');\n        }\n        const messageHandler = new MessageHandler(docId, workerId, worker.port);\n        const transport = new WorkerTransport(\n          messageHandler,\n          task,\n          networkStream,\n          transportParams,\n          transportFactory,\n        );\n        task._transport = transport;\n        messageHandler.send('Ready', null);\n      });\n    })\n    .catch(task._capability.reject);\n  return task;\n}\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  try {\n    return new URL(val, window.location).href;\n  } catch {\n    if (isNodeJS && typeof val === 'string') {\n      return val;\n    }\n  }\n  throw new Error(\n    'Invalid PDF url data: ' + 'either string or URL-object is expected in the url property.',\n  );\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== 'undefined' && val instanceof Buffer) {\n    throw new Error('Please provide binary data as `Uint8Array`, rather than `Buffer`.');\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === 'string') {\n    return stringToBytes(val);\n  }\n  if (\n    val instanceof ArrayBuffer ||\n    ArrayBuffer.isView(val) ||\n    (typeof val === 'object' && !isNaN(val?.length))\n  ) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\n    'Invalid PDF binary data: either TypedArray, ' +\n      'string, or array-like object is expected in the data property.',\n  );\n}\nfunction isRefProxy(ref) {\n  return (\n    typeof ref === 'object' &&\n    Number.isInteger(ref?.num) &&\n    ref.num >= 0 &&\n    Number.isInteger(ref?.gen) &&\n    ref.gen >= 0\n  );\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  constructor() {\n    this._capability = Promise.withResolvers();\n    this._transport = null;\n    this._worker = null;\n    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;\n    this.destroyed = false;\n    this.onPassword = null;\n    this.onProgress = null;\n  }\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    if (this._worker) {\n      this._worker.destroy();\n      this._worker = null;\n    }\n  }\n}\nclass PDFDataRangeTransport {\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = Promise.withResolvers();\n  }\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable('Abstract method PDFDataRangeTransport.requestDataRange');\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, 'isPureXfa', !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({ intent = 'display' } = {}) {\n    const { renderingIntent } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #delayedCleanupTimeout = null;\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._maybeCleanupAfterRender = false;\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({ scale, rotation = this.rotate, offsetX = 0, offsetY = 0, dontFlip = false } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n  getAnnotations({ intent = 'display' } = {}) {\n    const { renderingIntent } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, 'isPureXfa', !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = 'display',\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n  }) {\n    this._stats?.time('Overall');\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage,\n    );\n    const { renderingIntent, cacheKey } = intentArgs;\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n      this._stats?.time('Page Request');\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = (error) => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (this._maybeCleanupAfterRender || intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup(!intentPrint);\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error),\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd('Rendering');\n        this._stats.timeEnd('Overall');\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background,\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors,\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise])\n      .then(([transparency, optionalContentConfig]) => {\n        if (this.destroyed) {\n          complete();\n          return;\n        }\n        this._stats?.time('Rendering');\n        if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n          throw new Error(\n            'Must use the same `intent`-argument when calling the `PDFPageProxy.render` ' +\n              'and `PDFDocumentProxy.getOptionalContentConfig` methods.',\n          );\n        }\n        internalRenderTask.initializeGraphics({\n          transparency,\n          optionalContentConfig,\n        });\n        internalRenderTask.operatorListChanged();\n      })\n      .catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = 'display',\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage,\n      true,\n    );\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n      this._stats?.time('Page Request');\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({ includeMarkedContent = false, disableNormalization = false } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\n      'GetTextContent',\n      {\n        pageIndex: this._pageIndex,\n        includeMarkedContent: includeMarkedContent === true,\n        disableNormalization: disableNormalization === true,\n      },\n      {\n        highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n        size(textContent) {\n          return textContent.items.length;\n        },\n      },\n    );\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then((xfa) => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({ value, done }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null,\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error('Page was destroyed.'),\n        force: true,\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup(false);\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup(delayed = false) {\n    this.#abortDelayedCleanup();\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    if (delayed) {\n      this.#delayedCleanupTimeout = setTimeout(() => {\n        this.#delayedCleanupTimeout = null;\n        this.#tryCleanup(false);\n      }, DELAYED_CLEANUP_TIMEOUT);\n      return false;\n    }\n    for (const { renderTasks, operatorList } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  #abortDelayedCleanup() {\n    if (this.#delayedCleanupTimeout) {\n      clearTimeout(this.#delayedCleanupTimeout);\n      this.#delayedCleanupTimeout = null;\n    }\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd('Page Request');\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup(true);\n    }\n  }\n  _pumpOperatorList({ renderingIntent, cacheKey, annotationStorageSerializable }) {\n    const { map, transfer } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\n      'GetOperatorList',\n      {\n        pageIndex: this._pageIndex,\n        intent: renderingIntent,\n        cacheKey,\n        annotationStorage: map,\n      },\n      transfer,\n    );\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(\n        ({ value, done }) => {\n          if (done) {\n            intentState.streamReader = null;\n            return;\n          }\n          if (this._transport.destroyed) {\n            return;\n          }\n          this._renderPageChunk(value, intentState);\n          pump();\n        },\n        (reason) => {\n          intentState.streamReader = null;\n          if (this._transport.destroyed) {\n            return;\n          }\n          if (intentState.operatorList) {\n            intentState.operatorList.lastChunk = true;\n            for (const internalRenderTask of intentState.renderTasks) {\n              internalRenderTask.operatorListChanged();\n            }\n            this.#tryCleanup(true);\n          }\n          if (intentState.displayReadyCapability) {\n            intentState.displayReadyCapability.reject(reason);\n          } else if (intentState.opListReadCapability) {\n            intentState.opListReadCapability.reject(reason);\n          } else {\n            throw reason;\n          }\n        },\n      );\n    };\n    pump();\n  }\n  _abortOperatorList({ intentState, reason, force = false }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true,\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass LoopbackPort {\n  #listeners = new Set();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(\n        obj,\n        transfer\n          ? {\n              transfer,\n            }\n          : null,\n      ),\n    };\n    this.#deferred.then(() => {\n      for (const listener of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener) {\n    this.#listeners.add(listener);\n  }\n  removeEventListener(name, listener) {\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    this.#listeners.clear();\n  }\n}\nconst PDFWorkerUtil = {\n  isWorkerDisabled: false,\n  fakeWorkerId: 0,\n};\n{\n  if (isNodeJS) {\n    PDFWorkerUtil.isWorkerDisabled = true;\n  }\n  GlobalWorkerOptions.workerSrc ||= '/script/pdf.worker.mjs';\n  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n    let base;\n    try {\n      base = new URL(baseUrl);\n      if (!base.origin || base.origin === 'null') {\n        return false;\n      }\n    } catch {\n      return false;\n    }\n    const other = new URL(otherUrl, base);\n    return base.origin === other.origin;\n  };\n  PDFWorkerUtil.createCDNWrapper = function (url) {\n    const wrapper = `await import(\"${url}\");`;\n    return URL.createObjectURL(\n      new Blob([wrapper], {\n        type: 'text/javascript',\n      }),\n    );\n  };\n}\nclass PDFWorker {\n  static #workerPorts;\n  constructor({ name = null, port = null, verbosity = getVerbosityLevel() } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    this._readyCapability = Promise.withResolvers();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n    if (port) {\n      if (PDFWorker.#workerPorts?.has(port)) {\n        throw new Error('Cannot use more than one PDFWorker per port.');\n      }\n      (PDFWorker.#workerPorts ||= new WeakMap()).set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n  get promise() {\n    if (isNodeJS) {\n      return Promise.all([NodePackages.promise, this._readyCapability.promise]);\n    }\n    return this._readyCapability.promise;\n  }\n  get port() {\n    return this._port;\n  }\n  get messageHandler() {\n    return this._messageHandler;\n  }\n  _initializeFromPort(port) {\n    this._port = port;\n    this._messageHandler = new MessageHandler('main', 'worker', port);\n    this._messageHandler.on('ready', function () {});\n    this._readyCapability.resolve();\n    this._messageHandler.send('configure', {\n      verbosity: this.verbosity,\n    });\n  }\n  _initialize() {\n    if (!PDFWorkerUtil.isWorkerDisabled && !PDFWorker.#mainThreadWorkerMessageHandler) {\n      let { workerSrc } = PDFWorker;\n      try {\n        if (!PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)) {\n          workerSrc = PDFWorkerUtil.createCDNWrapper(new URL(workerSrc, window.location).href);\n        }\n        const worker = new Worker(workerSrc, {\n          type: 'module',\n        });\n        const messageHandler = new MessageHandler('main', 'worker', worker);\n        const terminateEarly = () => {\n          worker.removeEventListener('error', onWorkerError);\n          messageHandler.destroy();\n          worker.terminate();\n          if (this.destroyed) {\n            this._readyCapability.reject(new Error('Worker was destroyed'));\n          } else {\n            this._setupFakeWorker();\n          }\n        };\n        const onWorkerError = () => {\n          if (!this._webWorker) {\n            terminateEarly();\n          }\n        };\n        worker.addEventListener('error', onWorkerError);\n        messageHandler.on('test', (data) => {\n          worker.removeEventListener('error', onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return;\n          }\n          if (data) {\n            this._messageHandler = messageHandler;\n            this._port = worker;\n            this._webWorker = worker;\n            this._readyCapability.resolve();\n            messageHandler.send('configure', {\n              verbosity: this.verbosity,\n            });\n          } else {\n            this._setupFakeWorker();\n            messageHandler.destroy();\n            worker.terminate();\n          }\n        });\n        messageHandler.on('ready', (data) => {\n          worker.removeEventListener('error', onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return;\n          }\n          try {\n            sendTest();\n          } catch {\n            this._setupFakeWorker();\n          }\n        });\n        const sendTest = () => {\n          const testObj = new Uint8Array();\n          messageHandler.send('test', testObj, [testObj.buffer]);\n        };\n        sendTest();\n        return;\n      } catch {\n        info('The worker has been disabled.');\n      }\n    }\n    this._setupFakeWorker();\n  }\n  _setupFakeWorker() {\n    if (!PDFWorkerUtil.isWorkerDisabled) {\n      warn('Setting up fake worker.');\n      PDFWorkerUtil.isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal\n      .then((WorkerMessageHandler) => {\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error('Worker was destroyed'));\n          return;\n        }\n        const port = new LoopbackPort();\n        this._port = port;\n        const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;\n        const workerHandler = new MessageHandler(id + '_worker', id, port);\n        WorkerMessageHandler.setup(workerHandler, port);\n        const messageHandler = new MessageHandler(id, id + '_worker', port);\n        this._messageHandler = messageHandler;\n        this._readyCapability.resolve();\n        messageHandler.send('configure', {\n          verbosity: this.verbosity,\n        });\n      })\n      .catch((reason) => {\n        this._readyCapability.reject(\n          new Error(`Setting up fake worker failed: \"${reason.message}\".`),\n        );\n      });\n  }\n  destroy() {\n    this.destroyed = true;\n    if (this._webWorker) {\n      this._webWorker.terminate();\n      this._webWorker = null;\n    }\n    PDFWorker.#workerPorts?.delete(this._port);\n    this._port = null;\n    if (this._messageHandler) {\n      this._messageHandler.destroy();\n      this._messageHandler = null;\n    }\n  }\n  static fromPort(params) {\n    if (!params?.port) {\n      throw new Error('PDFWorker.fromPort - invalid method signature.');\n    }\n    const cachedPort = this.#workerPorts?.get(params.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\n          'PDFWorker.fromPort - the worker is being destroyed.\\n' +\n            'Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.',\n        );\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import(/*webpackIgnore: true*/ this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, '_setupFakeWorkerGlobal', loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement,\n    });\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, 'annotationStorage', new AnnotationStorage());\n  }\n  getRenderingIntent(\n    intent,\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isOpList = false,\n  ) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case 'any':\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case 'display':\n        break;\n      case 'print':\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        const annotationStorage =\n          renderingIntent & RenderingIntentFlag.PRINT &&\n          printAnnotationStorage instanceof PrintAnnotationStorage\n            ? printAnnotationStorage\n            : this.annotationStorage;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    return {\n      renderingIntent,\n      cacheKey: `${renderingIntent}_${annotationStorageSerializable.hash}`,\n      annotationStorageSerializable,\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error('Worker was destroyed during onPassword callback'));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty('annotationStorage')) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise('Terminate', null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException('Worker was terminated.'));\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const { messageHandler, loadingTask } = this;\n    messageHandler.on('GetReader', (data, sink) => {\n      assert(this._networkStream, 'GetReader - no `IPDFStream` instance available.');\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = (evt) => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total,\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(value instanceof ArrayBuffer, 'GetReader - expected an ArrayBuffer.');\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch((reason) => {\n            sink.error(reason);\n          });\n      };\n      sink.onCancel = (reason) => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch((readyReason) => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on('ReaderHeadersReady', (data) => {\n      const headersCapability = Promise.withResolvers();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress) {\n            loadingTask.onProgress?.(this._lastProgress);\n          }\n          fullReader.onProgress = (evt) => {\n            loadingTask.onProgress?.({\n              loaded: evt.loaded,\n              total: evt.total,\n            });\n          };\n        }\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength,\n        });\n      }, headersCapability.reject);\n      return headersCapability.promise;\n    });\n    messageHandler.on('GetRangeReader', (data, sink) => {\n      assert(this._networkStream, 'GetRangeReader - no `IPDFStream` instance available.');\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(value instanceof ArrayBuffer, 'GetRangeReader - expected an ArrayBuffer.');\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch((reason) => {\n            sink.error(reason);\n          });\n      };\n      sink.onCancel = (reason) => {\n        rangeReader.cancel(reason);\n        sink.ready.catch((readyReason) => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on('GetDoc', ({ pdfInfo }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on('DocException', function (ex) {\n      let reason;\n      switch (ex.name) {\n        case 'PasswordException':\n          reason = new PasswordException(ex.message, ex.code);\n          break;\n        case 'InvalidPDFException':\n          reason = new InvalidPDFException(ex.message);\n          break;\n        case 'MissingPDFException':\n          reason = new MissingPDFException(ex.message);\n          break;\n        case 'UnexpectedResponseException':\n          reason = new UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case 'UnknownErrorException':\n          reason = new UnknownErrorException(ex.message, ex.details);\n          break;\n        default:\n          unreachable('DocException - expected a valid Error.');\n      }\n      loadingTask._capability.reject(reason);\n    });\n    messageHandler.on('PasswordRequest', (exception) => {\n      this.#passwordCapability = Promise.withResolvers();\n      if (loadingTask.onPassword) {\n        const updatePassword = (password) => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password,\n            });\n          }\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this.#passwordCapability.reject(ex);\n        }\n      } else {\n        this.#passwordCapability.reject(new PasswordException(exception.message, exception.code));\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on('DataLoaded', (data) => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length,\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on('StartRenderPage', (data) => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on('commonobj', ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case 'Font':\n          const { disableFontFace, fontExtraProperties, pdfBug } = this._params;\n          if ('error' in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont =\n            pdfBug && globalThis.FontInspector?.enabled\n              ? (font, url) => globalThis.FontInspector.fontAdded(font, url)\n              : null;\n          const font = new FontFaceObject(exportedData, {\n            disableFontFace,\n            inspectFont,\n          });\n          this.fontLoader\n            .bind(font)\n            .catch(() =>\n              messageHandler.sendWithPromise('FontFallback', {\n                id,\n              }),\n            )\n            .finally(() => {\n              if (!fontExtraProperties && font.data) {\n                font.data = null;\n              }\n              this.commonObjs.resolve(id, font);\n            });\n          break;\n        case 'CopyLocalImage':\n          const { imageRef } = exportedData;\n          assert(imageRef, 'The imageRef must be defined.');\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case 'FontPath':\n        case 'Image':\n        case 'Pattern':\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on('obj', ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case 'Image':\n          pageProxy.objs.resolve(id, imageData);\n          if (imageData?.dataLen > MAX_IMAGE_SIZE_TO_CACHE) {\n            pageProxy._maybeCleanupAfterRender = true;\n          }\n          break;\n        case 'Pattern':\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on('DocProgress', (data) => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total,\n      });\n    });\n    messageHandler.on('FetchBuiltInCMap', (data) => {\n      if (this.destroyed) {\n        return Promise.reject(new Error('Worker was destroyed.'));\n      }\n      if (!this.cMapReaderFactory) {\n        return Promise.reject(\n          new Error('CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.'),\n        );\n      }\n      return this.cMapReaderFactory.fetch(data);\n    });\n    messageHandler.on('FetchStandardFontData', (data) => {\n      if (this.destroyed) {\n        return Promise.reject(new Error('Worker was destroyed.'));\n      }\n      if (!this.standardFontDataFactory) {\n        return Promise.reject(\n          new Error('StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.'),\n        );\n      }\n      return this.standardFontDataFactory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise('GetData', null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\n        'saveDocument called while `annotationStorage` is empty, ' +\n          'please use the getData-method instead.',\n      );\n    }\n    const { map, transfer } = this.annotationStorage.serializable;\n    return this.messageHandler\n      .sendWithPromise(\n        'SaveDocument',\n        {\n          isPureXfa: !!this._htmlForXfa,\n          numPages: this._numPages,\n          annotationStorage: map,\n          filename: this._fullReader?.filename ?? null,\n        },\n        transfer,\n      )\n      .finally(() => {\n        this.annotationStorage.resetModified();\n      });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error('Invalid page request.'));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise('GetPage', {\n        pageIndex,\n      })\n      .then((pageInfo) => {\n        if (this.destroyed) {\n          throw new Error('Transport destroyed');\n        }\n        if (pageInfo.refStr) {\n          this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n        }\n        const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n        this.#pageCache.set(pageIndex, page);\n        return page;\n      });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error('Invalid pageIndex request.'));\n    }\n    return this.messageHandler.sendWithPromise('GetPageIndex', {\n      num: ref.num,\n      gen: ref.gen,\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise('GetAnnotations', {\n      pageIndex,\n      intent,\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod('GetFieldObjects');\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod('HasJSActions');\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise('GetCalculationOrderIds', null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise('GetDestinations', null);\n  }\n  getDestination(id) {\n    if (typeof id !== 'string') {\n      return Promise.reject(new Error('Invalid destination request.'));\n    }\n    return this.messageHandler.sendWithPromise('GetDestination', {\n      id,\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise('GetPageLabels', null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise('GetPageLayout', null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise('GetPageMode', null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise('GetViewerPreferences', null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise('GetOpenAction', null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise('GetAttachments', null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod('GetDocJSActions');\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise('GetPageJSActions', {\n      pageIndex,\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise('GetStructTree', {\n      pageIndex,\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise('GetOutline', null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod('GetOptionalContentConfig').then(\n      (data) => new OptionalContentConfig(data, renderingIntent),\n    );\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise('GetPermissions', null);\n  }\n  getMetadata() {\n    const name = 'GetMetadata',\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then((results) => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null,\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise('GetMarkInfo', null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise('Cleanup', null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n  get loadingParams() {\n    const { disableAutoFetch, enableXfa } = this._params;\n    return shadow(this, 'loadingParams', {\n      disableAutoFetch,\n      enableXfa,\n    });\n  }\n}\nconst INITIAL_DATA = Symbol('INITIAL_DATA');\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return (this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA,\n    });\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n    this.onContinue = null;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const { separateAnnots } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const { annotationCanvasMap } = this.#internalRenderTask;\n    return separateAnnots.form || (separateAnnots.canvas && annotationCanvasMap?.size > 0);\n  }\n}\nclass InternalRenderTask {\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null,\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame =\n      useRequestAnimationFrame === true && typeof window !== 'undefined';\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({ transparency = false, optionalContentConfig }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\n          'Cannot use the same canvas during multiple render() operations. ' +\n            'Use different canvas or ensure previous operations were ' +\n            'cancelled or completed.',\n        );\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const { canvasContext, viewport, transform, background } = this.params;\n    this.gfx = new CanvasGraphics(\n      canvasContext,\n      this.commonObjs,\n      this.objs,\n      this.canvasFactory,\n      this.filterFactory,\n      {\n        optionalContentConfig,\n      },\n      this.annotationCanvasMap,\n      this.pageColors,\n    );\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background,\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    this.callback(\n      error ||\n        new RenderingCancelledException(\n          `Rendering cancelled, page ${this._pageIndex + 1}`,\n          extraDelay,\n        ),\n    );\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      window.requestAnimationFrame(() => {\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(\n      this.operatorList,\n      this.operatorListIdx,\n      this._continueBound,\n      this.stepper,\n    );\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = '4.3.99';\nconst build = '2a52fda11'; // CONCATENATED MODULE: ./src/shared/scripting_utils.js\n\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255)\n    .toString(16)\n    .padStart(2, '0');\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return ['G', 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return ['CMYK', 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return ['RGB', g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return ['G', 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join('')}`;\n  }\n  static T_HTML() {\n    return '#00000000';\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return ['RGB', 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [\n      scaleAndClamp(1 - Math.min(1, c + k)),\n      scaleAndClamp(1 - Math.min(1, m + k)),\n      scaleAndClamp(1 - Math.min(1, y + k)),\n    ];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return ['CMYK', c, m, y, k];\n  }\n} // CONCATENATED MODULE: ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null,\n    });\n    switch (element.name) {\n      case 'textarea':\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === 'print') {\n          break;\n        }\n        html.addEventListener('input', (event) => {\n          storage.setValue(id, {\n            value: event.target.value,\n          });\n        });\n        break;\n      case 'input':\n        if (element.attributes.type === 'radio' || element.attributes.type === 'checkbox') {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute('checked', true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute('checked');\n          }\n          if (intent === 'print') {\n            break;\n          }\n          html.addEventListener('change', (event) => {\n            storage.setValue(id, {\n              value: event.target.checked\n                ? event.target.getAttribute('xfaOn')\n                : event.target.getAttribute('xfaOff'),\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute('value', storedData.value);\n          }\n          if (intent === 'print') {\n            break;\n          }\n          html.addEventListener('input', (event) => {\n            storage.setValue(id, {\n              value: event.target.value,\n            });\n          });\n        }\n        break;\n      case 'select':\n        if (storedData.value !== null) {\n          html.setAttribute('value', storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty('selected')) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener('input', (event) => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? '' : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value,\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({ html, element, storage = null, intent, linkService }) {\n    const { attributes } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === 'radio') {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case 'class':\n          if (value.length) {\n            html.setAttribute(key, value.join(' '));\n          }\n          break;\n        case 'dataId':\n          break;\n        case 'id':\n          html.setAttribute('data-element-id', value);\n          break;\n        case 'style':\n          Object.assign(html.style, value);\n          break;\n        case 'textContent':\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || (key !== 'href' && key !== 'newWindow')) {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || 'display';\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService,\n      });\n    }\n    const isNotForRichText = intent !== 'richText';\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(',')})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute('class', 'xfaLayer xfaFont');\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs,\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const { name } = child;\n      if (name === '#text') {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns\n        ? document.createElementNS(child.attributes.xmlns, name)\n        : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService,\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\n      '.xfaNonInteractive input, .xfaNonInteractive textarea',\n    )) {\n      el.setAttribute('readOnly', true);\n    }\n    return {\n      textDivs,\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(',')})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n} // CONCATENATED MODULE: ./src/display/annotation_layer.js\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nfunction getRectDims(rect) {\n  return {\n    width: rect[2] - rect[0],\n    height: rect[3] - rect[1],\n  };\n}\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case 'Tx':\n            return new TextWidgetAnnotationElement(parameters);\n          case 'Btn':\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case 'Ch':\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case 'Sig':\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(\n    parameters,\n    { isRenderable = false, ignoreBorder = false, createQuadrilaterals = false } = {},\n  ) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({ titleObj, contentsObj, richText }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0),\n    };\n    const { rect } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: { style },\n      data: { rect: currentRect, rotation },\n      parent: {\n        viewport: {\n          rawDims: { pageWidth, pageHeight, pageX, pageY },\n        },\n      },\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    const { width, height } = getRectDims(rect);\n    style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (pageHeight - rect[3] + pageY)) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${(100 * width) / pageWidth}%`;\n      style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: { page, viewport },\n    } = this;\n    const container = document.createElement('section');\n    container.setAttribute('data-annotation-id', data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const { style } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.popupRef) {\n      container.setAttribute('aria-haspopup', 'dialog');\n    }\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add('norotate');\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const { rotation } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const { width, height } = getRectDims(data.rect);\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = 'solid';\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = 'dashed';\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn('Unimplemented border style: beveled');\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn('Unimplemented border style: inset');\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = 'solid';\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(\n          borderColor[0] | 0,\n          borderColor[1] | 0,\n          borderColor[2] | 0,\n        );\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([\n      data.rect[0],\n      page.view[3] - data.rect[1] + page.view[1],\n      data.rect[2],\n      page.view[3] - data.rect[3] + page.view[1],\n    ]);\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n    style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (rect[1] - pageY)) / pageHeight}%`;\n    const { rotation } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${(100 * width) / pageWidth}%`;\n      style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const { pageWidth, pageHeight } = this.parent.viewport.rawDims;\n    const { width, height } = getRectDims(this.data.rect);\n    let elementWidth, elementHeight;\n    if (angle % 180 === 0) {\n      elementWidth = (100 * width) / pageWidth;\n      elementHeight = (100 * height) / pageHeight;\n    } else {\n      elementWidth = (100 * height) / pageWidth;\n      elementHeight = (100 * width) / pageHeight;\n    }\n    container.style.width = `${elementWidth}%`;\n    container.style.height = `${elementHeight}%`;\n    container.setAttribute('data-main-rotation', (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray),\n      });\n    };\n    return shadow(this, '_commonActions', {\n      display: (event) => {\n        const { display } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? 'hidden' : 'visible';\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2,\n        });\n      },\n      print: (event) => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print,\n        });\n      },\n      hidden: (event) => {\n        const { hidden } = event.detail;\n        this.container.style.visibility = hidden ? 'hidden' : 'visible';\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden,\n        });\n      },\n      focus: (event) => {\n        setTimeout(\n          () =>\n            event.target.focus({\n              preventScroll: false,\n            }),\n          0,\n        );\n      },\n      userName: (event) => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: (event) => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: (event) => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: (event) => {\n        setColor('bgColor', 'backgroundColor', event);\n      },\n      fillColor: (event) => {\n        setColor('fillColor', 'backgroundColor', event);\n      },\n      fgColor: (event) => {\n        setColor('fgColor', 'color', event);\n      },\n      textColor: (event) => {\n        setColor('textColor', 'color', event);\n      },\n      borderColor: (event) => {\n        setColor('borderColor', 'borderColor', event);\n      },\n      strokeColor: (event) => {\n        setColor('strokeColor', 'borderColor', event);\n      },\n      rotation: (event) => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle,\n        });\n      },\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail,\n          },\n          target: element,\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const { quadPoints } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect;\n    if (quadPoints.length === 1) {\n      const [, { x: trX, y: trY }, { x: blX, y: blY }] = quadPoints[0];\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const { style } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const { borderColor, borderWidth } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\n        \"url('data:image/svg+xml;utf8,\",\n        `<svg xmlns=\"http://www.w3.org/2000/svg\"`,\n        ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`,\n        `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`,\n      ];\n      this.container.classList.add('hasBorder');\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const { svgFactory } = this;\n    const svg = svgFactory.createElement('svg');\n    svg.classList.add('quadrilateralsContainer');\n    svg.setAttribute('width', 0);\n    svg.setAttribute('height', 0);\n    const defs = svgFactory.createElement('defs');\n    svg.append(defs);\n    const clipPath = svgFactory.createElement('clipPath');\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute('id', id);\n    clipPath.setAttribute('clipPathUnits', 'objectBoundingBox');\n    defs.append(clipPath);\n    for (const [, { x: trX, y: trY }, { x: blX, y: blY }] of quadPoints) {\n      const rect = svgFactory.createElement('rect');\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute('x', x);\n      rect.setAttribute('y', y);\n      rect.setAttribute('width', rectWidth);\n      rect.setAttribute('height', rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(\n        `<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`,\n      );\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join('');\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const { container, data } = this;\n    container.setAttribute('aria-haspopup', 'dialog');\n    const popup = (this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation,\n      },\n      parent: this.parent,\n      elements: [this],\n    }));\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable('Abstract method `AnnotationElement.render` called');\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const { page, id, exportValues } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === 'string' ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement,\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const { exportValue } = domElement;\n      const id = domElement.getAttribute('data-element-id');\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement,\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add('highlightArea');\n      }\n    } else {\n      triggers.classList.add('highlightArea');\n    }\n  }\n  get _isEditable() {\n    return false;\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: { id: editId },\n    } = this;\n    this.container.addEventListener('dblclick', () => {\n      this.linkService.eventBus?.dispatch('switchannotationeditormode', {\n        source: this,\n        mode,\n        editId,\n      });\n    });\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true,\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const { data, linkService } = this;\n    const link = document.createElement('a');\n    link.setAttribute('data-element-id', data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (\n        data.actions &&\n        (data.actions.Action || data.actions['Mouse Up'] || data.actions['Mouse Down']) &&\n        this.enableScripting &&\n        this.hasJSActions\n      ) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, '');\n        isBound = true;\n      }\n    }\n    this.container.classList.add('linkAnnotation');\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute('data-internal-link', '');\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === '') {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl('');\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl('');\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl('');\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl('');\n    const map = new Map([\n      ['Action', 'onclick'],\n      ['Mouse Up', 'onmouseup'],\n      ['Mouse Down', 'onmousedown'],\n    ]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n          source: this,\n          detail: {\n            id: data.id,\n            name,\n          },\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl('');\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(\n        `_bindResetFormAction - \"resetForm\" action not supported, ` +\n          'ensure that the `fieldObjects` parameter is provided.',\n      );\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const { fields: resetFormFields, refs: resetFormRefs, include } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const { id } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const { id } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case 'text': {\n            const value = field.defaultValue || '';\n            storage.setValue(id, {\n              value,\n            });\n            break;\n          }\n          case 'checkbox':\n          case 'radiobutton': {\n            const value = field.defaultValue === field.exportValues;\n            storage.setValue(id, {\n              value,\n            });\n            break;\n          }\n          case 'combobox':\n          case 'listbox': {\n            const value = field.defaultValue || '';\n            storage.setValue(id, {\n              value,\n            });\n            break;\n          }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event('resetform'));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n          source: this,\n          detail: {\n            id: 'app',\n            ids: allIds,\n            name: 'ResetForm',\n          },\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n    });\n  }\n  render() {\n    this.container.classList.add('textAnnotation');\n    const image = document.createElement('img');\n    image.src = this.imageResourcesPath + 'annotation-' + this.data.name.toLowerCase() + '.svg';\n    image.setAttribute('data-l10n-id', 'pdfjs-text-annotation-type');\n    image.setAttribute(\n      'data-l10n-args',\n      JSON.stringify({\n        type: this.data.name,\n      }),\n    );\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === 'CANVAS') {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes('mouse')) {\n      element.addEventListener(baseName, (event) => {\n        this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event),\n          },\n        });\n      });\n    } else {\n      element.addEventListener(baseName, (event) => {\n        if (baseName === 'blur') {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === 'focus') {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n          },\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === 'Action' || this.data.actions?.[eventName]) {\n        if (eventName === 'Focus' || eventName === 'Blur') {\n          elementData ||= {\n            focused: false,\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === 'Focus' && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, 'blur', 'Blur', null);\n        } else if (eventName === 'Blur' && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, 'focus', 'Focus', null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor =\n      color === null ? 'transparent' : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = ['left', 'center', 'right'];\n    const { fontColor } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = (x) => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute('required', true);\n    } else {\n      element.removeAttribute('required');\n    }\n    element.setAttribute('aria-required', isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable =\n      parameters.renderForms ||\n      parameters.data.hasOwnCanvas ||\n      (!parameters.data.hasAppearance && !!parameters.data.fieldValue);\n    super(parameters, {\n      isRenderable,\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value,\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add('textWidgetAnnotation');\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue,\n      });\n      let textContent = storedData.value || '';\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen,\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues =\n        storedData.formattedValue || this.data.textContent?.join('\\n') || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, '');\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false,\n      };\n      if (this.data.multiLine) {\n        element = document.createElement('textarea');\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = 'hidden';\n        }\n      } else {\n        element = document.createElement('input');\n        element.type = 'text';\n        element.setAttribute('value', fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = 'hidden';\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute('data-element-id', id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener('input', (event) => {\n        storage.setValue(id, {\n          value: event.target.value,\n        });\n        this.setPropertyOnSiblings(element, 'value', event.target.value, 'value');\n        elementData.formattedValue = null;\n      });\n      element.addEventListener('resetform', (event) => {\n        const defaultValue = this.data.defaultFieldValue ?? '';\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = (event) => {\n        const { formattedValue } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener('focus', (event) => {\n          if (elementData.focused) {\n            return;\n          }\n          const { target } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener('updatefromsandbox', (jsEvent) => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? '';\n              storage.setValue(id, {\n                value: elementData.userValue.toString(),\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const { formattedValue } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (\n                formattedValue !== null &&\n                formattedValue !== undefined &&\n                event.target !== document.activeElement\n              ) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue,\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: (event) => {\n              const { charLimit } = event.detail;\n              const { target } = event;\n              if (charLimit === 0) {\n                target.removeAttribute('maxLength');\n                return;\n              }\n              target.setAttribute('maxLength', charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value,\n              });\n              this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n                source: this,\n                detail: {\n                  id,\n                  name: 'Keystroke',\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd,\n                },\n              });\n            },\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener('keydown', (event) => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === 'Escape') {\n            commitKey = 0;\n          } else if (event.key === 'Enter' && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === 'Tab') {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const { value } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n            source: this,\n            detail: {\n              id,\n              name: 'Keystroke',\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd,\n            },\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener('blur', (event) => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const { value } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n              source: this,\n              detail: {\n                id,\n                name: 'Keystroke',\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd,\n              },\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener('beforeinput', (event) => {\n            elementData.lastCommittedValue = null;\n            const { data, target } = event;\n            const { value, selectionStart, selectionEnd } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case 'deleteWordBackward': {\n                const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                if (match) {\n                  selStart -= match[0].length;\n                }\n                break;\n              }\n              case 'deleteWordForward': {\n                const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                if (match) {\n                  selEnd += match[0].length;\n                }\n                break;\n              }\n              case 'deleteContentBackward':\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case 'deleteContentForward':\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n              source: this,\n              detail: {\n                id,\n                name: 'Keystroke',\n                value,\n                change: data || '',\n                willCommit: false,\n                selStart,\n                selEnd,\n              },\n            });\n          });\n        }\n        this._setEventListeners(\n          element,\n          elementData,\n          [\n            ['focus', 'Focus'],\n            ['blur', 'Blur'],\n            ['mousedown', 'Mouse Down'],\n            ['mouseenter', 'Mouse Enter'],\n            ['mouseleave', 'Mouse Exit'],\n            ['mouseup', 'Mouse Up'],\n          ],\n          (event) => event.target.value,\n        );\n      }\n      if (blurListener) {\n        element.addEventListener('blur', blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add('comb');\n        element.style.letterSpacing = `calc(${combWidth}px * var(--scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement('div');\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = 'middle';\n      element.style.display = 'table-cell';\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas,\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms,\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue,\n    }).value;\n    if (typeof value === 'string') {\n      value = value !== 'Off';\n      storage.setValue(id, {\n        value,\n      });\n    }\n    this.container.classList.add('buttonWidgetAnnotation', 'checkBox');\n    const element = document.createElement('input');\n    GetElementsByNameSet.add(element);\n    element.setAttribute('data-element-id', id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = 'checkbox';\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute('checked', true);\n    }\n    element.setAttribute('exportValue', data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener('change', (event) => {\n      const { name, checked } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked,\n        });\n      }\n      storage.setValue(id, {\n        value: checked,\n      });\n    });\n    element.addEventListener('resetform', (event) => {\n      const defaultValue = data.defaultFieldValue || 'Off';\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener('updatefromsandbox', (jsEvent) => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== 'Off';\n            storage.setValue(id, {\n              value: event.target.checked,\n            });\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(\n        element,\n        null,\n        [\n          ['change', 'Validate'],\n          ['change', 'Action'],\n          ['focus', 'Focus'],\n          ['blur', 'Blur'],\n          ['mousedown', 'Mouse Down'],\n          ['mouseenter', 'Mouse Enter'],\n          ['mouseleave', 'Mouse Exit'],\n          ['mouseup', 'Mouse Up'],\n        ],\n        (event) => event.target.checked,\n      );\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms,\n    });\n  }\n  render() {\n    this.container.classList.add('buttonWidgetAnnotation', 'radioButton');\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue,\n    }).value;\n    if (typeof value === 'string') {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value,\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false,\n        });\n      }\n    }\n    const element = document.createElement('input');\n    GetElementsByNameSet.add(element);\n    element.setAttribute('data-element-id', id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = 'radio';\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute('checked', true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener('change', (event) => {\n      const { name, checked } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false,\n        });\n      }\n      storage.setValue(id, {\n        value: checked,\n      });\n    });\n    element.addEventListener('resetform', (event) => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked =\n        defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener('updatefromsandbox', (jsEvent) => {\n        const actions = {\n          value: (event) => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked,\n              });\n            }\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(\n        element,\n        null,\n        [\n          ['change', 'Validate'],\n          ['change', 'Action'],\n          ['focus', 'Focus'],\n          ['blur', 'Blur'],\n          ['mousedown', 'Mouse Down'],\n          ['mouseenter', 'Mouse Enter'],\n          ['mouseleave', 'Mouse Exit'],\n          ['mouseup', 'Mouse Up'],\n        ],\n        (event) => event.target.checked,\n      );\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance,\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add('buttonWidgetAnnotation', 'pushButton');\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener('updatefromsandbox', (jsEvent) => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms,\n    });\n  }\n  render() {\n    this.container.classList.add('choiceWidgetAnnotation');\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue,\n    });\n    const selectElement = document.createElement('select');\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute('data-element-id', id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener('resetform', (event) => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement('option');\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute('selected', true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement('option');\n      noneOptionElement.value = ' ';\n      noneOptionElement.setAttribute('hidden', true);\n      noneOptionElement.setAttribute('selected', true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener('input', removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener('input', removeEmptyEntry);\n    }\n    const getValue = (isExport) => {\n      const name = isExport ? 'value' : 'textContent';\n      const { options, multiple } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter\n        .call(options, (option) => option.selected)\n        .map((option) => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = (event) => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, (option) => ({\n        displayValue: option.textContent,\n        exportValue: option.value,\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener('updatefromsandbox', (jsEvent) => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, (option) => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: [],\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const { index, displayValue, exportValue } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement('option');\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const { items } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const { displayValue, exportValue } = item;\n              const optionElement = document.createElement('option');\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener('input', (event) => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue,\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n          source: this,\n          detail: {\n            id,\n            name: 'Keystroke',\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false,\n          },\n        });\n      });\n      this._setEventListeners(\n        selectElement,\n        null,\n        [\n          ['focus', 'Focus'],\n          ['blur', 'Blur'],\n          ['mousedown', 'Mouse Down'],\n          ['mouseenter', 'Mouse Enter'],\n          ['mouseleave', 'Mouse Exit'],\n          ['mouseup', 'Mouse Up'],\n          ['input', 'Action'],\n          ['input', 'Validate'],\n        ],\n        (event) => event.target.value,\n      );\n    } else {\n      selectElement.addEventListener('input', function (event) {\n        storage.setValue(id, {\n          value: getValue(true),\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {\n    }\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const { data, elements } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data),\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    this.container.classList.add('popupAnnotation');\n    const popup = (this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open,\n    }));\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\n      'aria-controls',\n      elementIds.map((id) => `${AnnotationPrefix}${id}`).join(','),\n    );\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open,\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap((e) => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener('click', this.#boundToggle);\n      element.addEventListener('mouseenter', this.#boundShow);\n      element.addEventListener('mouseleave', this.#boundHide);\n      element.classList.add('popupTriggerArea');\n    }\n    for (const element of elements) {\n      element.container?.addEventListener('keydown', this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = (this.#popup = document.createElement('div'));\n    popup.className = 'popup';\n    if (this.#color) {\n      const baseColor = (popup.style.outlineColor = Util.makeHexColor(...this.#color));\n      if (CSS.supports('background-color', 'color-mix(in srgb, red 30%, white)')) {\n        popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n      } else {\n        const BACKGROUND_ENLIGHT = 0.7;\n        popup.style.backgroundColor = Util.makeHexColor(\n          ...this.#color.map((c) => Math.floor(BACKGROUND_ENLIGHT * (255 - c) + c)),\n        );\n      }\n    }\n    const header = document.createElement('span');\n    header.className = 'header';\n    const title = document.createElement('h1');\n    header.append(title);\n    ({ dir: title.dir, str: title.textContent } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement('span');\n      modificationDate.classList.add('popupDate');\n      modificationDate.setAttribute('data-l10n-id', 'pdfjs-annotation-date-string');\n      modificationDate.setAttribute(\n        'data-l10n-args',\n        JSON.stringify({\n          date: this.#dateObj.toLocaleDateString(),\n          time: this.#dateObj.toLocaleTimeString(),\n        }),\n      );\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: 'richText',\n        div: popup,\n      });\n      popup.lastChild.classList.add('richText', 'popupContent');\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: 'div',\n        attributes: {\n          dir: 'auto',\n        },\n        children: [\n          {\n            name: 'p',\n            children: popupLines,\n          },\n        ],\n      },\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--scale-factor))` : '',\n      },\n    };\n    for (const line of text.split('\\n')) {\n      popupLines.push({\n        name: 'span',\n        value: line,\n        attributes: lineAttributes,\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({ str, dir }) {\n    const p = document.createElement('p');\n    p.classList.add('popupContent');\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement('br'));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === 'Enter' || (event.key === 'Escape' && this.#pinned)) {\n      this.#toggle();\n    }\n  }\n  updateEdited({ rect, popupContent }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText,\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({ contentsObj: this.#contentsObj, richText: this.#richText } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: { view },\n      viewport: {\n        rawDims: { pageWidth, pageHeight, pageX, pageY },\n      },\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([\n      rect[0],\n      view[3] - rect[1] + view[1],\n      rect[2],\n      view[3] - rect[3] + view[1],\n    ]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [\n      (100 * (popupLeft - pageX)) / pageWidth,\n      (100 * (popupTop - pageY)) / pageHeight,\n    ];\n    const { style } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener('click', this.#boundToggle);\n      this.#container.addEventListener('keydown', this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener('click', this.#boundToggle);\n      this.#container.removeEventListener('keydown', this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add('focused');\n    }\n  }\n  #hide() {\n    this.#container.classList.remove('focused');\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add('freeTextAnnotation');\n    if (this.textContent) {\n      const content = document.createElement('div');\n      content.classList.add('annotationTextContent');\n      content.setAttribute('role', 'comment');\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement('span');\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  get _isEditable() {\n    return this.data.hasOwnCanvas;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n  }\n  render() {\n    this.container.classList.add('lineAnnotation');\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const line = (this.#line = this.svgFactory.createElement('svg:line'));\n    line.setAttribute('x1', data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute('y1', data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute('x2', data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute('y2', data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute('stroke-width', data.borderStyle.width || 1);\n    line.setAttribute('stroke', 'transparent');\n    line.setAttribute('fill', 'transparent');\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n  }\n  render() {\n    this.container.classList.add('squareAnnotation');\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = (this.#square = this.svgFactory.createElement('svg:rect'));\n    square.setAttribute('x', borderWidth / 2);\n    square.setAttribute('y', borderWidth / 2);\n    square.setAttribute('width', width - borderWidth);\n    square.setAttribute('height', height - borderWidth);\n    square.setAttribute('stroke-width', borderWidth || 1);\n    square.setAttribute('stroke', 'transparent');\n    square.setAttribute('fill', 'transparent');\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n  }\n  render() {\n    this.container.classList.add('circleAnnotation');\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = (this.#circle = this.svgFactory.createElement('svg:ellipse'));\n    circle.setAttribute('cx', width / 2);\n    circle.setAttribute('cy', height / 2);\n    circle.setAttribute('rx', width / 2 - borderWidth / 2);\n    circle.setAttribute('ry', height / 2 - borderWidth / 2);\n    circle.setAttribute('stroke-width', borderWidth || 1);\n    circle.setAttribute('stroke', 'transparent');\n    circle.setAttribute('fill', 'transparent');\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n    this.containerClassName = 'polylineAnnotation';\n    this.svgElementName = 'svg:polyline';\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (const coordinate of data.vertices) {\n      const x = coordinate.x - data.rect[0];\n      const y = data.rect[3] - coordinate.y;\n      points.push(x + ',' + y);\n    }\n    points = points.join(' ');\n    const polyline = (this.#polyline = this.svgFactory.createElement(this.svgElementName));\n    polyline.setAttribute('points', points);\n    polyline.setAttribute('stroke-width', data.borderStyle.width || 1);\n    polyline.setAttribute('stroke', 'transparent');\n    polyline.setAttribute('fill', 'transparent');\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = 'polygonAnnotation';\n    this.svgElementName = 'svg:polygon';\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n  }\n  render() {\n    this.container.classList.add('caretAnnotation');\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n    this.containerClassName = 'inkAnnotation';\n    this.svgElementName = 'svg:polyline';\n    this.annotationEditorType = AnnotationEditorType.INK;\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    for (const inkList of data.inkLists) {\n      let points = [];\n      for (const coordinate of inkList) {\n        const x = coordinate.x - data.rect[0];\n        const y = data.rect[3] - coordinate.y;\n        points.push(`${x},${y}`);\n      }\n      points = points.join(' ');\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute('points', points);\n      polyline.setAttribute('stroke-width', data.borderStyle.width || 1);\n      polyline.setAttribute('stroke', 'transparent');\n      polyline.setAttribute('fill', 'transparent');\n      if (!data.popupRef && this.hasPopupData) {\n        this._createPopup();\n      }\n      svg.append(polyline);\n    }\n    this.container.append(svg);\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add('highlightAnnotation');\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add('underlineAnnotation');\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add('squigglyAnnotation');\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add('strikeoutAnnotation');\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n  }\n  render() {\n    this.container.classList.add('stampAnnotation');\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n    });\n    const { file } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch('fileattachmentannotation', {\n      source: this,\n      ...file,\n    });\n  }\n  render() {\n    this.container.classList.add('fileAttachmentAnnotation');\n    const { container, data } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement('div');\n    } else {\n      trigger = document.createElement('img');\n      trigger.src = `${this.imageResourcesPath}annotation-${\n        /paperclip/i.test(data.name) ? 'paperclip' : 'pushpin'\n      }.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener('dblclick', this.#download.bind(this));\n    this.#trigger = trigger;\n    const { isMac } = util_FeatureTest.platform;\n    container.addEventListener('keydown', (evt) => {\n      if (evt.key === 'Enter' && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add('popupTriggerArea');\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    contentElement.id = `${AnnotationPrefix}${id}`;\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const { annotations } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || '',\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null,\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        const { width, height } = getRectDims(data.rect);\n        if (width <= 0 || height <= 0) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = 'hidden';\n      }\n      this.#appendElement(rendered, data.id);\n      if (element.annotationEditorType > 0) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  update({ viewport }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation,\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = 'annotationContent';\n      const { firstChild } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === 'CANVAS') {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains('annotationContent')) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n} // CONCATENATED MODULE: ./src/display/editor/freetext.js\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #boundEditorDivBlur = this.editorDivBlur.bind(this);\n  #boundEditorDivFocus = this.editorDivFocus.bind(this);\n  #boundEditorDivInput = this.editorDivInput.bind(this);\n  #boundEditorDivKeydown = this.editorDivKeydown.bind(this);\n  #boundEditorDivPaste = this.editorDivPaste.bind(this);\n  #color;\n  #content = '';\n  #editorDivId = `${this.id}-editor`;\n  #fontSize;\n  #initialData = null;\n  static _freeTextDefaultContent = '';\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = (self) => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(\n      this,\n      '_keyboardManager',\n      new KeyboardManager([\n        [\n          ['ctrl+s', 'mac+meta+s', 'ctrl+p', 'mac+meta+p'],\n          proto.commitOrRemove,\n          {\n            bubbles: true,\n          },\n        ],\n        [['ctrl+Enter', 'mac+meta+Enter', 'Escape', 'mac+Escape'], proto.commitOrRemove],\n        [\n          ['ArrowLeft', 'mac+ArrowLeft'],\n          proto._translateEmpty,\n          {\n            args: [-small, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowLeft', 'mac+shift+ArrowLeft'],\n          proto._translateEmpty,\n          {\n            args: [-big, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowRight', 'mac+ArrowRight'],\n          proto._translateEmpty,\n          {\n            args: [small, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowRight', 'mac+shift+ArrowRight'],\n          proto._translateEmpty,\n          {\n            args: [big, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowUp', 'mac+ArrowUp'],\n          proto._translateEmpty,\n          {\n            args: [0, -small],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowUp', 'mac+shift+ArrowUp'],\n          proto._translateEmpty,\n          {\n            args: [0, -big],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowDown', 'mac+ArrowDown'],\n          proto._translateEmpty,\n          {\n            args: [0, small],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowDown', 'mac+shift+ArrowDown'],\n          proto._translateEmpty,\n          {\n            args: [0, big],\n            checker: arrowChecker,\n          },\n        ],\n      ]),\n    );\n  }\n  static _type = 'freetext';\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: 'freeTextEditor',\n    });\n    this.#color =\n      params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager, {\n      strings: ['pdfjs-free-text-default-content'],\n    });\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue('--freetext-padding'));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize],\n      [\n        AnnotationEditorParamsType.FREETEXT_COLOR,\n        FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n    ];\n  }\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize],\n      [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color],\n    ];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = (size) => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n  #updateColor(color) {\n    const setColor = (col) => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [\n      -FreeTextEditor._internalPadding * scale,\n      -(FreeTextEditor._internalPadding + this.#fontSize) * scale,\n    ];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(false);\n    this.parent.updateToolbar(AnnotationEditorType.FREETEXT);\n    super.enableEditMode();\n    this.overlayDiv.classList.remove('enabled');\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute('aria-activedescendant');\n    this.editorDiv.addEventListener('keydown', this.#boundEditorDivKeydown);\n    this.editorDiv.addEventListener('focus', this.#boundEditorDivFocus);\n    this.editorDiv.addEventListener('blur', this.#boundEditorDivBlur);\n    this.editorDiv.addEventListener('input', this.#boundEditorDivInput);\n    this.editorDiv.addEventListener('paste', this.#boundEditorDivPaste);\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(true);\n    super.disableEditMode();\n    this.overlayDiv.classList.add('enabled');\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute('aria-activedescendant', this.#editorDivId);\n    this._isDraggable = true;\n    this.editorDiv.removeEventListener('keydown', this.#boundEditorDivKeydown);\n    this.editorDiv.removeEventListener('focus', this.#boundEditorDivFocus);\n    this.editorDiv.removeEventListener('blur', this.#boundEditorDivBlur);\n    this.editorDiv.removeEventListener('input', this.#boundEditorDivInput);\n    this.editorDiv.removeEventListener('paste', this.#boundEditorDivPaste);\n    this.div.focus({\n      preventScroll: true,\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add('freetextEditing');\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded() {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    this.editorDiv.focus();\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === '';\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add('freetextEditing');\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    for (const child of this.editorDiv.childNodes) {\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n    }\n    return buffer.join('\\n');\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const { currentLayer, div } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains('hidden');\n      div.classList.remove('hidden');\n      div.style.display = 'hidden';\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle('hidden', savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = (this.#content = this.#extractText().trimEnd());\n    if (savedText === newText) {\n      return;\n    }\n    const setText = (text) => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false,\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === 'Enter') {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle('freetextEditing', this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute('role', 'comment');\n    this.editorDiv.removeAttribute('aria-multiline');\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute('role', 'textbox');\n    this.editorDiv.setAttribute('aria-multiline', true);\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement('div');\n    this.editorDiv.className = 'internal';\n    this.editorDiv.setAttribute('id', this.#editorDivId);\n    this.editorDiv.setAttribute('data-l10n-id', 'pdfjs-free-text');\n    this.enableEditing();\n    AnnotationEditor._l10nPromise\n      .get('pdfjs-free-text-default-content')\n      .then((msg) => this.editorDiv?.setAttribute('default-content', msg));\n    this.editorDiv.contentEditable = true;\n    const { style } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement('div');\n    this.overlayDiv.classList.add('overlay', 'enabled');\n    this.div.append(this.overlayDiv);\n    bindEvents(this, this.div, ['dblclick', 'keydown']);\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const { position } = this.#initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this.setAt(\n          baseX * parentWidth,\n          baseY * parentHeight,\n          this.width * parentWidth,\n          this.height * parentHeight,\n        );\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(\n      EOL_PATTERN,\n      '',\n    );\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const { types } = clipboardData;\n    if (types.length === 1 && types[0] === 'text/plain') {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(\n      clipboardData.getData('text') || '',\n    ).replaceAll(EOL_PATTERN, '\\n');\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes('\\n')) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const { startContainer, startOffset } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, ''));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, ''));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join('\\n')}${paste}${bufferAfter.join('\\n')}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = bufferBefore.reduce((acc, line) => acc + line.length, 0);\n    for (const { firstChild } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split('\\n')) {\n      const div = document.createElement('div');\n      div.append(line ? document.createTextNode(line) : document.createElement('br'));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll('\\xa0', ' ');\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(' ', '\\xa0');\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: { fontSize, fontColor },\n          rect,\n          rotation,\n          id,\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: { pageNumber },\n        },\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join('\\n'),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n      };\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor.#initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return {\n        pageIndex: this.pageIndex,\n        id: this.annotationElementId,\n        deleted: true,\n      };\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(\n      this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color,\n    );\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n    if (isForCopying) {\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const { value, fontSize, color, pageIndex } = this.#initialData;\n    return (\n      this._hasBeenMoved ||\n      serialized.value !== value ||\n      serialized.fontSize !== fontSize ||\n      serialized.color.some((c, i) => c !== color[i]) ||\n      serialized.pageIndex !== pageIndex\n    );\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const { style } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split('\\n')) {\n      const div = document.createElement('div');\n      div.append(line ? document.createTextNode(line) : document.createElement('br'));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content,\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n} // CONCATENATED MODULE: ./src/display/editor/outliner.js\n\nclass Outliner {\n  #box;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const { x, y, width, height } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      minX = Math.min(minX, x1);\n      maxX = Math.max(maxX, x2);\n      minY = Math.min(minY, y1);\n      maxY = Math.max(maxY, y2);\n    }\n    const bboxWidth = maxX - minX + 2 * innerMargin;\n    const bboxHeight = maxY - minY + 2 * innerMargin;\n    const shiftedMinX = minX - innerMargin;\n    const shiftedMinY = minY - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = {\n      x: shiftedMinX,\n      y: shiftedMinY,\n      width: bboxWidth,\n      height: bboxHeight,\n      lastPoint,\n    };\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = (start + end) >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass Outline {\n  toSVGPath() {\n    throw new Error('Abstract method `toSVGPath` must be implemented.');\n  }\n  get box() {\n    throw new Error('Abstract getter `box` must be implemented.');\n  }\n  serialize(_bbox, _rotation) {\n    throw new Error('Abstract method `serialize` must be implemented.');\n  }\n  get free() {\n    return this instanceof FreeHighlightOutline;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push('Z');\n    }\n    return buffer.join(' ');\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n}\nclass FreeOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float64Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeOutliner.#MIN_DIST + FreeOutliner.#MIN_DIFF;\n  constructor({ x, y }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  get free() {\n    return true;\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [\n      (this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width,\n      (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height,\n      (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width,\n      (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height,\n    ];\n  }\n  add({ x, y }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (x1 + thX - layerX) / layerWidth,\n          (y1 + thY - layerY) / layerHeight,\n        );\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (x1 - thX - layerX) / layerWidth,\n          (y1 - thY - layerY) / layerHeight,\n        );\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        ((x1 + x2) / 2 - layerX) / layerWidth,\n        ((y1 + y2) / 2 - layerY) / layerHeight,\n      );\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        ((x0 + x1) / 2 - layerX) / layerWidth,\n        ((y0 + y1) / 2 - layerY) / layerHeight,\n      );\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(\n      ((x0 + 5 * x1) / 6 - layerX) / layerWidth,\n      ((y0 + 5 * y1) / 6 - layerY) / layerHeight,\n      ((5 * x1 + x2) / 6 - layerX) / layerWidth,\n      ((5 * y1 + y2) / 6 - layerY) / layerHeight,\n      ((x1 + x2) / 2 - layerX) / layerWidth,\n      ((y1 + y2) / 2 - layerY) / layerHeight,\n    );\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(\n      ((x0 + 5 * x1) / 6 - layerX) / layerWidth,\n      ((y0 + 5 * y1) / 6 - layerY) / layerHeight,\n      ((5 * x1 + x2) / 6 - layerX) / layerWidth,\n      ((5 * y1 + y2) / 6 - layerY) / layerHeight,\n      ((x1 + x2) / 2 - layerX) / layerWidth,\n      ((y1 + y2) / 2 - layerY) / layerHeight,\n    );\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return '';\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${\n        (this.#last[4] - x) / width\n      } ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${\n        (this.#last[16] - x) / width\n      } ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${\n        (this.#last[15] - y) / height\n      } Z`;\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(\n          `C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`,\n        );\n      }\n    }\n    buffer.push(\n      `L${(lastTop[0] - x) / width} ${\n        (lastTop[1] - y) / height\n      } L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${\n        (lastBottom[1] - y) / height\n      }`,\n    );\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(\n          `C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${\n            bottom[i + 5]\n          }`,\n        );\n      }\n    }\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n    return buffer.join(' ');\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const lastTop = last.subarray(4, 6);\n    const lastBottom = last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float64Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      const outline = new Float64Array(36);\n      outline.set(\n        [\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[2] - layerX) / layerWidth,\n          (last[3] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[4] - layerX) / layerWidth,\n          (last[5] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          lastTopX,\n          lastTopY,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          lastBottomX,\n          lastBottomY,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[16] - layerX) / layerWidth,\n          (last[17] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[14] - layerX) / layerWidth,\n          (last[15] - layerY) / layerHeight,\n        ],\n        0,\n      );\n      return new FreeHighlightOutline(\n        outline,\n        points,\n        this.#box,\n        this.#scaleFactor,\n        this.#innerMargin,\n        this.#isLTR,\n      );\n    }\n    const outline = new Float64Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    outline.set(\n      [\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (lastTop[0] - layerX) / layerWidth,\n        (lastTop[1] - layerY) / layerHeight,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastTopX,\n        lastTopY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastBottomX,\n        lastBottomY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (lastBottom[0] - layerX) / layerWidth,\n        (lastBottom[1] - layerY) / layerHeight,\n      ],\n      N,\n    );\n    N += 24;\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], N);\n    return new FreeHighlightOutline(\n      outline,\n      points,\n      this.#box,\n      this.#scaleFactor,\n      this.#innerMargin,\n      this.#isLTR,\n    );\n  }\n}\nclass FreeHighlightOutline extends Outline {\n  #box;\n  #bbox = null;\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.#computeMinMax(isLTR);\n    const { x, y, width, height } = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(\n        `C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${\n          this.#outline[i + 3]\n        } ${this.#outline[i + 4]} ${this.#outline[i + 5]}`,\n      );\n    }\n    buffer.push('Z');\n    return buffer.join(' ');\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = this.#rescale(this.#outline, blX, trY, width, -height);\n        points = this.#rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = this.#rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = this.#rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = this.#rescale(this.#outline, trX, blY, -width, height);\n        points = this.#rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = this.#rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = this.#rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)],\n    };\n  }\n  #rescale(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  #rescaleAndSwap(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    let minX = lastX;\n    let minY = lastY;\n    let maxX = lastX;\n    let maxY = lastY;\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      if (isNaN(outline[i])) {\n        minX = Math.min(minX, outline[i + 4]);\n        minY = Math.min(minY, outline[i + 5]);\n        maxX = Math.max(maxX, outline[i + 4]);\n        maxY = Math.max(maxY, outline[i + 5]);\n        if (lastPointY < outline[i + 5]) {\n          lastPointX = outline[i + 4];\n          lastPointY = outline[i + 5];\n        } else if (lastPointY === outline[i + 5]) {\n          lastPointX = ltrCallback(lastPointX, outline[i + 4]);\n        }\n      } else {\n        const bbox = Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6));\n        minX = Math.min(minX, bbox[0]);\n        minY = Math.min(minY, bbox[1]);\n        maxX = Math.max(maxX, bbox[2]);\n        maxY = Math.max(maxY, bbox[3]);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = outline[i + 4];\n      lastY = outline[i + 5];\n    }\n    const x = minX - this.#innerMargin,\n      y = minY - this.#innerMargin,\n      width = maxX - minX + 2 * this.#innerMargin,\n      height = maxY - minY + 2 * this.#innerMargin;\n    this.#bbox = {\n      x,\n      y,\n      width,\n      height,\n      lastPoint: [lastPointX, lastPointY],\n    };\n  }\n  get box() {\n    return this.#bbox;\n  }\n  getNewOutline(thickness, innerMargin) {\n    const { x, y, width, height } = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = new FreeOutliner(\n      {\n        x: this.#points[0] * sx + tx,\n        y: this.#points[1] * sy + ty,\n      },\n      this.#box,\n      this.#scaleFactor,\n      thickness,\n      this.#isLTR,\n      innerMargin ?? this.#innerMargin,\n    );\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty,\n      });\n    }\n    return outliner.getOutlines();\n  }\n} // CONCATENATED MODULE: ./src/display/editor/color_picker.js\n\nclass ColorPicker {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundPointerDown = this.#pointerDown.bind(this);\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #uiManager = null;\n  #type;\n  static get _keyboardManager() {\n    return shadow(\n      this,\n      '_keyboardManager',\n      new KeyboardManager([\n        [['Escape', 'mac+Escape'], ColorPicker.prototype._hideDropdownFromKeyboard],\n        [[' ', 'mac+ '], ColorPicker.prototype._colorSelectFromKeyboard],\n        [\n          ['ArrowDown', 'ArrowRight', 'mac+ArrowDown', 'mac+ArrowRight'],\n          ColorPicker.prototype._moveToNext,\n        ],\n        [\n          ['ArrowUp', 'ArrowLeft', 'mac+ArrowUp', 'mac+ArrowLeft'],\n          ColorPicker.prototype._moveToPrevious,\n        ],\n        [['Home', 'mac+Home'], ColorPicker.prototype._moveToBeginning],\n        [['End', 'mac+End'], ColorPicker.prototype._moveToEnd],\n      ]),\n    );\n  }\n  constructor({ editor = null, uiManager = null }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor =\n      editor?.color || this.#uiManager?.highlightColors.values().next().value || '#FFFF98';\n  }\n  renderButton() {\n    const button = (this.#button = document.createElement('button'));\n    button.className = 'colorPicker';\n    button.tabIndex = '0';\n    button.setAttribute('data-l10n-id', 'pdfjs-editor-colorpicker-button');\n    button.setAttribute('aria-haspopup', true);\n    button.addEventListener('click', this.#openDropdown.bind(this));\n    button.addEventListener('keydown', this.#boundKeyDown);\n    const swatch = (this.#buttonSwatch = document.createElement('span'));\n    swatch.className = 'swatch';\n    swatch.setAttribute('aria-hidden', true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = (this.#dropdown = this.#getDropdownRoot());\n    dropdown.setAttribute('aria-orientation', 'horizontal');\n    dropdown.setAttribute('aria-labelledby', 'highlightColorPickerLabel');\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement('div');\n    div.addEventListener('contextmenu', noContextMenu);\n    div.className = 'dropdown';\n    div.role = 'listbox';\n    div.setAttribute('aria-multiselectable', false);\n    div.setAttribute('aria-orientation', 'vertical');\n    div.setAttribute('data-l10n-id', 'pdfjs-editor-colorpicker-dropdown');\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement('button');\n      button.tabIndex = '0';\n      button.role = 'option';\n      button.setAttribute('data-color', color);\n      button.title = name;\n      button.setAttribute('data-l10n-id', `pdfjs-editor-colorpicker-${name}`);\n      const swatch = document.createElement('span');\n      button.append(swatch);\n      swatch.className = 'swatch';\n      swatch.style.backgroundColor = color;\n      button.setAttribute('aria-selected', color === this.#defaultColor);\n      button.addEventListener('click', this.#colorSelect.bind(this, color));\n      div.append(button);\n    }\n    div.addEventListener('keydown', this.#boundKeyDown);\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch('switchannotationeditorparams', {\n      source: this,\n      type: this.#type,\n      value: color,\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute('data-color');\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    window.addEventListener('pointerdown', this.#boundPointerDown);\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove('hidden');\n      return;\n    }\n    const root = (this.#dropdown = this.#getDropdownRoot());\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add('hidden');\n    window.removeEventListener('pointerdown', this.#boundPointerDown);\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains('hidden');\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard,\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute('aria-selected', i.next().value === color);\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n} // CONCATENATED MODULE: ./src/display/editor/highlight.js\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #boundKeydown = this.#keydown.bind(this);\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = '';\n  #thickness;\n  #methodOfCreation = '';\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _l10nPromise;\n  static _type = 'highlight';\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = '';\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(\n      this,\n      '_keyboardManager',\n      new KeyboardManager([\n        [\n          ['ArrowLeft', 'mac+ArrowLeft'],\n          proto._moveCaret,\n          {\n            args: [0],\n          },\n        ],\n        [\n          ['ArrowRight', 'mac+ArrowRight'],\n          proto._moveCaret,\n          {\n            args: [1],\n          },\n        ],\n        [\n          ['ArrowUp', 'mac+ArrowUp'],\n          proto._moveCaret,\n          {\n            args: [2],\n          },\n        ],\n        [\n          ['ArrowDown', 'mac+ArrowDown'],\n          proto._moveCaret,\n          {\n            args: [3],\n          },\n        ],\n      ]),\n    );\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: 'highlightEditor',\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || '';\n    this.#text = params.text || '';\n    this._isDraggable = false;\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: 'added',\n      type: this.#isFreeHighlight ? 'free_highlight' : 'highlight',\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation,\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: 'highlight',\n      color: this._uiManager.highlightColorNames.get(this.color),\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get('color').size,\n    };\n  }\n  #createOutlines() {\n    const outliner = new Outliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    ({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n    } = this.#highlightOutlines.box);\n    const outlinerForOutline = new Outliner(\n      this.#boxes,\n      0.0025,\n      0.001,\n      this._uiManager.direction === 'ltr',\n    );\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const { lastPoint } = this.#focusOutlines.box;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({ highlightOutlines, highlightId, clipPathId }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(\n      this.#thickness / 2 + extraThickness,\n      0.0025,\n    );\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeLine(highlightId, highlightOutlines);\n      this.#outlineId = this.parent.drawLayer.highlightOutline(this.#focusOutlines);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateLine(this.#id, highlightOutlines);\n      this.parent.drawLayer.updateBox(\n        this.#id,\n        HighlightEditor.#rotateBbox(\n          this.#highlightOutlines.box,\n          (angle - this.rotation + 360) % 360,\n        ),\n      );\n      this.parent.drawLayer.updateLine(this.#outlineId, this.#focusOutlines);\n      this.parent.drawLayer.updateBox(\n        this.#outlineId,\n        HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      );\n    }\n    const { x, y, width, height } = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90: {\n        const [pageWidth, pageHeight] = this.parentDimensions;\n        this.x = y;\n        this.y = 1 - x;\n        this.width = (width * pageHeight) / pageWidth;\n        this.height = (height * pageWidth) / pageHeight;\n        break;\n      }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270: {\n        const [pageWidth, pageHeight] = this.parentDimensions;\n        this.x = 1 - y;\n        this.y = x;\n        this.width = (width * pageHeight) / pageWidth;\n        this.height = (height * pageWidth) / pageHeight;\n        break;\n      }\n    }\n    const { lastPoint } = this.#focusOutlines.box;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || '#fff066';\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor],\n      [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness],\n    ];\n  }\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor],\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,\n        this.#thickness || HighlightEditor._defaultThickness,\n      ],\n      [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight],\n    ];\n  }\n  #updateColor(color) {\n    const setColor = (col) => {\n      this.color = col;\n      this.parent?.drawLayer.changeColor(this.#id, col);\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n    this._reportTelemetry(\n      {\n        action: 'color_changed',\n        color: this._uiManager.highlightColorNames.get(color),\n      },\n      true,\n    );\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = (th) => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n    this._reportTelemetry(\n      {\n        action: 'thickness_changed',\n        thickness,\n      },\n      true,\n    );\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({\n        editor: this,\n      });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle('disabled', true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle('disabled', false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded() {\n    this.parent.addUndoableEditor(this);\n    this.div.focus();\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: 'deleted',\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains('selectedEditor');\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2),\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({ id: this.#id, clipPathId: this.#clipPathId } = parent.drawLayer.highlight(\n      this.#highlightOutlines,\n      this.color,\n      this.#opacity,\n    ));\n    this.#outlineId = parent.drawLayer.highlightOutline(this.#focusOutlines);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox({ x, y, width, height }, angle) {\n    switch (angle) {\n      case 90:\n        return {\n          x: 1 - y - height,\n          y: x,\n          width: height,\n          height: width,\n        };\n      case 180:\n        return {\n          x: 1 - x - width,\n          y: 1 - y - height,\n          width,\n          height,\n        };\n      case 270:\n        return {\n          x: y,\n          y: 1 - x - width,\n          width: height,\n          height: width,\n        };\n    }\n    return {\n      x,\n      y,\n      width,\n      height,\n    };\n  }\n  rotate(angle) {\n    const { drawLayer } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox(this, angle);\n    }\n    drawLayer.rotate(this.#id, angle);\n    drawLayer.rotate(this.#outlineId, angle);\n    drawLayer.updateBox(this.#id, box);\n    drawLayer.updateBox(\n      this.#outlineId,\n      HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n    );\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute('aria-label', this.#text);\n      div.setAttribute('role', 'mark');\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add('free');\n    } else {\n      this.div.addEventListener('keydown', this.#boundKeydown);\n    }\n    const highlightDiv = (this.#highlightDiv = document.createElement('div'));\n    div.append(highlightDiv);\n    highlightDiv.setAttribute('aria-hidden', 'true');\n    highlightDiv.className = 'internal';\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, ['pointerover', 'pointerleave']);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    this.parent.drawLayer.addClass(this.#outlineId, 'hovered');\n  }\n  pointerleave() {\n    this.parent.drawLayer.removeClass(this.#outlineId, 'hovered');\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, 'hovered');\n    this.parent?.drawLayer.addClass(this.#outlineId, 'selected');\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, 'selected');\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.show(this.#id, visible);\n      this.parent.drawLayer.show(this.#outlineId, visible);\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const boxes = this.#boxes;\n    const quadPoints = new Array(boxes.length * 8);\n    let i = 0;\n    for (const { x, y, width, height } of boxes) {\n      const sx = x * pageWidth;\n      const sy = (1 - y - height) * pageHeight;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy + height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, { target: textLayer, x, y }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = textLayer.getBoundingClientRect();\n    const pointerMove = (e) => {\n      this.#highlightMove(parent, e);\n    };\n    const pointerDownOptions = {\n      capture: true,\n      passive: false,\n    };\n    const pointerDown = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    const pointerUpCallback = (e) => {\n      textLayer.removeEventListener('pointermove', pointerMove);\n      window.removeEventListener('blur', pointerUpCallback);\n      window.removeEventListener('pointerup', pointerUpCallback);\n      window.removeEventListener('pointerdown', pointerDown, pointerDownOptions);\n      window.removeEventListener('contextmenu', noContextMenu);\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener('blur', pointerUpCallback);\n    window.addEventListener('pointerup', pointerUpCallback);\n    window.addEventListener('pointerdown', pointerDown, pointerDownOptions);\n    window.addEventListener('contextmenu', noContextMenu);\n    textLayer.addEventListener('pointermove', pointerMove);\n    this._freeHighlight = new FreeOutliner(\n      {\n        x,\n        y,\n      },\n      [layerX, layerY, parentWidth, parentHeight],\n      parent.scale,\n      this._defaultThickness / 2,\n      isLTR,\n      0.001,\n    );\n    ({ id: this._freeHighlightId, clipPathId: this._freeHighlightClipId } =\n      parent.drawLayer.highlight(\n        this._freeHighlight,\n        this._defaultColor,\n        this._defaultOpacity,\n        true,\n      ));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updatePath(this._freeHighlightId, this._freeHighlight);\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: 'main_toolbar',\n      });\n    } else {\n      parent.drawLayer.removeFreeHighlight(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = '';\n  }\n  static deserialize(data, parent, uiManager) {\n    const editor = super.deserialize(data, parent, uiManager);\n    const {\n      rect: [blX, blY, trX, trY],\n      color,\n      quadPoints,\n    } = data;\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = data.opacity;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    editor.width = (trX - blX) / pageWidth;\n    editor.height = (trY - blY) / pageHeight;\n    const boxes = (editor.#boxes = []);\n    for (let i = 0; i < quadPoints.length; i += 8) {\n      boxes.push({\n        x: (quadPoints[4] - trX) / pageWidth,\n        y: (trY - (1 - quadPoints[i + 5])) / pageHeight,\n        width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n        height: (quadPoints[i + 5] - quadPoints[i + 1]) / pageHeight,\n      });\n    }\n    editor.#createOutlines();\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    return {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId,\n    };\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n} // CONCATENATED MODULE: ./src/display/editor/ink.js\n\nclass InkEditor extends AnnotationEditor {\n  #baseHeight = 0;\n  #baseWidth = 0;\n  #boundCanvasPointermove = this.canvasPointermove.bind(this);\n  #boundCanvasPointerleave = this.canvasPointerleave.bind(this);\n  #boundCanvasPointerup = this.canvasPointerup.bind(this);\n  #boundCanvasPointerdown = this.canvasPointerdown.bind(this);\n  #canvasContextMenuTimeoutId = null;\n  #currentPath2D = new Path2D();\n  #disableEditing = false;\n  #hasSomethingToDraw = false;\n  #isCanvasInitialized = false;\n  #observer = null;\n  #realWidth = 0;\n  #realHeight = 0;\n  #requestFrameCallback = null;\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 1;\n  static _type = 'ink';\n  static _editorType = AnnotationEditorType.INK;\n  constructor(params) {\n    super({\n      ...params,\n      name: 'inkEditor',\n    });\n    this.color = params.color || null;\n    this.thickness = params.thickness || null;\n    this.opacity = params.opacity || null;\n    this.paths = [];\n    this.bezierPath2D = [];\n    this.allRawPaths = [];\n    this.currentPath = [];\n    this.scaleFactor = 1;\n    this.translationX = this.translationY = 0;\n    this.x = 0;\n    this.y = 0;\n    this._willKeepAspectRatio = true;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        InkEditor._defaultThickness = value;\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        InkEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        InkEditor._defaultOpacity = value / 100;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        this.#updateThickness(value);\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        this.#updateOpacity(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.INK_THICKNESS, InkEditor._defaultThickness],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        InkEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n      [AnnotationEditorParamsType.INK_OPACITY, Math.round(InkEditor._defaultOpacity * 100)],\n    ];\n  }\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.INK_THICKNESS, this.thickness || InkEditor._defaultThickness],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        this.color || InkEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n      [\n        AnnotationEditorParamsType.INK_OPACITY,\n        Math.round(100 * (this.opacity ?? InkEditor._defaultOpacity)),\n      ],\n    ];\n  }\n  #updateThickness(thickness) {\n    const setThickness = (th) => {\n      this.thickness = th;\n      this.#fitToContent();\n    };\n    const savedThickness = this.thickness;\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n  #updateColor(color) {\n    const setColor = (col) => {\n      this.color = col;\n      this.#redraw();\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n  #updateOpacity(opacity) {\n    const setOpacity = (op) => {\n      this.opacity = op;\n      this.#redraw();\n    };\n    opacity /= 100;\n    const savedOpacity = this.opacity;\n    this.addCommands({\n      cmd: setOpacity.bind(this, opacity),\n      undo: setOpacity.bind(this, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_OPACITY,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.canvas) {\n      this.#createCanvas();\n      this.#createObserver();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n      this.#setCanvasDims();\n    }\n    this.#fitToContent();\n  }\n  remove() {\n    if (this.canvas === null) {\n      return;\n    }\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.remove();\n    this.canvas = null;\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n      this.#canvasContextMenuTimeoutId = null;\n    }\n    this.#observer.disconnect();\n    this.#observer = null;\n    super.remove();\n  }\n  setParent(parent) {\n    if (!this.parent && parent) {\n      this._uiManager.removeShouldRescale(this);\n    } else if (this.parent && parent === null) {\n      this._uiManager.addShouldRescale(this);\n    }\n    super.setParent(parent);\n  }\n  onScaleChanging() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const width = this.width * parentWidth;\n    const height = this.height * parentHeight;\n    this.setDimensions(width, height);\n  }\n  enableEditMode() {\n    if (this.#disableEditing || this.canvas === null) {\n      return;\n    }\n    super.enableEditMode();\n    this._isDraggable = false;\n    this.canvas.addEventListener('pointerdown', this.#boundCanvasPointerdown);\n  }\n  disableEditMode() {\n    if (!this.isInEditMode() || this.canvas === null) {\n      return;\n    }\n    super.disableEditMode();\n    this._isDraggable = !this.isEmpty();\n    this.div.classList.remove('editing');\n    this.canvas.removeEventListener('pointerdown', this.#boundCanvasPointerdown);\n  }\n  onceAdded() {\n    this._isDraggable = !this.isEmpty();\n  }\n  isEmpty() {\n    return this.paths.length === 0 || (this.paths.length === 1 && this.paths[0].length === 0);\n  }\n  #getInitialBBox() {\n    const {\n      parentRotation,\n      parentDimensions: [width, height],\n    } = this;\n    switch (parentRotation) {\n      case 90:\n        return [0, height, height, width];\n      case 180:\n        return [width, height, width, height];\n      case 270:\n        return [width, 0, height, width];\n      default:\n        return [0, 0, width, height];\n    }\n  }\n  #setStroke() {\n    const { ctx, color, opacity, thickness, parentScale, scaleFactor } = this;\n    ctx.lineWidth = (thickness * parentScale) / scaleFactor;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n    ctx.miterLimit = 10;\n    ctx.strokeStyle = `${color}${opacityToHex(opacity)}`;\n  }\n  #startDrawing(x, y) {\n    this.canvas.addEventListener('contextmenu', noContextMenu);\n    this.canvas.addEventListener('pointerleave', this.#boundCanvasPointerleave);\n    this.canvas.addEventListener('pointermove', this.#boundCanvasPointermove);\n    this.canvas.addEventListener('pointerup', this.#boundCanvasPointerup);\n    this.canvas.removeEventListener('pointerdown', this.#boundCanvasPointerdown);\n    this.isEditing = true;\n    if (!this.#isCanvasInitialized) {\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.thickness ||= InkEditor._defaultThickness;\n      this.color ||= InkEditor._defaultColor || AnnotationEditor._defaultLineColor;\n      this.opacity ??= InkEditor._defaultOpacity;\n    }\n    this.currentPath.push([x, y]);\n    this.#hasSomethingToDraw = false;\n    this.#setStroke();\n    this.#requestFrameCallback = () => {\n      this.#drawPoints();\n      if (this.#requestFrameCallback) {\n        window.requestAnimationFrame(this.#requestFrameCallback);\n      }\n    };\n    window.requestAnimationFrame(this.#requestFrameCallback);\n  }\n  #draw(x, y) {\n    const [lastX, lastY] = this.currentPath.at(-1);\n    if (this.currentPath.length > 1 && x === lastX && y === lastY) {\n      return;\n    }\n    const currentPath = this.currentPath;\n    let path2D = this.#currentPath2D;\n    currentPath.push([x, y]);\n    this.#hasSomethingToDraw = true;\n    if (currentPath.length <= 2) {\n      path2D.moveTo(...currentPath[0]);\n      path2D.lineTo(x, y);\n      return;\n    }\n    if (currentPath.length === 3) {\n      this.#currentPath2D = path2D = new Path2D();\n      path2D.moveTo(...currentPath[0]);\n    }\n    this.#makeBezierCurve(path2D, ...currentPath.at(-3), ...currentPath.at(-2), x, y);\n  }\n  #endPath() {\n    if (this.currentPath.length === 0) {\n      return;\n    }\n    const lastPoint = this.currentPath.at(-1);\n    this.#currentPath2D.lineTo(...lastPoint);\n  }\n  #stopDrawing(x, y) {\n    this.#requestFrameCallback = null;\n    x = Math.min(Math.max(x, 0), this.canvas.width);\n    y = Math.min(Math.max(y, 0), this.canvas.height);\n    this.#draw(x, y);\n    this.#endPath();\n    let bezier;\n    if (this.currentPath.length !== 1) {\n      bezier = this.#generateBezierPoints();\n    } else {\n      const xy = [x, y];\n      bezier = [[xy, xy.slice(), xy.slice(), xy]];\n    }\n    const path2D = this.#currentPath2D;\n    const currentPath = this.currentPath;\n    this.currentPath = [];\n    this.#currentPath2D = new Path2D();\n    const cmd = () => {\n      this.allRawPaths.push(currentPath);\n      this.paths.push(bezier);\n      this.bezierPath2D.push(path2D);\n      this._uiManager.rebuild(this);\n    };\n    const undo = () => {\n      this.allRawPaths.pop();\n      this.paths.pop();\n      this.bezierPath2D.pop();\n      if (this.paths.length === 0) {\n        this.remove();\n      } else {\n        if (!this.canvas) {\n          this.#createCanvas();\n          this.#createObserver();\n        }\n        this.#fitToContent();\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true,\n    });\n  }\n  #drawPoints() {\n    if (!this.#hasSomethingToDraw) {\n      return;\n    }\n    this.#hasSomethingToDraw = false;\n    const thickness = Math.ceil(this.thickness * this.parentScale);\n    const lastPoints = this.currentPath.slice(-3);\n    const x = lastPoints.map((xy) => xy[0]);\n    const y = lastPoints.map((xy) => xy[1]);\n    const xMin = Math.min(...x) - thickness;\n    const xMax = Math.max(...x) + thickness;\n    const yMin = Math.min(...y) - thickness;\n    const yMax = Math.max(...y) + thickness;\n    const { ctx } = this;\n    ctx.save();\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n    ctx.stroke(this.#currentPath2D);\n    ctx.restore();\n  }\n  #makeBezierCurve(path2D, x0, y0, x1, y1, x2, y2) {\n    const prevX = (x0 + x1) / 2;\n    const prevY = (y0 + y1) / 2;\n    const x3 = (x1 + x2) / 2;\n    const y3 = (y1 + y2) / 2;\n    path2D.bezierCurveTo(\n      prevX + (2 * (x1 - prevX)) / 3,\n      prevY + (2 * (y1 - prevY)) / 3,\n      x3 + (2 * (x1 - x3)) / 3,\n      y3 + (2 * (y1 - y3)) / 3,\n      x3,\n      y3,\n    );\n  }\n  #generateBezierPoints() {\n    const path = this.currentPath;\n    if (path.length <= 2) {\n      return [[path[0], path[0], path.at(-1), path.at(-1)]];\n    }\n    const bezierPoints = [];\n    let i;\n    let [x0, y0] = path[0];\n    for (i = 1; i < path.length - 2; i++) {\n      const [x1, y1] = path[i];\n      const [x2, y2] = path[i + 1];\n      const x3 = (x1 + x2) / 2;\n      const y3 = (y1 + y2) / 2;\n      const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n      const control2 = [x3 + (2 * (x1 - x3)) / 3, y3 + (2 * (y1 - y3)) / 3];\n      bezierPoints.push([[x0, y0], control1, control2, [x3, y3]]);\n      [x0, y0] = [x3, y3];\n    }\n    const [x1, y1] = path[i];\n    const [x2, y2] = path[i + 1];\n    const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n    const control2 = [x2 + (2 * (x1 - x2)) / 3, y2 + (2 * (y1 - y2)) / 3];\n    bezierPoints.push([[x0, y0], control1, control2, [x2, y2]]);\n    return bezierPoints;\n  }\n  #redraw() {\n    if (this.isEmpty()) {\n      this.#updateTransform();\n      return;\n    }\n    this.#setStroke();\n    const { canvas, ctx } = this;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.#updateTransform();\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n  }\n  commit() {\n    if (this.#disableEditing) {\n      return;\n    }\n    super.commit();\n    this.isEditing = false;\n    this.disableEditMode();\n    this.setInForeground();\n    this.#disableEditing = true;\n    this.div.classList.add('disabled');\n    this.#fitToContent(true);\n    this.select();\n    this.parent.addInkEditorIfNeeded(true);\n    this.moveInDOM();\n    this.div.focus({\n      preventScroll: true,\n    });\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    this.enableEditMode();\n  }\n  canvasPointerdown(event) {\n    if (event.button !== 0 || !this.isInEditMode() || this.#disableEditing) {\n      return;\n    }\n    this.setInForeground();\n    event.preventDefault();\n    if (!this.div.contains(document.activeElement)) {\n      this.div.focus({\n        preventScroll: true,\n      });\n    }\n    this.#startDrawing(event.offsetX, event.offsetY);\n  }\n  canvasPointermove(event) {\n    event.preventDefault();\n    this.#draw(event.offsetX, event.offsetY);\n  }\n  canvasPointerup(event) {\n    event.preventDefault();\n    this.#endDrawing(event);\n  }\n  canvasPointerleave(event) {\n    this.#endDrawing(event);\n  }\n  #endDrawing(event) {\n    this.canvas.removeEventListener('pointerleave', this.#boundCanvasPointerleave);\n    this.canvas.removeEventListener('pointermove', this.#boundCanvasPointermove);\n    this.canvas.removeEventListener('pointerup', this.#boundCanvasPointerup);\n    this.canvas.addEventListener('pointerdown', this.#boundCanvasPointerdown);\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n    }\n    this.#canvasContextMenuTimeoutId = setTimeout(() => {\n      this.#canvasContextMenuTimeoutId = null;\n      this.canvas.removeEventListener('contextmenu', noContextMenu);\n    }, 10);\n    this.#stopDrawing(event.offsetX, event.offsetY);\n    this.addToAnnotationStorage();\n    this.setInBackground();\n  }\n  #createCanvas() {\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.className = 'inkEditorCanvas';\n    this.canvas.setAttribute('data-l10n-id', 'pdfjs-ink-canvas');\n    this.div.append(this.canvas);\n    this.ctx = this.canvas.getContext('2d');\n  }\n  #createObserver() {\n    this.#observer = new ResizeObserver((entries) => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n  get isResizable() {\n    return !this.isEmpty() && this.#disableEditing;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.setAttribute('data-l10n-id', 'pdfjs-ink');\n    const [x, y, w, h] = this.#getInitialBBox();\n    this.setAt(x, y, 0, 0);\n    this.setDims(w, h);\n    this.#createCanvas();\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAspectRatio(this.width * parentWidth, this.height * parentHeight);\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight,\n      );\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n      this.#redraw();\n      this.div.classList.add('disabled');\n    } else {\n      this.div.classList.add('editing');\n      this.enableEditMode();\n    }\n    this.#createObserver();\n    return this.div;\n  }\n  #setCanvasDims() {\n    if (!this.#isCanvasInitialized) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.canvas.width = Math.ceil(this.width * parentWidth);\n    this.canvas.height = Math.ceil(this.height * parentHeight);\n    this.#updateTransform();\n  }\n  setDimensions(width, height) {\n    const roundedWidth = Math.round(width);\n    const roundedHeight = Math.round(height);\n    if (this.#realWidth === roundedWidth && this.#realHeight === roundedHeight) {\n      return;\n    }\n    this.#realWidth = roundedWidth;\n    this.#realHeight = roundedHeight;\n    this.canvas.style.visibility = 'hidden';\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.fixAndSetPosition();\n    if (this.#disableEditing) {\n      this.#setScaleFactor(width, height);\n    }\n    this.#setCanvasDims();\n    this.#redraw();\n    this.canvas.style.visibility = 'visible';\n    this.fixDims();\n  }\n  #setScaleFactor(width, height) {\n    const padding = this.#getPadding();\n    const scaleFactorW = (width - padding) / this.#baseWidth;\n    const scaleFactorH = (height - padding) / this.#baseHeight;\n    this.scaleFactor = Math.min(scaleFactorW, scaleFactorH);\n  }\n  #updateTransform() {\n    const padding = this.#getPadding() / 2;\n    this.ctx.setTransform(\n      this.scaleFactor,\n      0,\n      0,\n      this.scaleFactor,\n      this.translationX * this.scaleFactor + padding,\n      this.translationY * this.scaleFactor + padding,\n    );\n  }\n  static #buildPath2D(bezier) {\n    const path2D = new Path2D();\n    for (let i = 0, ii = bezier.length; i < ii; i++) {\n      const [first, control1, control2, second] = bezier[i];\n      if (i === 0) {\n        path2D.moveTo(...first);\n      }\n      path2D.bezierCurveTo(\n        control1[0],\n        control1[1],\n        control2[0],\n        control2[1],\n        second[0],\n        second[1],\n      );\n    }\n    return path2D;\n  }\n  static #toPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] += blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] + blX;\n          points[i + 1] = x + blY;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] += blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trX - points[i + 1];\n          points[i + 1] = trY - x;\n        }\n        break;\n      default:\n        throw new Error('Invalid rotation');\n    }\n    return points;\n  }\n  static #fromPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] -= blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] - blY;\n          points[i + 1] = x - blX;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] -= blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trY - points[i + 1];\n          points[i + 1] = trX - x;\n        }\n        break;\n      default:\n        throw new Error('Invalid rotation');\n    }\n    return points;\n  }\n  #serializePaths(s, tx, ty, rect) {\n    const paths = [];\n    const padding = this.thickness / 2;\n    const shiftX = s * tx + padding;\n    const shiftY = s * ty + padding;\n    for (const bezier of this.paths) {\n      const buffer = [];\n      const points = [];\n      for (let j = 0, jj = bezier.length; j < jj; j++) {\n        const [first, control1, control2, second] = bezier[j];\n        if (first[0] === second[0] && first[1] === second[1] && jj === 1) {\n          const p0 = s * first[0] + shiftX;\n          const p1 = s * first[1] + shiftY;\n          buffer.push(p0, p1);\n          points.push(p0, p1);\n          break;\n        }\n        const p10 = s * first[0] + shiftX;\n        const p11 = s * first[1] + shiftY;\n        const p20 = s * control1[0] + shiftX;\n        const p21 = s * control1[1] + shiftY;\n        const p30 = s * control2[0] + shiftX;\n        const p31 = s * control2[1] + shiftY;\n        const p40 = s * second[0] + shiftX;\n        const p41 = s * second[1] + shiftY;\n        if (j === 0) {\n          buffer.push(p10, p11);\n          points.push(p10, p11);\n        }\n        buffer.push(p20, p21, p30, p31, p40, p41);\n        points.push(p20, p21);\n        if (j === jj - 1) {\n          points.push(p40, p41);\n        }\n      }\n      paths.push({\n        bezier: InkEditor.#toPDFCoordinates(buffer, rect, this.rotation),\n        points: InkEditor.#toPDFCoordinates(points, rect, this.rotation),\n      });\n    }\n    return paths;\n  }\n  #getBbox() {\n    let xMin = Infinity;\n    let xMax = -Infinity;\n    let yMin = Infinity;\n    let yMax = -Infinity;\n    for (const path of this.paths) {\n      for (const [first, control1, control2, second] of path) {\n        const bbox = Util.bezierBoundingBox(...first, ...control1, ...control2, ...second);\n        xMin = Math.min(xMin, bbox[0]);\n        yMin = Math.min(yMin, bbox[1]);\n        xMax = Math.max(xMax, bbox[2]);\n        yMax = Math.max(yMax, bbox[3]);\n      }\n    }\n    return [xMin, yMin, xMax, yMax];\n  }\n  #getPadding() {\n    return this.#disableEditing ? Math.ceil(this.thickness * this.parentScale) : 0;\n  }\n  #fitToContent(firstTime = false) {\n    if (this.isEmpty()) {\n      return;\n    }\n    if (!this.#disableEditing) {\n      this.#redraw();\n      return;\n    }\n    const bbox = this.#getBbox();\n    const padding = this.#getPadding();\n    this.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    this.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    const width = Math.ceil(padding + this.#baseWidth * this.scaleFactor);\n    const height = Math.ceil(padding + this.#baseHeight * this.scaleFactor);\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setAspectRatio(width, height);\n    const prevTranslationX = this.translationX;\n    const prevTranslationY = this.translationY;\n    this.translationX = -bbox[0];\n    this.translationY = -bbox[1];\n    this.#setCanvasDims();\n    this.#redraw();\n    this.#realWidth = width;\n    this.#realHeight = height;\n    this.setDims(width, height);\n    const unscaledPadding = firstTime ? padding / this.scaleFactor / 2 : 0;\n    this.translate(\n      prevTranslationX - this.translationX - unscaledPadding,\n      prevTranslationY - this.translationY - unscaledPadding,\n    );\n  }\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof InkAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.thickness = data.thickness;\n    editor.color = Util.makeHexColor(...data.color);\n    editor.opacity = data.opacity;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const width = editor.width * pageWidth;\n    const height = editor.height * pageHeight;\n    const scaleFactor = editor.parentScale;\n    const padding = data.thickness / 2;\n    editor.#disableEditing = true;\n    editor.#realWidth = Math.round(width);\n    editor.#realHeight = Math.round(height);\n    const { paths, rect, rotation } = data;\n    for (let { bezier } of paths) {\n      bezier = InkEditor.#fromPDFCoordinates(bezier, rect, rotation);\n      const path = [];\n      editor.paths.push(path);\n      let p0 = scaleFactor * (bezier[0] - padding);\n      let p1 = scaleFactor * (bezier[1] - padding);\n      for (let i = 2, ii = bezier.length; i < ii; i += 6) {\n        const p10 = scaleFactor * (bezier[i] - padding);\n        const p11 = scaleFactor * (bezier[i + 1] - padding);\n        const p20 = scaleFactor * (bezier[i + 2] - padding);\n        const p21 = scaleFactor * (bezier[i + 3] - padding);\n        const p30 = scaleFactor * (bezier[i + 4] - padding);\n        const p31 = scaleFactor * (bezier[i + 5] - padding);\n        path.push([\n          [p0, p1],\n          [p10, p11],\n          [p20, p21],\n          [p30, p31],\n        ]);\n        p0 = p30;\n        p1 = p31;\n      }\n      const path2D = this.#buildPath2D(path);\n      editor.bezierPath2D.push(path2D);\n    }\n    const bbox = editor.#getBbox();\n    editor.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    editor.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    editor.#setScaleFactor(width, height);\n    return editor;\n  }\n  serialize() {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);\n    return {\n      annotationType: AnnotationEditorType.INK,\n      color,\n      thickness: this.thickness,\n      opacity: this.opacity,\n      paths: this.#serializePaths(\n        this.scaleFactor / this.parentScale,\n        this.translationX,\n        this.translationY,\n        rect,\n      ),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n  }\n} // CONCATENATED MODULE: ./src/display/editor/stamp.js\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = '';\n  #canvas = null;\n  #observer = null;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = 'stamp';\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: 'stampEditor',\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static get supportedTypes() {\n    const types = ['apng', 'avif', 'bmp', 'gif', 'jpeg', 'png', 'svg+xml', 'webp', 'x-icon'];\n    return shadow(\n      this,\n      'supportedTypes',\n      types.map((type) => `image/${type}`),\n    );\n  }\n  static get supportedTypesStr() {\n    return shadow(this, 'supportedTypesStr', this.supportedTypes.join(','));\n  }\n  static isHandlingMimeForPasting(mime) {\n    return this.supportedTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor(AnnotationEditorType.STAMP, {\n      bitmapFile: item.getAsFile(),\n    });\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (this.#canvas) {\n      this.div.focus();\n    }\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager\n        .getFromId(this.#bitmapId)\n        .then((data) => this.#getBitmapFetched(data, true))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromUrl(url)\n        .then((data) => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromFile(file)\n        .then((data) => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = StampEditor.supportedTypesStr;\n    this.#bitmapPromise = new Promise((resolve) => {\n      input.addEventListener('change', async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      });\n      input.addEventListener('cancel', () => {\n        this.remove();\n        resolve();\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      this.#observer?.disconnect();\n      this.#observer = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded() {\n    this._isDraggable = true;\n    this.div.focus();\n  }\n  isEmpty() {\n    return !(\n      this.#bitmapPromise ||\n      this.#bitmap ||\n      this.#bitmapUrl ||\n      this.#bitmapFile ||\n      this.#bitmapId\n    );\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.addAltTextButton();\n    if (this.#bitmap) {\n      this.#createCanvas();\n    } else {\n      this.#getBitmap();\n    }\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight,\n      );\n    }\n    return this.div;\n  }\n  #createCanvas() {\n    const { div } = this;\n    let { width, height } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min((MAX_RATIO * pageWidth) / width, (MAX_RATIO * pageHeight) / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims((width * parentWidth) / pageWidth, (height * parentHeight) / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = (this.#canvas = document.createElement('canvas'));\n    div.append(canvas);\n    div.hidden = false;\n    this.#drawBitmap(width, height);\n    this.#createObserver();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: 'inserted_image',\n    });\n    if (this.#bitmapFileName) {\n      canvas.setAttribute('aria-label', this.#bitmapFileName);\n    }\n  }\n  #setDimensions(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setDims(width, height);\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap(width, height);\n    }, TIME_TO_WAIT);\n  }\n  #scaleBitmap(width, height) {\n    const { width: bitmapWidth, height: bitmapHeight } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext('2d');\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap(width, height) {\n    width = Math.ceil(width);\n    height = Math.ceil(height);\n    const canvas = this.#canvas;\n    if (!canvas || (canvas.width === width && canvas.height === height)) {\n      return;\n    }\n    canvas.width = width;\n    canvas.height = height;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(width, height);\n    if (this._uiManager.hasMLManager && !this.hasAltText()) {\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext('2d');\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, width, height);\n      this._uiManager\n        .mlGuess({\n          service: 'image-to-text',\n          request: {\n            data: ctx.getImageData(0, 0, width, height).data,\n            width,\n            height,\n            channels: 4,\n          },\n        })\n        .then((response) => {\n          const altText = response?.output || '';\n          if (this.parent && altText && !this.hasAltText()) {\n            this.altTextData = {\n              altText,\n              decorative: false,\n            };\n          }\n        });\n    }\n    const ctx = canvas.getContext('2d');\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, width, height);\n  }\n  getImageForAltText() {\n    return this.#canvas;\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement('canvas');\n      ({ width: canvas.width, height: canvas.height } = this.#bitmap);\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext('2d');\n      ctx.drawImage(\n        this.#bitmap,\n        0,\n        0,\n        this.#bitmap.width,\n        this.#bitmap.height,\n        0,\n        0,\n        width,\n        height,\n      );\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  #createObserver() {\n    this.#observer = new ResizeObserver((entries) => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.#setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof StampAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    const { rect, bitmapUrl, bitmapId, isSvg, accessibilityData } = data;\n    if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId,\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.altTextData;\n      return serialized;\n    }\n    const { decorative, altText } = this.altTextData;\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: 'Figure',\n        alt: altText,\n      };\n    }\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg\n      ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1])\n      : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized,\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n} // CONCATENATED MODULE: ./src/display/editor/annotation_editor_layer.js\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #boundPointerup = null;\n  #boundPointerdown = null;\n  #boundTextLayerPointerDown = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isCleaningUp = false;\n  #isDisabling = false;\n  #textLayer = null;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map(\n    [FreeTextEditor, InkEditor, StampEditor, HighlightEditor].map((type) => [\n      type._editorType,\n      type,\n    ]),\n  );\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n,\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(mode) {\n    this.#uiManager.updateToolbar(mode);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.addInkEditorIfNeeded(false);\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.disableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  addInkEditorIfNeeded(isCommitting) {\n    if (this.#uiManager.getMode() !== AnnotationEditorType.INK) {\n      return;\n    }\n    if (!isCommitting) {\n      for (const editor of this.#editors.values()) {\n        if (editor.isEmpty()) {\n          editor.setInBackground();\n          return;\n        }\n      }\n    }\n    const editor = this.createAndAddNewEditor(\n      {\n        offsetX: 0,\n        offsetY: 0,\n      },\n      false,\n    );\n    editor.setInBackground();\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle('disabled', !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle('disabled', !enabled);\n  }\n  enable() {\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const { id } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          editor.renderAnnotationElement(editable);\n          editor.show(false);\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#boundTextLayerPointerDown) {\n      this.#boundTextLayerPointerDown = this.#textLayerPointerDown.bind(this);\n      this.#textLayer.div.addEventListener('pointerdown', this.#boundTextLayerPointerDown);\n      this.#textLayer.div.classList.add('highlighting');\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#boundTextLayerPointerDown) {\n      this.#textLayer.div.removeEventListener('pointerdown', this.#boundTextLayerPointerDown);\n      this.#boundTextLayerPointerDown = null;\n      this.#textLayer.div.classList.remove('highlighting');\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    if (event.target === this.#textLayer.div) {\n      const { isMac } = util_FeatureTest.platform;\n      if (event.button !== 0 || (event.ctrlKey && isMac)) {\n        return;\n      }\n      this.#uiManager.showAllEditors('highlight', true, true);\n      this.#textLayer.div.classList.add('free');\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === 'ltr', event);\n      this.#textLayer.div.addEventListener(\n        'pointerup',\n        () => {\n          this.#textLayer.div.classList.remove('free');\n        },\n        {\n          once: true,\n        },\n      );\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#boundPointerdown) {\n      return;\n    }\n    this.#boundPointerdown = this.pointerdown.bind(this);\n    this.#boundPointerup = this.pointerup.bind(this);\n    this.div.addEventListener('pointerdown', this.#boundPointerdown);\n    this.div.addEventListener('pointerup', this.#boundPointerup);\n  }\n  disableClick() {\n    if (!this.#boundPointerdown) {\n      return;\n    }\n    this.div.removeEventListener('pointerdown', this.#boundPointerdown);\n    this.div.removeEventListener('pointerup', this.#boundPointerup);\n    this.#boundPointerdown = null;\n    this.#boundPointerup = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const { annotationElementId } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n    if (!this.#isCleaningUp) {\n      this.addInkEditorIfNeeded(false);\n    }\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded();\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const { activeElement } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\n            'focusin',\n            () => {\n              editor._focusEventsAllowed = true;\n            },\n            {\n              once: true,\n            },\n          );\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(\n      this.div,\n      editor.div,\n      editor.contentDiv,\n      true,\n    );\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false,\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  pasteEditor(mode, params) {\n    this.#uiManager.updateToolbar(mode);\n    this.#uiManager.updateMode(mode);\n    const { offsetX, offsetY } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  deserialize(data) {\n    return (\n      AnnotationEditorLayer.#editorTypes\n        .get(data.annotationType ?? data.annotationEditorType)\n        ?.deserialize(data, this, this.#uiManager) || null\n    );\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const { x, y, width, height } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] =\n      this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY,\n    };\n  }\n  addNewEditor() {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  isSelected(editor) {\n    return this.#uiManager.isSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const { isMac } = util_FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    if (this.#uiManager.getMode() === AnnotationEditorType.STAMP) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const { isMac } = util_FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  destroy() {\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    this.#isCleaningUp = true;\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n    this.#isCleaningUp = false;\n  }\n  render({ viewport }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({ viewport }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation,\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n    this.addInkEditorIfNeeded(false);\n  }\n  get pageDimensions() {\n    const { pageWidth, pageHeight } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n} // CONCATENATED MODULE: ./src/display/draw_layer.js\n\nclass DrawLayer {\n  #parent = null;\n  #id = 0;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  constructor({ pageIndex }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, '_svgFactory', new DOMSVGFactory());\n  }\n  static #setBox(element, { x = 0, y = 0, width = 1, height = 1 } = {}) {\n    const { style } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG(box) {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute('aria-hidden', true);\n    DrawLayer.#setBox(svg, box);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement('clipPath');\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute('id', clipPathId);\n    clipPath.setAttribute('clipPathUnits', 'objectBoundingBox');\n    const clipPathUse = DrawLayer._svgFactory.createElement('use');\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute('href', `#${pathId}`);\n    clipPathUse.classList.add('clip');\n    return clipPathId;\n  }\n  highlight(outlines, color, opacity, isPathUpdatable = false) {\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add('highlight');\n    if (outlines.free) {\n      root.classList.add('free');\n    }\n    const defs = DrawLayer._svgFactory.createElement('defs');\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement('path');\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute('id', pathId);\n    path.setAttribute('d', outlines.toSVGPath());\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = this.#createClipPath(defs, pathId);\n    const use = DrawLayer._svgFactory.createElement('use');\n    root.append(use);\n    root.setAttribute('fill', color);\n    root.setAttribute('fill-opacity', opacity);\n    use.setAttribute('href', `#${pathId}`);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`,\n    };\n  }\n  highlightOutline(outlines) {\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add('highlightOutline');\n    const defs = DrawLayer._svgFactory.createElement('defs');\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement('path');\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute('id', pathId);\n    path.setAttribute('d', outlines.toSVGPath());\n    path.setAttribute('vector-effect', 'non-scaling-stroke');\n    let maskId;\n    if (outlines.free) {\n      root.classList.add('free');\n      const mask = DrawLayer._svgFactory.createElement('mask');\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute('id', maskId);\n      mask.setAttribute('maskUnits', 'objectBoundingBox');\n      const rect = DrawLayer._svgFactory.createElement('rect');\n      mask.append(rect);\n      rect.setAttribute('width', '1');\n      rect.setAttribute('height', '1');\n      rect.setAttribute('fill', 'white');\n      const use = DrawLayer._svgFactory.createElement('use');\n      mask.append(use);\n      use.setAttribute('href', `#${pathId}`);\n      use.setAttribute('stroke', 'none');\n      use.setAttribute('fill', 'black');\n      use.setAttribute('fill-rule', 'nonzero');\n      use.classList.add('mask');\n    }\n    const use1 = DrawLayer._svgFactory.createElement('use');\n    root.append(use1);\n    use1.setAttribute('href', `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute('mask', `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add('mainOutline');\n    use2.classList.add('secondaryOutline');\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeLine(id, line) {\n    const path = this.#toUpdate.get(id);\n    this.#toUpdate.delete(id);\n    this.updateBox(id, line.box);\n    path.setAttribute('d', line.toSVGPath());\n  }\n  updateLine(id, line) {\n    const root = this.#mapping.get(id);\n    const defs = root.firstChild;\n    const path = defs.firstChild;\n    path.setAttribute('d', line.toSVGPath());\n  }\n  removeFreeHighlight(id) {\n    this.remove(id);\n    this.#toUpdate.delete(id);\n  }\n  updatePath(id, line) {\n    this.#toUpdate.get(id).setAttribute('d', line.toSVGPath());\n  }\n  updateBox(id, box) {\n    DrawLayer.#setBox(this.#mapping.get(id), box);\n  }\n  show(id, visible) {\n    this.#mapping.get(id).classList.toggle('hidden', !visible);\n  }\n  rotate(id, angle) {\n    this.#mapping.get(id).setAttribute('data-main-rotation', angle);\n  }\n  changeColor(id, color) {\n    this.#mapping.get(id).setAttribute('fill', color);\n  }\n  changeOpacity(id, opacity) {\n    this.#mapping.get(id).setAttribute('fill-opacity', opacity);\n  }\n  addClass(id, className) {\n    this.#mapping.get(id).classList.add(className);\n  }\n  removeClass(id, className) {\n    this.#mapping.get(id).classList.remove(className);\n  }\n  remove(id) {\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n  }\n} // CONCATENATED MODULE: ./src/pdf.js\n\nconst pdfjsVersion = '4.3.99';\nconst pdfjsBuild = '2a52fda11';\n\nvar __foobar_exports__AbortException = __foobar_exports__.AbortException;\nvar __foobar_exports__AnnotationEditorLayer = __foobar_exports__.AnnotationEditorLayer;\nvar __foobar_exports__AnnotationEditorParamsType = __foobar_exports__.AnnotationEditorParamsType;\nvar __foobar_exports__AnnotationEditorType = __foobar_exports__.AnnotationEditorType;\nvar __foobar_exports__AnnotationEditorUIManager = __foobar_exports__.AnnotationEditorUIManager;\nvar __foobar_exports__AnnotationLayer = __foobar_exports__.AnnotationLayer;\nvar __foobar_exports__AnnotationMode = __foobar_exports__.AnnotationMode;\nvar __foobar_exports__CMapCompressionType = __foobar_exports__.CMapCompressionType;\nvar __foobar_exports__ColorPicker = __foobar_exports__.ColorPicker;\nvar __foobar_exports__DOMSVGFactory = __foobar_exports__.DOMSVGFactory;\nvar __foobar_exports__DrawLayer = __foobar_exports__.DrawLayer;\nvar __foobar_exports__FeatureTest = __foobar_exports__.FeatureTest;\nvar __foobar_exports__GlobalWorkerOptions = __foobar_exports__.GlobalWorkerOptions;\nvar __foobar_exports__ImageKind = __foobar_exports__.ImageKind;\nvar __foobar_exports__InvalidPDFException = __foobar_exports__.InvalidPDFException;\nvar __foobar_exports__MissingPDFException = __foobar_exports__.MissingPDFException;\nvar __foobar_exports__OPS = __foobar_exports__.OPS;\nvar __foobar_exports__Outliner = __foobar_exports__.Outliner;\nvar __foobar_exports__PDFDataRangeTransport = __foobar_exports__.PDFDataRangeTransport;\nvar __foobar_exports__PDFDateString = __foobar_exports__.PDFDateString;\nvar __foobar_exports__PDFWorker = __foobar_exports__.PDFWorker;\nvar __foobar_exports__PasswordResponses = __foobar_exports__.PasswordResponses;\nvar __foobar_exports__PermissionFlag = __foobar_exports__.PermissionFlag;\nvar __foobar_exports__PixelsPerInch = __foobar_exports__.PixelsPerInch;\nvar __foobar_exports__RenderingCancelledException = __foobar_exports__.RenderingCancelledException;\nvar __foobar_exports__TextLayer = __foobar_exports__.TextLayer;\nvar __foobar_exports__UnexpectedResponseException = __foobar_exports__.UnexpectedResponseException;\nvar __foobar_exports__Util = __foobar_exports__.Util;\nvar __foobar_exports__VerbosityLevel = __foobar_exports__.VerbosityLevel;\nvar __foobar_exports__XfaLayer = __foobar_exports__.XfaLayer;\nvar __foobar_exports__build = __foobar_exports__.build;\nvar __foobar_exports__createValidAbsoluteUrl = __foobar_exports__.createValidAbsoluteUrl;\nvar __foobar_exports__fetchData = __foobar_exports__.fetchData;\nvar __foobar_exports__getDocument = __foobar_exports__.getDocument;\nvar __foobar_exports__getFilenameFromUrl = __foobar_exports__.getFilenameFromUrl;\nvar __foobar_exports__getPdfFilenameFromUrl = __foobar_exports__.getPdfFilenameFromUrl;\nvar __foobar_exports__getXfaPageViewport = __foobar_exports__.getXfaPageViewport;\nvar __foobar_exports__isDataScheme = __foobar_exports__.isDataScheme;\nvar __foobar_exports__isPdfFile = __foobar_exports__.isPdfFile;\nvar __foobar_exports__noContextMenu = __foobar_exports__.noContextMenu;\nvar __foobar_exports__normalizeUnicode = __foobar_exports__.normalizeUnicode;\nvar __foobar_exports__renderTextLayer = __foobar_exports__.renderTextLayer;\nvar __foobar_exports__setLayerDimensions = __foobar_exports__.setLayerDimensions;\nvar __foobar_exports__shadow = __foobar_exports__.shadow;\nvar __foobar_exports__updateTextLayer = __foobar_exports__.updateTextLayer;\nvar __foobar_exports__version = __foobar_exports__.version;\nexport {\n  __foobar_exports__AbortException as AbortException,\n  __foobar_exports__AnnotationEditorLayer as AnnotationEditorLayer,\n  __foobar_exports__AnnotationEditorParamsType as AnnotationEditorParamsType,\n  __foobar_exports__AnnotationEditorType as AnnotationEditorType,\n  __foobar_exports__AnnotationEditorUIManager as AnnotationEditorUIManager,\n  __foobar_exports__AnnotationLayer as AnnotationLayer,\n  __foobar_exports__AnnotationMode as AnnotationMode,\n  __foobar_exports__CMapCompressionType as CMapCompressionType,\n  __foobar_exports__ColorPicker as ColorPicker,\n  __foobar_exports__DOMSVGFactory as DOMSVGFactory,\n  __foobar_exports__DrawLayer as DrawLayer,\n  __foobar_exports__FeatureTest as FeatureTest,\n  __foobar_exports__GlobalWorkerOptions as GlobalWorkerOptions,\n  __foobar_exports__ImageKind as ImageKind,\n  __foobar_exports__InvalidPDFException as InvalidPDFException,\n  __foobar_exports__MissingPDFException as MissingPDFException,\n  __foobar_exports__OPS as OPS,\n  __foobar_exports__Outliner as Outliner,\n  __foobar_exports__PDFDataRangeTransport as PDFDataRangeTransport,\n  __foobar_exports__PDFDateString as PDFDateString,\n  __foobar_exports__PDFWorker as PDFWorker,\n  __foobar_exports__PasswordResponses as PasswordResponses,\n  __foobar_exports__PermissionFlag as PermissionFlag,\n  __foobar_exports__PixelsPerInch as PixelsPerInch,\n  __foobar_exports__RenderingCancelledException as RenderingCancelledException,\n  __foobar_exports__TextLayer as TextLayer,\n  __foobar_exports__UnexpectedResponseException as UnexpectedResponseException,\n  __foobar_exports__Util as Util,\n  __foobar_exports__VerbosityLevel as VerbosityLevel,\n  __foobar_exports__XfaLayer as XfaLayer,\n  __foobar_exports__build as build,\n  __foobar_exports__createValidAbsoluteUrl as createValidAbsoluteUrl,\n  __foobar_exports__fetchData as fetchData,\n  __foobar_exports__getDocument as getDocument,\n  __foobar_exports__getFilenameFromUrl as getFilenameFromUrl,\n  __foobar_exports__getPdfFilenameFromUrl as getPdfFilenameFromUrl,\n  __foobar_exports__getXfaPageViewport as getXfaPageViewport,\n  __foobar_exports__isDataScheme as isDataScheme,\n  __foobar_exports__isPdfFile as isPdfFile,\n  __foobar_exports__noContextMenu as noContextMenu,\n  __foobar_exports__normalizeUnicode as normalizeUnicode,\n  __foobar_exports__renderTextLayer as renderTextLayer,\n  __foobar_exports__setLayerDimensions as setLayerDimensions,\n  __foobar_exports__shadow as shadow,\n  __foobar_exports__updateTextLayer as updateTextLayer,\n  __foobar_exports__version as version,\n};\n\n//# sourceMappingURL=pdf.mjs.map\n","// @ts-check\n\nconst DELIM = ' / ';\nconst NL = '\\n';\nconst SP = '    ';\n\n/**\n * @param {TypeOption} data\n * @param {GetItemOptions} opts\n * @param {string} prefix\n */\nfunction getTypeOptionSelectedItems(data, opts = {}, prefix = '') {\n  const name = data.name;\n  const selectionsChoose = data.selectionsChoose;\n  /** @type {string[]} */\n  const arr = [];\n  prefix = [prefix, name].filter(Boolean).join(DELIM);\n  const selections = data.selections;\n  if ((!selections && opts.getAll) || data.selected) {\n    arr.push(prefix);\n  }\n  if (selections) {\n    if (opts.getAll) {\n      const items = selections.map(({ name }) => prefix + DELIM + name);\n      Array.prototype.push.apply(arr, items);\n    } else {\n      const selection = selections.find(({ name }) => name === selectionsChoose);\n      if (selection) {\n        arr.push(prefix + DELIM + selection.name);\n      }\n    }\n  }\n  return arr;\n}\n\n/**\n * @param {TypeType} data\n * @param {GetItemOptions} opts\n * @param {string} prefix\n */\nfunction getTypeTypeSelectedItems(data, opts = {}, prefix = '') {\n  const name = data.title;\n  if (name === ' ') {\n    // debugger;\n  }\n  // name = 'TypeType: ' + name;\n  /** @type {string[]} */\n  const arr = [];\n  prefix = [prefix, name].filter(Boolean).join(DELIM);\n  const options = data.options;\n  options\n    .filter(({ selected }) => opts.getAll || selected)\n    .forEach((it) => {\n      /** @type {string[]} */\n      const items = getTypeOptionSelectedItems(it, opts, prefix);\n      if (items.length) {\n        Array.prototype.push.apply(arr, items);\n      }\n    });\n  return arr;\n}\n\n/** The main method to get all the sub-options for the DataType\n * @param {DataType} data\n * @param {GetItemOptions} opts\n * @param {string} prefix\n */\nexport function getDataTypeSelectedItems(data, opts = {}, prefix = '') {\n  const name = data.name;\n  /** @type {string[]} */\n  const arr = [];\n  if (opts.topLevelPrefix) {\n    prefix = [prefix, name].filter(Boolean).join(DELIM);\n  }\n  const typeTypes = data.types;\n  typeTypes.forEach((it) => {\n    /** @type {string[]} */\n    const items = getTypeTypeSelectedItems(it, opts, prefix);\n    if (items.length) {\n      Array.prototype.push.apply(arr, items);\n    }\n  });\n  return arr;\n}\n\n/** Get all the items\n * @param {DataJson} data\n * @param {GetItemOptions} opts\n * @param {string} prefix\n */\nexport function getAllDataTypeItems(data, opts = {}, prefix = '') {\n  /** @type {string[]} */\n  const arr = [];\n  const nextOpts = { topLevelPrefix: true, ...opts };\n  data.types.forEach((dataType) => {\n    const items = getDataTypeSelectedItems(dataType, nextOpts, prefix);\n    if (items.length) {\n      Array.prototype.push.apply(arr, items);\n    }\n  });\n  return arr;\n}\n\n// DEBUG: Below are the data structure tree/options getters. See the entry point function `showDataStruct` below.\n\n/**\n * @param {TypeSelection} data\n * @param {string} prefix\n * @param {number} level\n */\nfunction showSelection(data, prefix, level) {\n  const sp = SP.repeat(level);\n  const name = data.name;\n  // name = 'Selection: ' + name;\n  let s = '';\n  if (prefix) {\n    s = prefix + DELIM + name + NL;\n  } else {\n    sp + '- ' + name + NL;\n  }\n  return s;\n}\n/**\n * @param {TypeOption} data\n * @param {string} prefix\n * @param {number} level\n */\nfunction showOption(data, prefix, level) {\n  const sp = SP.repeat(level);\n  const name = data.name;\n  // name = 'Option: ' + name;\n  let s = '';\n  if (prefix) {\n    prefix += DELIM + name;\n  } else {\n    s += sp + '- ' + name + NL;\n  }\n  if (data.selections) {\n    s += data.selections.map((it) => showSelection(it, prefix, level + 1)).join('');\n  } else {\n    // s += prefix + NL;\n  }\n  return s;\n}\n/**\n * @param {TypeType} data\n * @param {string} prefix\n * @param {number} level\n */\nfunction showSubTypes(data, prefix, level) {\n  const sp = SP.repeat(level);\n  const name = data.title;\n  // name = 'SubType: ' + name;\n  // const attrs = [\n  //   // Attrs..\n  //   data.colors && '',\n  //   data.checkbox && '',\n  // ].filter(Boolean);\n  // if (attrs.length) {\n  //   name += ' (' + attrs.join(', ') + ')';\n  // }\n  let s = '';\n  if (prefix) {\n    prefix += DELIM + name;\n  } else {\n    s += sp + '- ' + name + NL;\n  }\n  if (data.options) {\n    s += data.options.map((it) => showOption(it, prefix, level + 1)).join('');\n  } else if (prefix) {\n    // s += prefix + NL;\n  }\n  return s;\n}\n/**\n * @param {DataType} data\n * @param {boolean} showPrefix\n * @param {number} level\n */\nexport function showTopLevel(data, showPrefix, level) {\n  const sp = SP.repeat(level);\n  const name = data.name;\n  // name = 'TopLevel: ' + name;\n  let s = '';\n  const prefix = showPrefix ? name : '';\n  // s += prefix + NL;\n  if (!showPrefix) {\n    s += sp + '- ' + name + NL;\n  }\n  s += data.types.map((it) => showSubTypes(it, prefix, level + 1)).join('');\n  return s;\n}\n/** Get the data structure tree/options printable string\n * @param {DataJson} data\n * @param {boolean} showPrefix\n * @param {number} level\n */\nexport function showDataStruct(data, showPrefix = false, level = 0) {\n  return data.types.map((it) => showTopLevel(it, showPrefix, level)).join('');\n}\n","// @ts-check\n\n/** Make periods for long numbers. Returns string presentation of number.\n * @param {string|number} num\n * @param {string} [periodChar=',']\n * @return {string}\n */\nexport function periodizeNumber(num, periodChar = ',') {\n  // periodChar = periodChar || ' ';\n  let numStr = String(num);\n  // If long number...\n  if (numStr.length > 3 && !numStr.match(/\\D/)) {\n    numStr = numStr.replace(/\\B(?=(\\d{3})+(?!\\d))/g, periodChar);\n  }\n  return numStr;\n}\n\n/**\n * @param {number|string} val\n */\nexport function formatPriceToStr(val) {\n  if (typeof val === 'string') {\n    return val;\n  }\n  if (!val) {\n    return '0.00';\n  }\n  let numStr = val.toFixed(2);\n  const parsed = numStr.match(/^(\\d+)[,.](\\d+)$/);\n  if (!parsed) {\n    return periodizeNumber(numStr);\n  }\n  numStr = periodizeNumber(parsed[1]) + '.' + parsed[2];\n  return numStr;\n}\n\n/**\n * @param {string|number} val\n * @return {number}\n */\nexport function parsePriceFromStr(val) {\n  if (typeof val === 'number') {\n    return val;\n  }\n  if (!val) {\n    return 0;\n  }\n  val = val.replace(/[, ]/g, '');\n  const numVal = Number(val);\n  if (isNaN(numVal)) {\n    return 0;\n  }\n  return numVal;\n}\n","// @ts-check\n\nimport { createApp } from 'vue/dist/vue.esm-bundler';\n\nimport { Swiper, SwiperSlide } from 'swiper/vue';\n\nimport axios from 'axios';\n// import html2canvas from 'html2canvas';\n\nimport { getDocument } from '../pdf.mjs';\n\nimport { getDataTypeSelectedItems } from './show-structure';\nimport { formatPriceToStr, parsePriceFromStr } from './numbers';\nimport { getErrorText } from './strings';\nimport { isDev } from './config';\nimport { showErrorToast, showSuccessToast } from './toast';\nimport { ServerDataError } from './ServerDataError';\nimport { saveCostChangesToServer } from './data';\n// import { debugDataStruct } from './helpers';\n\n/** DEBUG: Emulate changes at start */\nconst debugInitialChanges = false;\n\n/** Create global application\n * @param {DataJson} serverData\n * @param {boolean} isManage\n * @return {import('vue').App<Element>}\n */\nexport function createConstructorApp(serverData, isManage) {\n  const appCore = {\n    /**\n     * @param {number} val\n     */\n    formatPrice(val) {\n      return formatPriceToStr(val);\n    },\n    /**\n     * @return {number}\n     */\n    getCurrentDataTypeIndex() {\n      /** @type {DataJson} */\n      const data = this.data;\n      /** @type {number} */\n      const idx = data.types.findIndex(({ selected }) => !!selected);\n      return idx;\n    },\n    /**\n     * @return {DataType | undefined}\n     */\n    getCurrentDataType() {\n      /** @type {DataJson} */\n      const data = this.data;\n      /** Selected data type\n       * @type {DataType | undefined}\n       */\n      const dataType = data.types.find(({ selected }) => !!selected);\n      if (!dataType) {\n        // eslint-disable-next-line no-console\n        console.warn('[getCurrentDataType] No data type selected!');\n        return undefined;\n      }\n      return dataType;\n    },\n    /**\n     * @param {string} reason\n     */\n    calcPrice(reason, reasonId = '') {\n      /** Selected data type\n       * @type {DataType | undefined}\n       */\n      const dataType = this.getCurrentDataType(); // data.types.find(({ selected }) => !!selected);\n      if (!dataType) {\n        // eslint-disable-next-line no-console\n        console.warn('[calcPrice]', reason, reasonId, 'No data type selected!');\n        debugger; // eslint-disable-line no-debugger\n        return;\n      }\n      const selectedItems = getDataTypeSelectedItems(dataType);\n      /* // DEBUG\n       * const selectedItemsCmp = getAllDataTypeItems(this.data);\n       * console.log('[calcPrice] Check items', {\n       *   selectedItems,\n       *   selectedItemsCmp,\n       * });\n       */\n      const { prices } = dataType;\n      const filteredPrices = /** @type {PriceItem[] | undefined} */ (\n        prices\n          ?.map((price, idx) => {\n            const { conditions } = price;\n            if (conditions) {\n              // Unfilter a price entry if any of conditions aren't presented in currently selected items\n              for (const condItem of conditions) {\n                if (!selectedItems.includes(condItem)) {\n                  return null;\n                }\n              }\n            }\n            return /** @type {PriceItem} */ ({\n              _idx: idx,\n              ...price,\n            });\n          })\n          .filter(Boolean)\n      );\n      const count = !this.edition || isNaN(this.edition) ? 1 : this.edition;\n      /* console.log('[calcPrice]', reason, reasonId, {\n       *   filteredPrices,\n       *   prices: { ...prices },\n       *   selectedItems,\n       *   dataType: { ...dataType },\n       *   count,\n       * });\n       */\n      this.filteredPrices = filteredPrices;\n      this.priceUnit = filteredPrices?.reduce((summ, price) => {\n        return summ + parsePriceFromStr(price.unitCost);\n      }, 0);\n      this.priceTotal = isNaN(this.priceUnit) ? 0 : this.priceUnit * count;\n    },\n    /** Handle update of a basic cost field\n     * @param {InputEvent} e\n     */\n    onBasicCostChange(e) {\n      /** @type {number} */\n      const dataTypeIdx = this.getCurrentDataTypeIndex();\n      /** Selected data type\n       * @type {DataType | undefined}\n       */\n      const dataType = this.data.types[dataTypeIdx]; // getCurrentDataType(); // data.types.find(({ selected }) => !!selected);\n      if (!dataType) {\n        // eslint-disable-next-line no-console\n        console.error('[onBasicCostChange] No data type selected!');\n        debugger; // eslint-disable-line no-debugger\n        return;\n      }\n      const prices = dataType.prices;\n      if (!prices) {\n        // eslint-disable-next-line no-console\n        console.error('[onBasicCostChange] Prices data not defined for the DataType!');\n        debugger; // eslint-disable-line no-debugger\n        return;\n      }\n      const node = /** @type {HTMLInputElement} */ (e.target);\n      const { dataset } = node;\n      const idx = dataset.idx;\n      if (idx == undefined || idx == '' || isNaN(Number(idx))) {\n        // eslint-disable-next-line no-console\n        console.error('[onBasicCostChange] Prices data not defined for the DataType!');\n        debugger; // eslint-disable-line no-debugger\n        return;\n      }\n      const idxN = Number(idx);\n      /** @type {PriceItem | undefined } */\n      const price = prices[idxN];\n      if (!price) {\n        // eslint-disable-next-line no-console\n        console.error('[onBasicCostChange] Not found price item for idx: ' + idx);\n        debugger; // eslint-disable-line no-debugger\n        return;\n      }\n      const value = node.value;\n      const parsedValue = parsePriceFromStr(value);\n      price.basicCost = parsedValue;\n      price.unitCost = parsePriceFromStr(price.unitMaterial) * parsedValue;\n      this.pricesHasChanged = true;\n      if (!this.pricesChangedDataTypes.includes(dataTypeIdx)) {\n        this.pricesChangedDataTypes.push(dataTypeIdx);\n      }\n      const reasonId = ['basicCost', idx, value].filter(Boolean).join(': ');\n      /* console.log('[onBasicCostChange]', reasonId, {\n       *   parsedValue,\n       *   value,\n       *   idxN,\n       *   idx,\n       *   prices,\n       *   dataType: { ...dataType },\n       * });\n       */\n      this.calcPrice('onBasicCostChange', reasonId);\n    },\n    /** Save changed data on the server */\n    async saveCostChanges() {\n      /** @type {DataJson} */\n      const data = this.data;\n      /** @type {number[]} */\n      const pricesChangedDataTypes = this.pricesChangedDataTypes;\n      try {\n        const _resData = await saveCostChangesToServer(data, pricesChangedDataTypes);\n        /*\n         * console.log('[saveCostChanges] success: Got data (parsed json)', {\n         *   resData,\n         * });\n         */\n        this.pricesHasChanged = false;\n        this.pricesChangedDataTypes = [];\n        showSuccessToast(' ');\n      } catch (err) {\n        const details = getErrorText(err);\n        const error = new ServerDataError('  ', details);\n        // eslint-disable-next-line no-console\n        console.error('[saveCostChanges] Network error', error.message, {\n          details,\n          err,\n          error,\n        });\n        debugger; // eslint-disable-line no-debugger\n        showErrorToast(error);\n      }\n    },\n    /** Set the topmost level type (DataType)\n     * @param {number} num\n     */\n    async setList(num) {\n      const data = /** @type {DataJson} */ (this.data);\n      /** @type {string | undefined} */\n      let reasonId;\n      data.types.forEach((_el, index) => {\n        const isSelected = num === index;\n        data.types[index].selected = isSelected;\n        if (isSelected) {\n          reasonId = data.types[index].name;\n        }\n      });\n      const item = data.types[num];\n      // item.selected = true;\n      /* // We don't have colors on the top level of `DataType`\n       * if (item?.colors?.length) {\n       *   item?.colors?.forEach((el, index) => {\n       *     el.selected = !index;\n       *   });\n       * }\n       */\n      if (item?.types?.length) {\n        item.types.forEach((el) => {\n          el.options.forEach((/** @type {TypeOption} */ option, /** @type {number} */ idx) => {\n            option.selected = !idx;\n            if (option.count) {\n              option.count = 0;\n            }\n          });\n          if (el?.colors) {\n            el.colors.forEach((color, idx) => {\n              color.selected = !idx;\n            });\n          }\n        });\n      }\n      let color = '';\n      await Promise.all(\n        data.types.map(\n          /** @param {DataType & TypeType} type */\n          async (type) => {\n            if (type.svg) {\n              color = type.colors ? this.getSelected(type.colors)?.code : null;\n              if (type.svgNew) {\n                type.svgNew = this.changeColor(type.svgNew, color);\n              } else {\n                type.svgNew = await this.fetchSvg(type.svg, color);\n              }\n              /* console.log('XXX', {\n               *   type: {...type},\n               * });\n               */\n            }\n            await Promise.all(\n              type.types.map(async (t) => {\n                await Promise.all(\n                  t.options.map(async (option) => {\n                    if (option.svg) {\n                      color = t.colors ? this.getSelected(t.colors)?.code : null;\n                      if (option.svgNew) {\n                        option.svgNew = this.changeColor(option.svgNew, color);\n                      } else {\n                        option.svgNew = await this.fetchSvg(option.svg, color);\n                      }\n                    }\n                  }),\n                );\n              }),\n            );\n          },\n        ),\n      );\n      // TODO: Invoke the method after all the above async op's?\n      this.calcPrice('setList', reasonId);\n    },\n    /** The main property change funciton\n     * @param {Array<TypeColor>} arr\n     * @param {number} num\n     * @param {TypeType | null} mainobj\n     */\n    setProp(arr, num, mainobj = null) {\n      const it = arr[num];\n      const isCheckbox = !!mainobj?.checkbox;\n      const hasColors = !!mainobj?.colors;\n      if (isCheckbox) {\n        it.selected = !it.selected;\n      } else {\n        arr.forEach((el, index) => {\n          el.selected = num === index;\n        });\n      }\n      const reasonValue = arr\n        .filter(({ selected }) => selected)\n        .map(({ name }) => name)\n        .join(', ');\n      const reasonId = [\n        //\n        mainobj?.title,\n        hasColors && arr === mainobj.colors ? 'Color' : 'Option',\n        reasonValue,\n      ]\n        .filter(Boolean)\n        .join(': ');\n      if (mainobj?.colors) {\n        const colorCode = this.getSelected(mainobj.colors)?.code;\n        if (mainobj.svgNew) {\n          mainobj.svgNew = this.changeColor(mainobj.svgNew, colorCode);\n        } else if (this.getSelected(mainobj.options).svgNew) {\n          this.getSelected(mainobj.options).svgNew = this.changeColor(\n            this.getSelected(mainobj.options).svgNew,\n            colorCode,\n          );\n        }\n      }\n      this.calcPrice('setProp', reasonId);\n    },\n    /**\n     * @param {any[]} arr\n     */\n    getSelected(arr) {\n      return arr.find((el) => el.selected);\n    },\n    printHtml() {\n      const captureNode = /** @type {HTMLElement} */ (document.getElementById('capture'));\n      const htmlNode = document.querySelector('html');\n      if (!htmlNode) {\n        throw new Error('    html');\n      }\n      const nWindow = window.open(\n        '',\n        '_blank',\n        'left=0,top=0,width=700,height=600,toolbar=0,scrollbars=0,status=0',\n      );\n      if (nWindow) {\n        const nDoc = nWindow.document;\n        nDoc.title = '   ';\n        const links = document.getElementsByTagName('link');\n        Array.from(links).forEach((node) => {\n          const newNode = document.createElement('link');\n          newNode.setAttribute('rel', node.rel);\n          newNode.setAttribute('href', node.href);\n          nDoc.head.appendChild(newNode);\n        });\n        const newNode = /** @type {HTMLElement} */ (captureNode.cloneNode(true));\n        nDoc.body.classList.add('prntbl');\n        nDoc.body.appendChild(newNode);\n        setTimeout(() => {\n          nWindow.focus();\n          nWindow.print();\n          nWindow.close();\n        }, 100);\n\n        /* // Old way: using html2canvas\n         * const style = document.createElement('style');\n         * style.innerText = `\n         *   .container { display: flex; justify-content: center; align-items: center; }\n         *   canvas { width: 95% !important; height: auto !important; max-height:95%;}\n         *   `;\n         * nDoc.head.appendChild(style);\n         * document.body.classList.add('prntbl');\n         * html2canvas(captureNode).then((canvas) => {\n         *   const container = document.createElement('div');\n         *   container.classList.add('container');\n         *   container.appendChild(canvas);\n         *   nDoc.body.appendChild(container);\n         *   nWindow.focus();\n         *   nWindow.print();\n         *   document.body.classList.remove('prntbl');\n         * });\n         */\n      }\n    },\n    /**\n     * @param {string} link\n     * @param {string | null} color\n     */\n    fetchSvg(link, color = null) {\n      return new Promise((resolve) => {\n        axios.get(link).then((svg) => {\n          resolve(this.changeColor(svg.data, color));\n        });\n      });\n    },\n    /**\n     * @param {string} svg\n     * @param {any} color\n     */\n    changeColor(svg, color) {\n      return color ? svg.replace(/fill=\"[#,a-z,A-Z,0-9]+\"/gm, `fill=\"${color}\"`) : svg;\n    },\n    getEditionCount() {\n      let value = Number(this.edition);\n      if (isNaN(value) || value < 1) {\n        value = 1;\n      }\n      return value;\n    },\n    /**\n     * @param {InputEvent} e\n     */\n    onValueChange(e) {\n      const node = /** @type {HTMLInputElement} */ (e.target);\n      const type = node.dataset.type;\n      const name = node.dataset.name;\n      const value = node.value;\n      const reasonId = [type, name, value].filter(Boolean).join(': ');\n      /* console.log('[onValueChange]', {\n       *   reasonId,\n       *   name,\n       *   type,\n       *   value,\n       * });\n       */\n      this.calcPrice('onValueChange', reasonId);\n    },\n    /**\n     * @param {InputEvent} e\n     */\n    onSelectChange(e) {\n      const node = /** @type {HTMLSelectElement} */ (e.target);\n      const selectedOptions = node.selectedOptions;\n      const type = node.dataset.type;\n      const name = node.dataset.name;\n      const option = selectedOptions[0];\n      const value = option.value;\n      const reasonId = [type, name, value].filter(Boolean).join(': ');\n      /* // DEBUG\n       * const selectedIndex = Number(node.selectedIndex);\n       * console.log('[onSelectChange]', {\n       *   reasonId,\n       *   option,\n       *   node,\n       *   selectedIndex,\n       *   selectedOptions,\n       * });\n       */\n      this.calcPrice('onSelectChange', reasonId);\n    },\n    /**\n     * @param {InputEvent} e\n     */\n    onEditionChange(e) {\n      const node = /** @type {HTMLInputElement} */ (e.target);\n      const value = Number(node.value);\n      /* console.log('[onEditionChange]', {\n       *   edition: this.edition,\n       *   value,\n       * });\n       */\n      // TODO: Just to multiply price?\n      this.calcPrice('onEditionChange', 'count: ' + value);\n    },\n    /**\n     * @param {InputEvent} e\n     */\n    onFileChange(e) {\n      // @ts-ignore\n      const files = e.target?.files || e.dataTransfer.files;\n      if (!files.length) return;\n      this.createImage(files[0]);\n    },\n    /** @param {Blob} file */\n    createImage(file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        this.logo = '';\n        if (file.type === 'application/pdf') {\n          getDocument(e.target?.result)\n            .promise.then(\n              /** @param {import('pdfjs-dist').PDFDocumentProxy} pdf */\n              (pdf) => {\n                pdf.getPage(1).then((page) => {\n                  const scale = 1.5;\n                  const viewport = page.getViewport({ scale: scale });\n                  const canvas = document.createElement('canvas');\n                  const context = canvas.getContext('2d');\n                  if (context) {\n                    canvas.height = viewport.height;\n                    canvas.width = viewport.width;\n                    const renderContext = {\n                      canvasContext: context,\n                      viewport: viewport,\n                    };\n                    page.render(renderContext).promise.then(() => {\n                      this.logo = canvas.toDataURL();\n                    });\n                  }\n                });\n              },\n            )\n            .catch((/** @type {Error | string} */ reason) => {\n              // eslint-disable-next-line no-console\n              console.error(reason);\n            });\n        } else {\n          this.logo = e.target?.result;\n        }\n      };\n      reader.readAsDataURL(file);\n    },\n    removeImage: function (/** @type {Event} */ _e) {\n      this.$refs.logoUpload.value = null;\n      this.logo = '';\n    },\n  };\n\n  // Create Vue app\n  return createApp({\n    data(_app) {\n      return {\n        isDev,\n        isManage, // boolean,\n        pricesHasChanged: isDev && debugInitialChanges, // boolean\n        pricesChangedDataTypes: isDev && debugInitialChanges ? [0] : [], // number[]\n        data: null, // DataJson\n        preloaded: false,\n        title: null,\n        edition: 10, // number of items to produce\n        logo: null,\n        comment: null,\n        priceUnit: null,\n        priceTotal: null,\n        filteredPrices: [], // PriceItem[], Actual prices for the current DataType node\n        date: new Date(),\n      };\n    },\n    components: {\n      Swiper,\n      SwiperSlide,\n    },\n    setup() {\n      const onSwiper =\n        /** @param {Swiper} _swiper */\n        (_swiper) => {};\n      return {\n        onSwiper,\n      };\n    },\n    async mounted() {\n      const data = serverData;\n      // debugDataStruct(data);\n      this.data = data;\n      // Select the first top-level type\n      this.setList(0);\n      this.preloaded = true;\n      setTimeout(() => {\n        const observerLogo = new MutationObserver((mutations) => {\n          mutations.forEach((mutationRecord) => {\n            const node = /** @type {HTMLElement} */ (mutationRecord.target);\n            const mutation = node.getAttribute('style');\n            this.$refs.logoElementBottom.setAttribute('style', mutation);\n          });\n        });\n\n        const targetLogo = this.$refs.logoElement;\n        observerLogo.observe(targetLogo, { attributes: true, attributeFilter: ['style'] });\n\n        const dragElement =\n          /** @param {HTMLElement} elmnt */\n          (elmnt) => {\n            let pos1 = 0;\n            let pos2 = 0;\n            let pos3 = 0;\n            let pos4 = 0;\n            const garabber = /** @type {HTMLElement} */ (elmnt.querySelector('.element'));\n            if (document.getElementById(elmnt.id + 'header')) {\n              const node = document.getElementById(elmnt.id + 'header');\n              if (node) {\n                node.onmousedown = dragMouseDown;\n              }\n            } else {\n              if (garabber) {\n                garabber.onmousedown = dragMouseDown;\n              }\n            }\n\n            /** @param {MouseEvent} e */\n            function dragMouseDown(e) {\n              e = e || window.event;\n              e.preventDefault();\n              pos3 = e.clientX;\n              pos4 = e.clientY;\n              document.onmouseup = closeDragElement;\n              document.onmousemove = elementDrag;\n            }\n\n            /** @param {MouseEvent} e */\n            function elementDrag(e) {\n              e = e || window.event;\n              e.preventDefault();\n              pos1 = pos3 - e.clientX;\n              pos2 = pos4 - e.clientY;\n              pos3 = e.clientX;\n              pos4 = e.clientY;\n              elmnt.style.top = elmnt.offsetTop - pos2 + 'px';\n              elmnt.style.left = elmnt.offsetLeft - pos1 + 'px';\n            }\n\n            function closeDragElement() {\n              document.onmouseup = null;\n              document.onmousemove = null;\n            }\n          };\n\n        dragElement(targetLogo);\n      }, 2000);\n    },\n    methods: appCore,\n  });\n}\n","// @ts-check\n\nimport { createApp } from 'vue/dist/vue.esm-bundler';\n\nimport { Swiper, SwiperSlide } from 'swiper/vue';\n\nimport { formatPriceToStr, parsePriceFromStr } from './numbers';\nimport { getErrorText } from './strings';\nimport { isDev } from './config';\nimport { showErrorToast, showSuccessToast } from './toast';\nimport { ServerDataError } from './ServerDataError';\nimport { saveCostChangesToServer } from './data';\nimport { getDataTypeSelectedItems } from './show-structure';\n\n/** DEBUG: Emulate changes at start */\nconst debugInitialChanges = false;\n\n/** TODO: Add implementation type for app core object via jsdoc\n * @typedef {Object} AppCore\n * @property {DataJson} data\n */\n\n/** Create global application\n * @param {DataJson} serverData\n * @return {import('vue').App<Element>}\n */\nexport function createEditorApp(serverData) {\n  const appCore = {\n    /** @param {MouseEvent} ev */\n    passHandler(ev) {\n      ev.preventDefault();\n      return false;\n    },\n\n    /** @param {HTMLElement} target */\n    getAllDataForWrapperChild(target) {\n      const wrapper = /** @type {HTMLElement} */ (target.closest('div.data-type-wrapper'));\n      if (!wrapper) {\n        throw new Error('Can not find prices wrapper');\n      }\n      const { dataset } = wrapper;\n      const typeIdx = Number(dataset.typeIdx);\n      if (isNaN(typeIdx)) {\n        throw new Error('Undefined data type index');\n      }\n      /** @type {number[][]} */\n      const pricesSelected = this.pricesSelected;\n      const selectedList = pricesSelected[typeIdx]\n        ? pricesSelected[typeIdx]\n        : (pricesSelected[typeIdx] = []);\n      /** @type {DataJson} */\n      const data = this.data;\n      const dataType = data.types[typeIdx];\n      const { prices } = dataType;\n      return {\n        wrapper,\n        dataset,\n        typeIdx,\n        pricesSelected,\n        selectedList,\n        data,\n        dataType,\n        prices,\n      };\n    },\n\n    /** @param {HTMLElement} target */\n    getAllDataForRowChild(target) {\n      const row = target.closest('tr');\n      if (!row) {\n        throw new Error('Can not find prices row');\n      }\n      const { dataset } = row;\n      const typeIdx = Number(dataset.typeIdx);\n      if (isNaN(typeIdx)) {\n        throw new Error('Undefined data type index');\n      }\n      /** @type {number[][]} */\n      const pricesSelected = this.pricesSelected;\n      const selectedList = pricesSelected[typeIdx]\n        ? pricesSelected[typeIdx]\n        : (pricesSelected[typeIdx] = []);\n      /** @type {DataJson} */\n      const data = this.data;\n      const dataType = data.types[typeIdx];\n      const { prices } = dataType;\n      const priceRowIdx = Number(dataset.idx);\n      const isHeader = isNaN(priceRowIdx);\n      const price = !isHeader && prices ? prices[priceRowIdx] : undefined;\n      return {\n        row,\n        dataset,\n        typeIdx,\n        pricesSelected,\n        selectedList,\n        data,\n        dataType,\n        prices,\n        price,\n        priceRowIdx,\n        isHeader,\n      };\n    },\n\n    /** @param {MouseEvent} ev */\n    onConditionModalItemClick(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const textNode = /** @type {HTMLElement} */ (target.querySelector('.text'));\n      const text = textNode?.innerText;\n      /** @type {string[]} */\n      const addConditionsSelected = this.addConditionsSelected;\n      if (this.addConditionsSelected.includes(text)) {\n        this.addConditionsSelected = addConditionsSelected.filter((it) => it !== text);\n      } else {\n        this.addConditionsSelected = addConditionsSelected.concat(text);\n      }\n    },\n\n    onConditionModalSave() {\n      /** @type {DataJson} */\n      const data = this.data;\n      /** @type {string[]} */\n      const addConditionsSelected = this.addConditionsSelected;\n      /** @type {number} */\n      const typeIdx = this.addConditionsTypeIdx;\n      /** @type {number} */\n      const priceRowIdx = this.addConditionsPriceRowIdx;\n      const dataType = data.types[typeIdx];\n      const prices = dataType.prices;\n      if (!prices) {\n        throw new Error('Prices data not defined for the DataType!');\n      }\n      const price = prices[priceRowIdx];\n      if (!price) {\n        throw new Error('Not found price item for idx: ' + priceRowIdx);\n      }\n      price.conditions = price.conditions\n        ? price.conditions.concat(addConditionsSelected)\n        : addConditionsSelected;\n      price.conditions.sort();\n      this.pricesHasChanged = true;\n      if (!this.pricesChangedDataTypes.includes(typeIdx)) {\n        this.pricesChangedDataTypes.push(typeIdx);\n      }\n    },\n\n    /** @param {MouseEvent} ev */\n    onConditionModalAdd(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const textNode = /** @type {HTMLElement} */ (target.querySelector('.text'));\n      const text = textNode.innerText;\n      /** @type {string[]} */\n      const addConditionsSelected = this.addConditionsSelected;\n      if (this.addConditionsSelected.includes(text)) {\n        this.addConditionsSelected = addConditionsSelected.filter((it) => it !== text);\n      } else {\n        this.addConditionsSelected = addConditionsSelected.concat(text);\n      }\n    },\n\n    /** @param {MouseEvent} ev */\n    addPriceItem(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const {\n        wrapper,\n        // dataset,\n        typeIdx,\n        // pricesSelected,\n        // selectedList,\n        // data,\n        dataType,\n        prices,\n      } = this.getAllDataForWrapperChild(target);\n      /** New row data\n       * @type {PriceItem}\n       */\n      const newPriceItem = {\n        conditions: undefined, // string[];\n        material: '', // string;\n        units: '', // string;\n        // The numbers here could be formatted ones in a form like `1,123.99`\n        unitMaterial: 0, // number | string;\n        basicCost: 0, // number | string;\n        unitCost: 0, // number | string;\n      };\n      // Add a row\n      let addedIdx = 0;\n      if (!prices) {\n        dataType.prices = [newPriceItem];\n      } else {\n        addedIdx = prices.length;\n        dataType.prices = prices.concat(newPriceItem);\n      }\n      // Set 'updated' flags\n      this.pricesHasChanged = true;\n      if (!this.pricesChangedDataTypes.includes(typeIdx)) {\n        this.pricesChangedDataTypes.push(typeIdx);\n      }\n      // Show and indicate newly added record\n      const rowId = 'price-row-' + typeIdx + '-' + addedIdx;\n      setTimeout(() => {\n        requestAnimationFrame(() => {\n          const row = wrapper.querySelector('tr#' + rowId);\n          if (row) {\n            row.scrollIntoView({\n              behavior: 'smooth',\n              block: 'center',\n            });\n            row.classList.add('new');\n            setTimeout(() => {\n              row.classList.remove('new');\n            }, 250);\n          }\n        });\n      }, 50);\n    },\n\n    /** @param {MouseEvent} ev */\n    deleteSelectedPrices(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const {\n        // wrapper,\n        // dataset,\n        typeIdx,\n        pricesSelected,\n        selectedList,\n        // data,\n        dataType,\n        prices,\n      } = this.getAllDataForWrapperChild(target);\n      if (prices && selectedList.length) {\n        dataType.prices = prices.filter((_item, itemIdx) => !selectedList.includes(itemIdx));\n        pricesSelected[typeIdx] = [];\n        this.pricesHasChanged = true;\n        if (!this.pricesChangedDataTypes.includes(typeIdx)) {\n          this.pricesChangedDataTypes.push(typeIdx);\n        }\n      }\n    },\n\n    /** @param {MouseEvent} ev */\n    showConditionsModal(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const {\n        // row,\n        // dataset,\n        typeIdx,\n        // pricesSelected,\n        // selectedList,\n        // data,\n        dataType,\n        // prices,\n        price,\n        priceRowIdx,\n        // isHeader,\n      } = this.getAllDataForRowChild(target);\n      if (!price) {\n        throw new Error('Not found price item for idx: ' + priceRowIdx);\n      }\n      const addConditionsList = getDataTypeSelectedItems(dataType, { getAll: true });\n      const conditions = price.conditions;\n      this.addConditionsTypeIdx = typeIdx;\n      this.addConditionsPriceRowIdx = priceRowIdx;\n\n      this.addConditionsList = addConditionsList; // string[], current conditions to show in the modal to add to the current price item\n      this.addConditionsSelected = []; // string[], selected conditions to add\n      this.addConditionsUsed = conditions ? [...conditions] : [];\n    },\n\n    /** @param {MouseEvent} ev */\n    deleteConditionsItem(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const { dataset } = target;\n      const condIdx = Number(dataset.condIdx);\n      const {\n        // row,\n        // dataset,\n        typeIdx,\n        // pricesSelected,\n        // selectedList,\n        // data,\n        // dataType,\n        // prices,\n        price,\n        priceRowIdx,\n        // isHeader,\n      } = this.getAllDataForRowChild(target);\n      if (!price) {\n        throw new Error('Not found price item for idx: ' + priceRowIdx);\n      }\n      const conditions = price.conditions;\n      if (conditions) {\n        price.conditions = conditions.filter((_it, idx) => idx != condIdx);\n      }\n      this.pricesHasChanged = true;\n      if (!this.pricesChangedDataTypes.includes(typeIdx)) {\n        this.pricesChangedDataTypes.push(typeIdx);\n      }\n    },\n\n    /** @param {MouseEvent} ev */\n    onCheckCellClick(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const {\n        // row,\n        // dataset,\n        typeIdx,\n        pricesSelected,\n        selectedList,\n        // data,\n        // dataType,\n        prices,\n        priceRowIdx,\n        isHeader,\n      } = this.getAllDataForRowChild(target);\n      if (!prices || !prices.length) {\n        return;\n      }\n      if (isHeader) {\n        if (selectedList.length >= prices.length) {\n          pricesSelected[typeIdx] = [];\n        } else {\n          pricesSelected[typeIdx] = prices.map((_, n) => n);\n        }\n      } else {\n        if (selectedList.includes(priceRowIdx)) {\n          pricesSelected[typeIdx] = selectedList.filter((n) => n != priceRowIdx);\n        } else {\n          pricesSelected[typeIdx] = selectedList.concat(priceRowIdx);\n        }\n      }\n      pricesSelected[typeIdx].sort((a, b) => a - b);\n    },\n\n    /** @param {number} val */\n    formatPrice(val) {\n      return formatPriceToStr(val);\n    },\n\n    /** @return {DataType | undefined} */\n    getCurrentDataType() {\n      /** @type {DataJson} */\n      const data = this.data;\n      /** Selected data type\n       * @type {DataType | undefined}\n       */\n      const dataType = data.types.find(({ selected }) => !!selected);\n      if (!dataType) {\n        // eslint-disable-next-line no-console\n        console.warn('[getCurrentDataType] No data type selected!');\n        return undefined;\n      }\n      return dataType;\n    },\n\n    /**\n     * @param {number} typeIdx\n     * @param {PriceItem} price\n     */\n    updatePriceRow(typeIdx, price) {\n      price.unitCost = parsePriceFromStr(price.unitMaterial) * parsePriceFromStr(price.basicCost);\n      this.pricesHasChanged = true;\n      if (!this.pricesChangedDataTypes.includes(typeIdx)) {\n        this.pricesChangedDataTypes.push(typeIdx);\n      }\n    },\n\n    /** Handle update of a basic cost field\n     * @param {InputEvent} ev\n     */\n    onPriceNumericFieldChanged(ev) {\n      const target = /** @type {HTMLInputElement} */ (ev.currentTarget);\n      const fieldId = target.id;\n      const {\n        // row,\n        // dataset,\n        typeIdx,\n        // pricesSelected,\n        // selectedList,\n        // data,\n        // dataType,\n        // prices,\n        price,\n        priceRowIdx,\n      } = this.getAllDataForRowChild(target);\n      if (!price) {\n        throw new Error('Not found price item for idx: ' + priceRowIdx);\n      }\n      const value = target.value;\n      const parsedValue = parsePriceFromStr(value);\n      price[fieldId] = parsedValue;\n      this.updatePriceRow(typeIdx, price);\n    },\n\n    /** Save changed data on the server */\n    async saveCostChanges() {\n      /** @type {DataJson} */\n      const data = this.data;\n      /** @type {number[]} */\n      const pricesChangedDataTypes = this.pricesChangedDataTypes;\n      try {\n        await saveCostChangesToServer(data, pricesChangedDataTypes);\n        /* // XXX FUTURE: It's possible to get the results here and update all the data\n         * console.log('[saveCostChanges] success: Got data (parsed json)', {\n         *   resData,\n         * });\n         */\n        this.pricesHasChanged = false;\n        this.pricesChangedDataTypes = [];\n        showSuccessToast(' ');\n      } catch (err) {\n        const details = getErrorText(err);\n        const error = new ServerDataError('  ', details);\n        // eslint-disable-next-line no-console\n        console.error('[saveCostChanges] Network error', error.message, {\n          details,\n          err,\n          error,\n        });\n        debugger; // eslint-disable-line no-debugger\n        showErrorToast(error);\n      }\n    },\n\n    /**\n     * @param {any[]} arr\n     */\n    getSelected(arr) {\n      return arr.find((el) => el.selected);\n    },\n\n    /**\n     * @param {InputEvent} ev\n     */\n    onPriceFieldUpdated(ev) {\n      const target = /** @type {HTMLInputElement} */ (ev.currentTarget);\n      const { typeIdx, prices, priceRowIdx } = this.getAllDataForRowChild(target);\n      if (!prices) {\n        throw new Error('Prices data not defined for the DataType!');\n      }\n      const price = prices[priceRowIdx];\n      if (!price) {\n        throw new Error('Not found price item for idx: ' + priceRowIdx);\n      }\n      this.updatePriceRow(typeIdx, price);\n    },\n  };\n\n  // Create Vue app\n  return createApp({\n    data(_app) {\n      return {\n        isDev,\n        // fullMode, // boolean,\n        pricesSelected: [], // number[][]\n        pricesHasChanged: isDev && debugInitialChanges, // boolean\n        pricesChangedDataTypes: isDev && debugInitialChanges ? [0] : [], // number[]\n        addConditionsTypeIdx: undefined, // number\n        addConditionsPriceRowIdx: undefined, // number\n        addConditionsList: ['xxx'], // string[], current conditions to show in the modal to add to the current price item\n        addConditionsUsed: [], // string[], selected conditions to add\n        addConditionsSelected: [], // string[], selected conditions to add\n        data: null, // DataJson\n        preloaded: false,\n      };\n    },\n    components: {\n      Swiper,\n      SwiperSlide,\n    },\n    setup() {\n      const onSwiper =\n        /** @param {Swiper} _swiper */\n        (_swiper) => {};\n      return {\n        onSwiper,\n      };\n    },\n    async mounted() {\n      /* // Toasts test\n       * showSuccessToast('App edit');\n       * // setTimeout(() => {\n       * //   showErrorToast('Long body text');\n       * // }, 7000);\n       */\n      const data = serverData;\n      // debugDataStruct(data);\n      this.data = data;\n      // Select the first top-level type\n      // this.setList(0);\n      this.preloaded = true;\n    },\n    methods: appCore,\n  });\n}\n","// @ts-check\n\nimport { showErrorToast } from './js/toast';\nimport { loadServerData } from './js/data';\nimport { getAppMode, showGlobalError } from './js/helpers';\n\nimport { createConstructorApp } from './js/app-constructor';\nimport { createEditorApp } from './js/app-editor';\n\nimport 'swiper/css';\n\nimport './scss/index.scss';\n\nasync function start() {\n  try {\n    const data = await loadServerData();\n    const appMode = getAppMode();\n    /** @type {import('vue').App} */\n    const app =\n      appMode === 'editor'\n        ? createEditorApp(data)\n        : createConstructorApp(data, appMode === 'manage');\n    window.globalApp = app.mount('#app');\n  } catch (err) {\n    const error = /** @type {import('src/@types/ErrorLike').ErrorLike} */ (err);\n    // eslint-disable-next-line no-console\n    console.error('[start] error', {\n      error,\n    });\n    debugger; // eslint-disable-line no-debugger\n    // Show error pane over the application\n    showGlobalError(error);\n    // Show error toast?\n    showErrorToast(error);\n  }\n}\n\nstart();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkall4promo_calculator\"] = self[\"webpackChunkall4promo_calculator\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [3], () => (__webpack_require__(340)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","getErrorText","error","Array","isArray","map","this","bind","join","Error","message","String","toastNode","toastInstance","bgClasses","info","success","textClasses","iconClasses","getToastNode","document","getElementById","updateToastNode","params","type","node","removeClassPrefix","replaceClass","regEx","RegExp","match","className","length","forEach","str","classList","remove","toggle","replaceNodeClasses","iconNode","querySelector","titleNode","innerText","title","bodyNode","body","showToast","Toast","getToastInstance","show","showErrorToast","showSuccessToast","isDev","nodeDev","dataFileUrl","updatePricesUrl","defaultContentType","ServerDataError","details","name","loadServerData","url","fetch","res","ok","status","statusText","console","log","reason","filter","Boolean","msg","text","err","data","JSON","parse","saveCostChangesToServer","pricesChangedDataTypes","changedPricesData","idx","prices","types","reqUrl","reqInit","method","headers","Accept","stringify","changedPrices","resText","startsWith","resData","getAppMode","window","location","pathname","search","showGlobalError","errorNode","detailsNode","__foobar_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","__foobar_exports__","globalThis","pdfjsLib","d","AbortException","AnnotationEditorLayer","AnnotationEditorParamsType","AnnotationEditorType","AnnotationEditorUIManager","AnnotationLayer","AnnotationMode","CMapCompressionType","ColorPicker","DOMSVGFactory","DrawLayer","FeatureTest","util_FeatureTest","GlobalWorkerOptions","ImageKind","util_ImageKind","InvalidPDFException","MissingPDFException","OPS","Outliner","PDFDataRangeTransport","PDFDateString","PDFWorker","PasswordResponses","PermissionFlag","PixelsPerInch","RenderingCancelledException","TextLayer","UnexpectedResponseException","Util","VerbosityLevel","XfaLayer","build","createValidAbsoluteUrl","fetchData","getDocument","getFilenameFromUrl","getPdfFilenameFromUrl","getXfaPageViewport","isDataScheme","isPdfFile","noContextMenu","normalizeUnicode","renderTextLayer","setLayerDimensions","shadow","updateTextLayer","version","isNodeJS","process","versions","nw","electron","IDENTITY_MATRIX","FONT_IDENTITY_MATRIX","LINE_FACTOR","RenderingIntentFlag","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","TextRenderingMode","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","AnnotationBorderStyleType","ERRORS","WARNINGS","INFOS","BINARY","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","NEED_PASSWORD","INCORRECT_PASSWORD","verbosity","setVerbosityLevel","level","Number","isInteger","getVerbosityLevel","warn","unreachable","assert","cond","baseUrl","options","addDefaultProtocol","tryConvertEncoding","decodeURIComponent","escape","absoluteUrl","URL","protocol","_isValidProtocol","value","nonSerializable","configurable","writable","BaseException","constructor","PasswordException","code","super","UnknownErrorException","FormatError","bytesToString","bytes","undefined","MAX_ARGUMENT_COUNT","fromCharCode","apply","strBuf","i","chunkEnd","Math","min","chunk","subarray","push","stringToBytes","Uint8Array","charCodeAt","objectFromMap","create","isLittleEndian","buffer8","Uint32Array","buffer","isEvalSupported","Function","isOffscreenCanvasSupported","OffscreenCanvas","platform","navigator","isMac","includes","isCSSRoundSupported","CSS","supports","hexNumbers","from","keys","n","toString","padStart","static","r","g","b","minMax","temp","m1","m2","p","m","p1","applyTransform","p2","slice","p3","p4","max","transpose","a","c","first","second","sqrt","sx","sy","rect","rect1","rect2","xLow","xHigh","yLow","yHigh","x0","x1","x2","x3","y0","y1","y2","y3","t","mt","tt","ttt","x","y","abs","delta","sqrtDelta","a2","NormalizeRegex","NormalizationMap","Map","replaceAll","_","normalize","AnnotationPrefix","FontRenderOps","BaseFilterFactory","addFilter","maps","addHCMFilter","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","destroy","keepHCM","BaseCanvasFactory","width","height","canvas","_createCanvas","context","getContext","reset","canvasAndContext","BaseCMapReaderFactory","isCompressed","async","compressionType","_fetchData","catch","BaseStandardFontDataFactory","filename","BaseSVGFactory","skipDimensions","svg","_createSVG","setAttribute","createElement","SVG_NS","PDF","isValidFetchUrl","baseURI","response","arrayBuffer","blob","json","Promise","resolve","reject","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","responseText","send","DOMCMapReaderFactory","then","cMapData","ArrayBuffer","DOMStandardFontDataFactory","createElementNS","PageViewport","viewBox","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","rawDims","pageWidth","pageHeight","pageX","pageY","clone","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","applyInverseTransform","extraDelay","ii","trim","substring","toLowerCase","test","split","lastIndexOf","defaultFilename","reFilename","splitURI","exec","suggestedFilename","StatTimer","started","times","time","Date","now","timeEnd","start","end","outBuf","longest","padEnd","e","preventDefault","deprecated","pdfDateStringRegex","input","matches","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","xfaPage","attributes","style","getRGB","color","colorRGB","getCurrentTransform","ctx","f","getTransform","getCurrentTransformInverse","invertSelf","div","viewport","mustFlip","mustRotate","useRound","w","h","widthStr","heightStr","EditorToolbar","editor","render","editToolbar","addEventListener","buttons","append","position","toolbarPosition","_uiManager","direction","insetInlineEnd","top","stopPropagation","_focusEventsAllowed","element","capture","hide","add","hideDropdown","button","tabIndex","editorType","delete","divider","addAltTextButton","prepend","addColorPicker","colorPicker","renderButton","HighlightToolbar","uiManager","boxes","isLTR","lastY","lastX","box","parent","span","highlightSelection","bindEvents","names","IdManager","id","ImageManager","crypto","randomUUID","buf","getRandomValues","floor","random","getUuid","_isSVGFittingCanvas","image","Image","src","decode","drawImage","getImageData","rawData","bitmap","refCounter","isSvg","file","mustRemoveAspectRatioPromise","fileReader","FileReader","imageElement","imagePromise","onload","svgUrl","result","onerror","readAsDataURL","createImageBitmap","set","lastModified","size","getFromFile","getFromUrl","getSvgUrl","deleteId","isValidId","CommandManager","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","next","splice","redo","hasSomethingToUndo","hasSomethingToRedo","KeyboardManager","callbacks","allKeys","Set","callback","isMacKey","at","event","altKey","ctrlKey","metaKey","shiftKey","self","has","bubbles","args","checker","ColorManager","_colors","colors","visibility","computedColor","getComputedStyle","getColorValues","convert","rgb","matchMedia","RGB","every","_colorsMapping","getHexCode","makeHexColor","blur","focus","copy","cut","paste","keydown","keyup","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","_keyboardManager","proto","arrowChecker","contains","activeElement","tagName","hasSomethingToControl","textInputChecker","_self","target","el","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","isEnterHandled","unselectAll","translateSelectedEditors","container","viewer","altTextManager","eventBus","pdfDocument","pageColors","highlightColors","enableHighlightFloatingButton","mlManager","_eventBus","_on","annotationStorage","filterFactory","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","_off","layer","values","clear","clearTimeout","guess","hasMLManager","hcmFilter","foreground","background","pair","highlightColorNames","reverse","setMainHighlightColorPicker","editAltText","pageNumber","focusMainContainer","findParent","layerX","layerY","getBoundingClientRect","disableUserSelect","addShouldRescale","removeShouldRescale","commitOrRemove","pagesRotation","anchorNode","nodeType","Node","TEXT_NODE","parentElement","methodOfCreation","selection","getSelection","isCollapsed","anchorOffset","focusNode","focusOffset","textLayer","closest","getSelectionBoxes","empty","dispatch","source","mode","showAllEditors","hasTextLayer","createAndAddNewEditor","addToAnnotationStorage","setValue","pointerup","removeEventListener","hasSelection","lastEditor","lastActiveElement","once","addEditListeners","removeEditListeners","editors","serialized","serialize","clipboardData","setData","item","items","isHandlingMimeForPasting","currentLayer","getData","ex","newEditors","deserializedEditor","deserialize","addCommands","isEditorHandlingKeyboard","entries","some","assign","setEditingState","registerEditorTypes","defaultPropertiesToUpdate","getId","getLayer","pageIndex","currentPageIndex","addLayer","enable","disable","removeLayer","updateMode","editId","isFromKeyboard","annotationElementId","setSelected","enterInEditMode","canCreateNewEmptyEditor","addNewEditor","updateToolbar","updateParams","updateColor","action","updateDefaultParams","visible","updateButton","enableWaiting","mustWait","disableClick","enableClick","getEditors","getEditor","addEditor","removeEditor","setTimeout","unselect","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","addOrRebuild","setActiveEditor","propertiesToUpdate","ed","updateUI","toggleSelected","select","isSelected","firstSelectedEditor","commit","noCommit","totalX","totalY","translateInPage","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","renderAnnotationElement","annotation","editorId","getRawValue","hasBeenModified","AltText","l10nPromise","_l10nPromise","altText","textContent","onClick","finish","focusVisible","decorative","enabled","disabled","tooltip","DELAY_TO_SHOW_TOOLTIP","_reportTelemetry","parentNode","getImageForAltText","AnnotationEditor","focusin","focusout","_initialOptions","_isVisible","_zIndex","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_willKeepAspectRatio","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","getPrototypeOf","_type","_defaultLineColor","_colorManager","fakeEditor","FakeEditor","getNextId","l10n","strings","_borderLineWidth","documentElement","parseFloat","getPropertyValue","_value","mime","_isDraggable","center","parentRotation","fixAndSetPosition","setInBackground","zIndex","setInForeground","setParent","relatedTarget","isMultipleSelection","setAt","screenToPageTranslation","translate","scrollIntoView","block","findNewParent","bx","by","getBaseTranslation","left","toFixed","_hasBeenMoved","_mustFixPosition","moveInDOM","angle","pageTranslationToScreen","parentScale","scaledWidth","scaledHeight","round","setDims","fixDims","widthPercent","endsWith","heightPercent","getInitialTranslation","classes","boundResizerPointermove","savedDraggable","pointerMoveOptions","passive","togglePointerEvents","savedWidth","savedHeight","savedParentCursor","cursor","savedCursor","pointerUpCallback","newWidth","newHeight","minWidth","MIN_SIZE","minHeight","rotationMatrix","transf","invRotationMatrix","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","ratioX","ratioY","deltaX","deltaY","movementX","movementY","oldDiag","hypot","altTextFinish","removeEditToolbar","getClientDimensions","initialize","addEditToolbar","altTextData","hasAltText","maxWidth","maxHeight","pointerdown","pointerMoveCallback","clientX","clientY","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","disableEditMode","isInEditMode","needsToBeRebuilt","rotate","_angle","isForCopying","timeout","isResizable","makeResizable","children","boundResizerKeydown","boundResizerBlur","firstPosition","nextFirstPosition","firstChild","before","lastChild","child","stopImmediatePropagation","preventScroll","disableEditing","enableEditing","contentDiv","setAspectRatio","aspectRatio","telemetryInitialData","telemetryFinalData","_telemetryTimeout","content","nodeName","resetAnnotationElement","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","isView","byteLength","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","freeze","hash","transfer","AnnotationStorage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","modified","entry","val","getAll","setAll","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","counters","count","computeTelemetryFinalData","structuredClone","FontLoader","ownerDocument","styleElement","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","systemFontInfo","_inspectFont","loadedName","disableFontFace","isFontLoadingAPISupported","fontFace","FontFace","load","baseFontName","font","attached","missingFile","loadSystemFont","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","supported","userAgent","done","complete","otherRequest","shift","_loadTestFont","atob","int32","offset","spliceString","s","insert","called","XXXX_VALUE","checksum","btoa","fontFamily","isFontReady","fillText","FontFaceObject","translatedData","inspectFont","compiledGlyphs","cssFontInfo","css","weight","fontWeight","italicAngle","mimetype","getPathGenerator","objs","character","cmds","commands","bezierCurveTo","quadraticCurveTo","packageCapability","withResolvers","packageMap","fs","import","http","https","path2d","loadPackages","NodePackages","promise","node_utils_fetchData","promises","readFile","PathType","applyBoundingBox","bbox","region","Path2D","BaseShadingPattern","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","matrix","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","pattern","ownerBBox","current","getClippedPathBoundingBox","ceil","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","baseTransform","fillStyle","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","c1","c2","c3","coords","rowSize","tmp","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","k","x1_","x2_","j","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","boundsWidth","boundsHeight","paddedWidth","BORDER_SIZE","paddedHeight","createImageData","putImageData","singularValueDecompose2dScale","matrixScale","temporaryPatternCanvas","DummyShadingPattern","PaintType","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","curMatrixScale","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","adjustedX0","adjustedY0","adjustedX1","adjustedY1","clipBbox","executeOperatorList","endDrawing","step","realOutputSize","MAX_PATTERN_SIZE","bboxWidth","bboxHeight","updateRectMinMax","strokeStyle","fillColor","strokeColor","cssColor","convertBlackAndWhiteToRGBA","srcPos","dest","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","FULL_CHUNK_HEIGHT","CachedCanvases","canvasFactory","cache","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","patternFill","fillAlpha","strokeAlpha","lineWidth","activeSMask","transferMaps","startNewPathAndClipBox","clipBox","setCurrentPoint","updatePathMinMax","minX","maxX","updateScalingPathMinMax","scaleMinMax","updateCurvePathMinMax","bezierBoundingBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","intersect","isEmptyClip","Infinity","putBinaryImageData","imgData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","kind","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","mask","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","getImageSmoothingEnabled","interpolate","fround","actualScale","devicePixelRatio","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","optionalContentConfig","markedContentStack","annotationCanvasMap","stateStack","pendingClip","pendingEOFill","xobjs","groupStack","processingType3","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","beginDrawing","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","nextBreakPoint","breakIt","depObjId","objsPool","inSMaskMode","HTMLCanvasElement","hcmFilterId","savedFilter","_scaleImage","img","inverseTransform","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","isPatternFill","currentTransform","cacheKey","scaled","maskCanvas","mainKey","cachedImage","maskToCanvas","getAxialAlignedBoundingBox","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","limit","dashArray","dashPhase","intent","flatness","states","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","mirrorContextOperations","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","old","pop","ops","startX","startY","isScalingMatrix","minMaxForBezier","xw","yh","consumePath","rescaleAndStroke","needRestore","paths","pendingTextPaths","path","addToPath","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","paintChar","patternTransform","fillStrokeMode","isAddToPathSet","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","_getPattern","arguments","objId","getShadingPattern","inv","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","canvasWidth","canvasHeight","annotationCanvas","savedCtx","compiled","POINT_TYPES","width1","j0","points","lineSize","pos","sum","Int32Array","p0","pp","compileType3Glyph","skewX","skewY","positions","trans","images","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","HTMLElement","tag","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","op","workerPort","Worker","workerSrc","CallbackKind","StreamKind","wrapReason","MessageHandler","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","_onComObjOnMessage","stream","capability","cbSourceName","cbTargetName","postMessage","on","actionName","handler","ah","transfers","sendWithPromise","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancel","cancelCapability","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","close","onPull","onCancel","streamController","allSettled","Metadata","parsedData","getRaw","INTERNAL","Symbol","OptionalContentGroup","renderingIntent","usage","view","viewState","printState","_setVisible","internal","userSet","OptionalContentConfig","creator","order","groups","baseState","off","getHash","array","operator","state","expression","policy","ids","setVisibility","setOCGState","preserveRB","hasInitialVisibility","getOrder","getGroups","getGroup","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_enqueue","rangeReader","_begin","_progressiveDataLength","_loaded","evt","onProgress","_removeRangeReader","reader","indexOf","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","abort","_stream","_done","_filename","_requests","_headersReady","headersReady","isRangeSupported","isStreamingSupported","contentLength","requestCapability","_end","_queuedChunk","validateRangeRequestCapabilities","getResponseHeader","isHttp","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","extractFilenameFromHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","contentDispositionStr","iter","quot","part","parts","rfc2231getparam","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","fatal","quotindex","extvalue","encodingend","replace","charset","hex","getFilenameFromContentDispositionHeader","createResponseStatusError","validateResponseStatus","createFetchOptions","withCredentials","abortController","signal","credentials","redirect","createHeaders","httpHeaders","Headers","getArrayBuffer","PDFFetchStream","_rangeRequestReaders","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_abortController","AbortController","_headers","getReader","read","_readCapability","NetworkManager","currXhrId","pendingRequests","requestRange","listeners","requestFull","xhr","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","network_getArrayBuffer","rangeHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_onHeadersReceived","_onDone","_onError","_url","_fullRequestId","_headersReceivedCapability","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","lengthComputable","_requestId","_close","fileUriRegex","PDFNodeStream","sourceUrl","parsedUrl","host","parseUrl","isFsUrl","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","BaseFullReader","_readableStream","_error","_setReadableStream","readableStream","BaseRangeReader","createRequestOptions","auth","hostname","port","handleResponse","statusCode","_request","_httpHeaders","Range","href","lstat","stat","createReadStream","DEFAULT_FONT_SIZE","FontInspector","WeakMap","textContentSource","prevFontSize","prevFontFamily","pump","lang","styles","onBefore","abortEx","textDivs","textContentItemsStr","geom","textDiv","textDivProperties","hasText","hasEOL","atan2","fontName","PI","fontSubstitution","fontHeight","fontAscent","sin","cos","scaleFactorStr","divStyle","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","canvasContext","alpha","cachedAscent","savedFont","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","pixels","rest","restKeys","XfaText","xfa","output","walk","shouldBuildText","DefaultCanvasFactory","createCanvas","DefaultCMapReaderFactory","DefaultFilterFactory","docId","contain","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","tableR","tableG","tableB","fgRGB","bgRGB","getSteps","arr","tableA","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","newStart","newStep","prev","feColorMatrix","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","DefaultStandardFontDataFactory","task","PDFDocumentLoadingTask","getUrlProp","Buffer","isNaN","getDataProp","password","rangeTransport","worker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","standardFontDataUrl","StandardFontDataFactory","ignoreErrors","stopAtErrors","maxImageSize","canvasMaxAreaInBytes","fontExtraProperties","enableXfa","disableAutoFetch","pdfBug","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","workerParams","fromPort","_worker","docParams","apiVersion","evaluatorOptions","transportParams","destroyed","workerIdPromise","messageHandler","networkStream","Response","isFetchSupported","createPDFNetworkStream","workerId","transport","WorkerTransport","_transport","_capability","isRefProxy","ref","num","gen","onPassword","_pendingDestroy","_rangeListeners","_progressListeners","_progressiveReadListeners","_progressiveDoneListeners","_readyCapability","listener","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","cleanup","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","loadingParams","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pageInfo","_pageIndex","_pageInfo","_stats","_pdfBug","PDFObjects","_maybeCleanupAfterRender","_intentStates","userUnit","getViewport","getAnnotations","getPageJSActions","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","renderTasks","internalRenderTask","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","all","initializeGraphics","operatorListChanged","getOperatorList","opListTask","opListReadCapability","streamTextContent","includeMarkedContent","disableNormalization","highWaterMark","getTextContent","getXfa","getStructTree","_destroy","waitOn","force","completed","resetStats","delayed","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","delay","curCacheKey","curIntentState","LoopbackPort","terminate","PDFWorkerUtil","isWorkerDisabled","fakeWorkerId","isSameOrigin","otherUrl","base","origin","other","createCDNWrapper","wrapper","createObjectURL","Blob","_port","_webWorker","_messageHandler","_initializeFromPort","_initialize","terminateEarly","onWorkerError","_setupFakeWorker","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","cachedPort","pdfjsWorker","loader","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","cachedPromise","isOpList","page","terminated","sink","readyReason","headersCapability","fullReader","_numPages","htmlForXfa","exception","updatePassword","exportedData","exportedError","fontAdded","finally","imageRef","pageProxy","dataLen","imageData","refStr","results","metadata","INITIAL_DATA","iterator","RenderTask","onContinue","form","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvas","StepperManager","init","getNextBreakPoint","gfx","updateOperatorList","requestAnimationFrame","makeColorComp","scaleAndClamp","ColorConverters","G","components","CMYK_RGB","RGB_HTML","html","storage","storedData","xfaOn","xfaOff","removeAttribute","checked","option","selected","selectedIndex","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","setupStorage","root","xfaHtml","rootHtml","setAttributes","isNotForRichText","rootDiv","createTextNode","stack","childHtml","xmlns","querySelectorAll","hidden","DEFAULT_TAB_INDEX","GetElementsByNameSet","getRectDims","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","titleObj","contentsObj","richText","hasPopupData","_hasPopupData","updateEdited","popup","resetEdited","currentRect","setRotation","popupRef","alternativeText","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","normalizeRect","elementWidth","elementHeight","_commonActions","setColor","jsName","styleName","detail","colorType","colorArray","display","noView","noPrint","userName","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","defs","clipPath","rectWidth","rectHeight","backgroundImage","_createPopup","modificationDate","parentRect","elements","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","maybeShow","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_isEditable","_editOnDoubleClick","annotationEditorType","isTooltipOnly","link","isBound","_bindNamedAction","attachment","attachmentDest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","description","openOrDownloadData","executeSetOCGState","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","allIds","dispatchEvent","Event","showElementAndHideCanvas","previousSibling","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","modifier","focused","_setEventListeners","getter","Blur","Focus","_setBackgroundColor","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","lineHeight","textAlignment","textAlign","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","multipleSelection","index","findIndex","selectChild","indices","editable","changeEx","keyDown","PopupElement","elementIds","toDateObject","trigger","flatMap","baseColor","outlineColor","BACKGROUND_ENLIGHT","header","date","toLocaleDateString","toLocaleTimeString","contents","_formatContents","popupLines","popupContent","lineAttributes","line","lines","useParentRect","normalizedRect","popupLeft","popupTop","textPosition","lineSpan","lineCoordinates","square","circle","containerClassName","svgElementName","coordinate","vertices","polyline","inkList","inkLists","accessibilityManager","annotationEditorUIManager","_annotationEditorUIManager","contentElement","moveElementInDOM","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","replaceWith","after","getEditableAnnotations","getEditableAnnotation","EOL_PATTERN","FreeTextEditor","editorDivBlur","editorDivFocus","editorDivInput","editorDivKeydown","editorDivPaste","_translateEmpty","_defaultColor","_defaultFontSize","_internalPadding","setFontsize","editorDiv","savedFontsize","col","savedColor","overlayDiv","contentEditable","childNodes","savedDisplay","savedVisibility","savedText","newText","trimEnd","setText","dblclick","baseX","baseY","posX","posY","nodeValue","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","newRange","beforeLength","reduce","acc","setStart","setEnd","removeAllRanges","addRange","replaceChildren","padding","structTreeParentId","innerMargin","EPSILON","right","shiftedMinX","shiftedMinY","lastEdge","lastPoint","edge","getOutlines","sort","outlineVerticalEdges","edges","allEdges","edge1","edge2","outlines","outline","lastPointX","lastPointY","HighlightOutline","middle","jj","y4","Outline","toSVGPath","_rotation","free","FreeHighlightOutline","polygon","prevX","prevY","FreeOutliner","Float64Array","scaleFactor","thickness","lastTop","lastBottom","diffX","diffY","diffD","K","nY","thX","thY","bottom","lastTopX","lastTopY","lastBottomX","lastBottomY","last","N","ltrCallback","getNewOutline","outliner","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","swatch","renderMainDropdown","dropdown","role","nextSibling","HighlightEditor","_moveCaret","_defaultThickness","opacity","_defaultOpacity","highlightId","numberOfColors","outlinerForOutline","highlightOutlines","clipPathId","drawLayer","finalizeLine","highlightOutline","updateLine","updateBox","changeColor","savedThickness","setThickness","th","toolbar","addUndoableEditor","mustBeSelected","highlight","highlightDiv","pointerover","addClass","pointerleave","removeClass","setPosition","pointerMove","pointerDownOptions","pointerDown","_freeHighlight","_freeHighlightId","_freeHighlightClipId","updatePath","removeFreeHighlight","InkEditor","canvasPointermove","canvasPointerleave","canvasPointerup","canvasPointerdown","bezierPath2D","allRawPaths","currentPath","translationX","translationY","setOpacity","savedOpacity","disconnect","setDimensions","opacityToHex","path2D","bezier","xy","lastPoints","bezierPoints","control1","control2","addInkEditorIfNeeded","ResizeObserver","contentRect","observe","roundedWidth","roundedHeight","scaleFactorW","scaleFactorH","p10","p11","p20","p21","p30","p31","p40","p41","xMin","xMax","yMin","yMax","firstTime","prevTranslationX","prevTranslationY","unscaledPadding","StampEditor","bitmapUrl","bitmapFile","supportedTypes","supportedTypesStr","pasteEditor","getAsFile","fromId","getFromId","accept","files","click","MAX_RATIO","factor","bitmapWidth","bitmapHeight","prevWidth","prevHeight","offscreen","transferToImageBitmap","mlGuess","service","channels","toUrl","toDataURL","bitmapId","accessibilityData","alt","stamps","area","prevData","_editorType","annotationLayer","editorTypes","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","isCommitting","annotationElementIds","editables","changedAnnotations","resetAnnotations","startHighlighting","attach","detach","removePointerInTextLayer","deleteAnnotationElement","innerWidth","innerHeight","oldRotation","_svgFactory","pathId","clipPathUse","isPathUpdatable","use","maskId","use1","use2","cloneNode","changeOpacity","__foobar_exports__getDocument","DELIM","getTypeOptionSelectedItems","opts","prefix","selectionsChoose","selections","find","getTypeTypeSelectedItems","it","getDataTypeSelectedItems","topLevelPrefix","typeTypes","periodizeNumber","periodChar","numStr","formatPriceToStr","parsed","parsePriceFromStr","numVal","createConstructorApp","serverData","isManage","appCore","formatPrice","getCurrentDataTypeIndex","getCurrentDataType","dataType","calcPrice","reasonId","selectedItems","filteredPrices","price","conditions","condItem","_idx","edition","priceUnit","summ","unitCost","priceTotal","onBasicCostChange","dataTypeIdx","parsedValue","basicCost","unitMaterial","pricesHasChanged","saveCostChanges","setList","_el","getSelected","svgNew","fetchSvg","setProp","mainobj","isCheckbox","hasColors","reasonValue","colorCode","printHtml","captureNode","nWindow","nDoc","links","newNode","rel","head","appendChild","axios","getEditionCount","onValueChange","onSelectChange","selectedOptions","onEditionChange","onFileChange","dataTransfer","createImage","logo","pdf","renderContext","removeImage","_e","$refs","logoUpload","createApp","_app","preloaded","comment","Swiper","SwiperSlide","onSwiper","_swiper","mounted","observerLogo","MutationObserver","mutations","mutationRecord","mutation","logoElementBottom","targetLogo","logoElement","attributeFilter","elmnt","pos1","pos2","pos3","pos4","garabber","onmousedown","dragMouseDown","onmouseup","closeDragElement","onmousemove","elementDrag","offsetTop","offsetLeft","dragElement","methods","createEditorApp","passHandler","ev","getAllDataForWrapperChild","typeIdx","pricesSelected","selectedList","getAllDataForRowChild","row","priceRowIdx","isHeader","onConditionModalItemClick","textNode","currentTarget","addConditionsSelected","concat","onConditionModalSave","addConditionsTypeIdx","addConditionsPriceRowIdx","onConditionModalAdd","addPriceItem","newPriceItem","material","units","addedIdx","rowId","behavior","deleteSelectedPrices","_item","itemIdx","showConditionsModal","addConditionsList","addConditionsUsed","deleteConditionsItem","condIdx","_it","onCheckCellClick","updatePriceRow","onPriceNumericFieldChanged","fieldId","onPriceFieldUpdated","appMode","app","globalApp","mount","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","O","chunkIds","fn","priority","notFulfilled","fulfilled","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}
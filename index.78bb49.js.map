{"version":3,"file":"index.78bb49.js","mappings":"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","sources":["webpack:///webpack/runtime/chunk loaded","webpack:///./src/js/strings.js","webpack:///./src/js/toast.js","webpack:///./src/js/config.js","webpack:///./src/js/ServerDataError.js","webpack:///./src/js/data.js","webpack:///./src/js/show-structure.js","webpack:///./src/js/helpers.js","webpack:///./src/pdf.mjs","webpack:///./src/js/numbers.js","webpack:///./src/js/app-calculator.js","webpack:///./src/js/app-editor.js","webpack:///./src/index.js","webpack:///./src/scss/index.scss?6330","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// @ts-check\n\n/** getErrorText - Return plain text for error.\n * @param {string|Error|string[]|Error[]} error - Error or errors list.\n * @return {string}\n */\nexport function getErrorText(error) {\n  if (!error) {\n    return '';\n  }\n  if (Array.isArray(error)) {\n    return error.map(this.getErrorText.bind(this)).join('\\n');\n  }\n  if (error instanceof Error) {\n    error = error.message;\n  } else if (typeof error !== 'string') {\n    // TODO?\n    error = String(error);\n  }\n  return error;\n}\n","// @ts-check\n\nimport { Toast } from 'bootstrap';\nimport { getErrorText } from './strings';\n\n/** @type {Record<ToastType, string>} */\nconst bgClasses = {\n  info: 'bg-primary',\n  error: 'bg-danger',\n  success: 'bg-success',\n};\n\n/** @type {Record<ToastType, string>} */\nconst textClasses = {\n  error: 'text-danger',\n  info: 'text-primary',\n  success: 'text-success',\n};\n\n/** @type {Record<ToastType, string>} */\nconst iconClasses = {\n  error: 'exclamation',\n  info: 'info',\n  success: 'check',\n};\n\n/** @type {HTMLElement} */\nlet toastNode;\n\nlet toastInstance;\n\nfunction getToastNode() {\n  if (!toastNode) {\n    toastNode = /** @type {HTMLElement} */ (document.getElementById('toast-node'));\n  }\n  return toastNode;\n}\n\nfunction getToastInstance() {\n  if (!toastInstance) {\n    const node = getToastNode();\n    toastInstance = new Toast(node);\n  }\n  return toastInstance;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {string} removeClassPrefix\n * @param {string} replaceClass\n */\nfunction replaceNodeClasses(node, removeClassPrefix, replaceClass) {\n  const regEx = new RegExp('\\\\b(' + removeClassPrefix + '\\\\S*)\\\\b', 'g');\n  // const match = node.className.match(/\\b(text-bg-\\S+)\\b/g);\n  const match = node.className.match(regEx);\n  if (match && match.length) {\n    match.forEach((str) => {\n      if (str !== replaceClass) {\n        node.classList.remove(str);\n      }\n    });\n    // Remove fpound classes\n  }\n  node.classList.toggle(replaceClass, true);\n}\n\n/** @param {ToastParams} params */\nfunction updateToastNode(params) {\n  const { type = 'info' } = params;\n  const node = getToastNode();\n  replaceNodeClasses(node, 'bg-', bgClasses[type]);\n  // const iconWrapperNode = [>* @type {HTMLElement} <] (node.querySelector('.toast-icon-wrapper'));\n  // if (iconWrapperNode) {\n  //   replaceNodeClasses(iconWrapperNode, 'bg-', bgClasses[type]);\n  // }\n  const iconNode = /** @type {HTMLElement} */ (node.querySelector('#toast-icon'));\n  if (iconNode) {\n    // replaceNodeClasses(iconNode, 'text-', textClasses[type]);\n    iconNode.className = textClasses[type] + ' bi bi-' + iconClasses[type];\n  }\n  const titleNode = /** @type {HTMLElement} */ (node.querySelector('#toast-title'));\n  if (titleNode) {\n    titleNode.innerText = params.title || '';\n  }\n  const bodyNode = /** @type {HTMLElement} */ (node.querySelector('#toast-body'));\n  if (bodyNode) {\n    bodyNode.innerText = params.body || '';\n  }\n}\n\n/** @param {ToastParams} params */\nexport function showToast(params) {\n  updateToastNode(params);\n  const instance = getToastInstance();\n  instance.show();\n}\n\n/** @param {Error|string} body */\nexport function showErrorToast(body) {\n  showToast({ type: 'error', body: getErrorText(body) });\n}\n\n/** @param {string} body */\nexport function showInfoToast(body) {\n  showToast({ type: 'info', body });\n}\n\n/** @param {string} body */\nexport function showSuccessToast(body) {\n  showToast({ type: 'success', body });\n}\n","// @ts-check\n\nexport const nodeDev = process.env.NODE_ENV;\nexport const isDev = nodeDev === 'development';\n\nexport const dataFileUrl = './data/data.json';\n\nexport const updatePricesUrl = './update-prices.php';\n\nexport const defaultContentType = 'application/json; charset=utf-8';\n","// @ts-check\n\nexport class ServerDataError extends Error {\n  /**\n   * @param {string} message\n   * @param {string} [details]\n   */\n  constructor(message, details) {\n    super(message);\n    this.name = 'ServerDataError';\n    this.details = details;\n  }\n}\n","// @ts-check\n\nimport { getErrorText } from './strings';\nimport { dataFileUrl } from './config';\nimport { ServerDataError } from './ServerDataError';\nimport { defaultContentType, updatePricesUrl } from './config';\n\n/** @return {Promise<DataJson>} */\nexport async function loadServerData() {\n  const url = dataFileUrl;\n  /** @type {string|undefined} */\n  let text;\n  try {\n    const res = await fetch(url);\n    const { ok, status, statusText } = res;\n    // eslint-disable-next-line no-console\n    console.log('[loadServerData] Got response', {\n      ok,\n      status,\n      statusText,\n      res,\n    });\n    if (!ok) {\n      const reason = [status, statusText].filter(Boolean).join(', ');\n      const msg = [\n        '  ',\n        // Reson?\n        reason && `(${reason})`,\n      ]\n        .filter(Boolean)\n        .join(' ');\n      throw new Error(msg);\n    }\n    text = await res.text();\n    // eslint-disable-next-line no-console\n    console.log('[loadServerData] success: Got plain content', {\n      text,\n    });\n  } catch (err) {\n    const details = getErrorText(err);\n    const error = new ServerDataError('   ', details);\n    // eslint-disable-next-line no-console\n    console.error('[loadServerData] Network error', error.message, {\n      url,\n      details,\n      err,\n      error,\n    });\n    debugger; // eslint-disable-line no-debugger\n    throw error;\n  }\n  try {\n    /** @type {DataJson} */\n    const data = JSON.parse(text);\n    // eslint-disable-next-line no-console\n    console.log('[loadServerData] success: Got parsed data', {\n      data,\n    });\n    if (!data) {\n      const error = new Error('    .');\n      // eslint-disable-next-line no-console\n      console.error('[start]', error.message, {\n        error,\n      });\n      debugger; // eslint-disable-line no-debugger\n      throw error;\n    }\n    return data;\n  } catch (err) {\n    const details = getErrorText(err);\n    const error = new ServerDataError('  ', details);\n    // eslint-disable-next-line no-console\n    console.error('[loadServerData] Data error', error.message, {\n      details,\n      err,\n      error,\n    });\n    debugger; // eslint-disable-line no-debugger\n    throw error;\n  }\n}\n\n/** Send updated prices data to server\n * @param {DataJson} data\n * @param {number[]} pricesChangedDataTypes\n */\nexport async function saveCostChangesToServer(data, pricesChangedDataTypes) {\n  const changedPricesData = pricesChangedDataTypes.map((idx) => {\n    return {\n      idx,\n      prices: data.types[idx].prices,\n    };\n  });\n  const reqUrl = updatePricesUrl;\n  /** @type {RequestInit} */\n  const reqInit = {\n    method: 'POST',\n    headers: {\n      Accept: defaultContentType,\n      'Content-Type': defaultContentType,\n    },\n    body: JSON.stringify({ changedPrices: changedPricesData }),\n  };\n  console.log('[saveCostChangesToServer] start', {\n    changedPricesData,\n    reqInit,\n    reqUrl,\n    // yamlData,\n    data,\n  });\n  debugger;\n  const res = await fetch(reqUrl, reqInit);\n  const { ok, status, statusText } = res;\n  // eslint-disable-next-line no-console\n  console.log('[saveCostChangesToServer] response', {\n    ok,\n    status,\n    statusText,\n    res,\n  });\n  debugger;\n  if (!ok) {\n    const reason = [status, statusText].filter(Boolean).join(', ');\n    const msg = ['  ', reason && `(${reason})`].filter(Boolean).join(' ');\n    throw new Error(msg);\n  }\n  const resText = await res.text(); // res.json();\n  // eslint-disable-next-line no-console\n  console.log('[saveCostChangesToServer] success: Got data (raw)', resText);\n  if (resText.startsWith('{') || resText.startsWith('[')) {\n    const resData = JSON.parse(resText);\n    const { error } = resData;\n    if (error) {\n      const msg = [' ', error].filter(Boolean).join(': ');\n      throw new Error(msg);\n    }\n    console.log('[saveCostChangesToServer] success: Got data (parsed json)', {\n      resData,\n    });\n    debugger;\n    return resData;\n  } else {\n    const error = new ServerDataError('  ');\n    // eslint-disable-next-line no-console\n    console.error('[saveCostChangesToServer]', error.message, {\n      resText,\n      error,\n    });\n    debugger; // eslint-disable-line no-debugger\n    throw error;\n  }\n}\n","// @ts-check\n\nconst DELIM = ' / ';\nconst NL = '\\n';\nconst SP = '    ';\n\n/**\n * @param {TypeOption} data\n * @param {GetItemOptions} opts\n * @param {string} prefix\n */\nfunction getTypeOptionSelectedItems(data, opts = {}, prefix = '') {\n  const name = data.name;\n  const selectionsChoose = data.selectionsChoose;\n  /** @type {string[]} */\n  const arr = [];\n  prefix = [prefix, name].filter(Boolean).join(DELIM);\n  const selections = data.selections;\n  if ((!selections && opts.getAll) || data.selected) {\n    arr.push(prefix);\n  }\n  if (selections) {\n    if (opts.getAll) {\n      const items = selections.map(({ name }) => prefix + DELIM + name);\n      Array.prototype.push.apply(arr, items);\n    } else {\n      const selection = selections.find(({ name }) => name === selectionsChoose);\n      if (selection) {\n        arr.push(prefix + DELIM + selection.name);\n      }\n    }\n  }\n  return arr;\n}\n\n/**\n * @param {TypeType} data\n * @param {GetItemOptions} opts\n * @param {string} prefix\n */\nfunction getTypeTypeSelectedItems(data, opts = {}, prefix = '') {\n  const name = data.title;\n  if (name === ' ') {\n    // debugger;\n  }\n  // name = 'TypeType: ' + name;\n  /** @type {string[]} */\n  const arr = [];\n  prefix = [prefix, name].filter(Boolean).join(DELIM);\n  const options = data.options;\n  options\n    .filter(({ selected }) => opts.getAll || selected)\n    .forEach((it) => {\n      /** @type {string[]} */\n      const items = getTypeOptionSelectedItems(it, opts, prefix);\n      if (items.length) {\n        Array.prototype.push.apply(arr, items);\n      }\n    });\n  return arr;\n}\n\n/** The main method to get all the sub-options for the DataType\n * @param {DataType} data\n * @param {GetItemOptions} opts\n * @param {string} prefix\n */\nexport function getDataTypeSelectedItems(data, opts = {}, prefix = '') {\n  const name = data.name;\n  /** @type {string[]} */\n  const arr = [];\n  if (opts.topLevelPrefix) {\n    prefix = [prefix, name].filter(Boolean).join(DELIM);\n  }\n  const typeTypes = data.types;\n  typeTypes.forEach((it) => {\n    /** @type {string[]} */\n    const items = getTypeTypeSelectedItems(it, opts, prefix);\n    if (items.length) {\n      Array.prototype.push.apply(arr, items);\n    }\n  });\n  return arr;\n}\n\n/** Get all the items\n * @param {DataJson} data\n * @param {GetItemOptions} opts\n * @param {string} prefix\n */\nexport function getAllDataTypeItems(data, opts = {}, prefix = '') {\n  /** @type {string[]} */\n  const arr = [];\n  const nextOpts = { topLevelPrefix: true, ...opts };\n  data.types.forEach((dataType) => {\n    const items = getDataTypeSelectedItems(dataType, nextOpts, prefix);\n    if (items.length) {\n      Array.prototype.push.apply(arr, items);\n    }\n  });\n  return arr;\n}\n\n// DEBUG: Below are the data structure tree/options getters. See the entry point function `showDataStruct` below.\n\n/**\n * @param {TypeSelection} data\n * @param {string} prefix\n * @param {number} level\n */\nfunction showSelection(data, prefix, level) {\n  const sp = SP.repeat(level);\n  const name = data.name;\n  // name = 'Selection: ' + name;\n  let s = '';\n  if (prefix) {\n    s = prefix + DELIM + name + NL;\n  } else {\n    sp + '- ' + name + NL;\n  }\n  return s;\n}\n/**\n * @param {TypeOption} data\n * @param {string} prefix\n * @param {number} level\n */\nfunction showOption(data, prefix, level) {\n  const sp = SP.repeat(level);\n  const name = data.name;\n  // name = 'Option: ' + name;\n  let s = '';\n  if (prefix) {\n    prefix += DELIM + name;\n  } else {\n    s += sp + '- ' + name + NL;\n  }\n  if (data.selections) {\n    s += data.selections.map((it) => showSelection(it, prefix, level + 1)).join('');\n  } else {\n    // s += prefix + NL;\n  }\n  return s;\n}\n/**\n * @param {TypeType} data\n * @param {string} prefix\n * @param {number} level\n */\nfunction showSubTypes(data, prefix, level) {\n  const sp = SP.repeat(level);\n  const name = data.title;\n  // name = 'SubType: ' + name;\n  // const attrs = [\n  //   // Attrs..\n  //   data.colors && '',\n  //   data.checkbox && '',\n  // ].filter(Boolean);\n  // if (attrs.length) {\n  //   name += ' (' + attrs.join(', ') + ')';\n  // }\n  let s = '';\n  if (prefix) {\n    prefix += DELIM + name;\n  } else {\n    s += sp + '- ' + name + NL;\n  }\n  if (data.options) {\n    s += data.options.map((it) => showOption(it, prefix, level + 1)).join('');\n  } else if (prefix) {\n    // s += prefix + NL;\n  }\n  return s;\n}\n/**\n * @param {DataType} data\n * @param {boolean} showPrefix\n * @param {number} level\n */\nexport function showTopLevel(data, showPrefix, level) {\n  const sp = SP.repeat(level);\n  const name = data.name;\n  // name = 'TopLevel: ' + name;\n  let s = '';\n  const prefix = showPrefix ? name : '';\n  // s += prefix + NL;\n  if (!showPrefix) {\n    s += sp + '- ' + name + NL;\n  }\n  s += data.types.map((it) => showSubTypes(it, prefix, level + 1)).join('');\n  return s;\n}\n/** Get the data structure tree/options printable string\n * @param {DataJson} data\n * @param {boolean} showPrefix\n * @param {number} level\n */\nexport function showDataStruct(data, showPrefix = false, level = 0) {\n  return data.types.map((it) => showTopLevel(it, showPrefix, level)).join('');\n}\n","// @ts-check\n\nimport { isDev } from './config';\nimport { ServerDataError } from './ServerDataError';\nimport {\n  getAllDataTypeItems,\n  // getDataTypeSelectedItems,\n  // showDataStruct,\n} from './show-structure';\nimport { getErrorText } from './strings';\n\n/** Check if the page is in a 'manager'  mode?\n * @return {AppMode}\n */\nexport function getAppMode() {\n  const { pathname, search } = window.location;\n  if (pathname === '/manage' || (isDev && search === '?manage')) {\n    return 'manage';\n  }\n  if (pathname === '/editor' || (isDev && (pathname === '/editor.html' || search === '?editor'))) {\n    return 'editor';\n  }\n  return undefined;\n}\n\n/** DEBUG: Print the data structure tree/options\n * @param {DataJson} data\n */\nexport function debugDataStruct(data) {\n  /*\n   * const showTree = true;\n   * const title = !showTree ? 'Options' : 'Structure';\n   * const struct = showDataStruct(data, !showTree);\n   * // eslint-disable-next-line no-console\n   * console.log(title + ':\\n' + struct);\n   */\n  const allItems = getAllDataTypeItems(data, { getAll: true });\n  // const firstItems = getDataTypeSelectedItems(data.types[0], { getAll: true });\n  // eslint-disable-next-line no-console\n  console.log('All items:\\n' + allItems.join('\\n'));\n}\n\n/** @param {ServerDataError|Error|string} err */\nexport function showGlobalError(err) {\n  const errorNode = document.getElementById('global-error');\n  if (!errorNode) {\n    // TODO: To create the node?\n    return;\n  }\n  document.body.classList.toggle('with-error', true);\n  errorNode.classList.toggle('visible', true);\n  const title = getErrorText(err);\n  const details = err instanceof ServerDataError ? err.details : '';\n  const titleNode = /** @type {HTMLElement} */ (errorNode.querySelector('.error-title'));\n  const detailsNode = /** @type {HTMLElement} */ (errorNode.querySelector('.error-details'));\n  if (titleNode && detailsNode) {\n    titleNode.innerText = title;\n    detailsNode.innerText = details || '';\n  } else {\n    errorNode.innerText = [title, details].filter(Boolean).join('\\n\\n');\n  }\n}\n","/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/******/ // The require scope\n/******/ var __foobar_require__ = {};\n/******/\n/************************************************************************/\n/******/ /* webpack/runtime/define property getters */\n/******/ (() => {\n  /******/ // define getter functions for harmony exports\n  /******/ __foobar_require__.d = (exports, definition) => {\n    /******/ for (var key in definition) {\n      /******/ if (__foobar_require__.o(definition, key) && !__foobar_require__.o(exports, key)) {\n        /******/ Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        /******/\n      }\n      /******/\n    }\n    /******/\n  };\n  /******/\n})();\n/******/\n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/ (() => {\n  /******/ __foobar_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n  /******/\n})();\n/******/\n/************************************************************************/\nvar __foobar_exports__ = (globalThis.pdfjsLib = {});\n\n// EXPORTS\n__foobar_require__.d(__foobar_exports__, {\n  AbortException: () => /* reexport */ AbortException,\n  AnnotationEditorLayer: () => /* reexport */ AnnotationEditorLayer,\n  AnnotationEditorParamsType: () => /* reexport */ AnnotationEditorParamsType,\n  AnnotationEditorType: () => /* reexport */ AnnotationEditorType,\n  AnnotationEditorUIManager: () => /* reexport */ AnnotationEditorUIManager,\n  AnnotationLayer: () => /* reexport */ AnnotationLayer,\n  AnnotationMode: () => /* reexport */ AnnotationMode,\n  CMapCompressionType: () => /* reexport */ CMapCompressionType,\n  ColorPicker: () => /* reexport */ ColorPicker,\n  DOMSVGFactory: () => /* reexport */ DOMSVGFactory,\n  DrawLayer: () => /* reexport */ DrawLayer,\n  FeatureTest: () => /* reexport */ util_FeatureTest,\n  GlobalWorkerOptions: () => /* reexport */ GlobalWorkerOptions,\n  ImageKind: () => /* reexport */ util_ImageKind,\n  InvalidPDFException: () => /* reexport */ InvalidPDFException,\n  MissingPDFException: () => /* reexport */ MissingPDFException,\n  OPS: () => /* reexport */ OPS,\n  Outliner: () => /* reexport */ Outliner,\n  PDFDataRangeTransport: () => /* reexport */ PDFDataRangeTransport,\n  PDFDateString: () => /* reexport */ PDFDateString,\n  PDFWorker: () => /* reexport */ PDFWorker,\n  PasswordResponses: () => /* reexport */ PasswordResponses,\n  PermissionFlag: () => /* reexport */ PermissionFlag,\n  PixelsPerInch: () => /* reexport */ PixelsPerInch,\n  RenderingCancelledException: () => /* reexport */ RenderingCancelledException,\n  TextLayer: () => /* reexport */ TextLayer,\n  UnexpectedResponseException: () => /* reexport */ UnexpectedResponseException,\n  Util: () => /* reexport */ Util,\n  VerbosityLevel: () => /* reexport */ VerbosityLevel,\n  XfaLayer: () => /* reexport */ XfaLayer,\n  build: () => /* reexport */ build,\n  createValidAbsoluteUrl: () => /* reexport */ createValidAbsoluteUrl,\n  fetchData: () => /* reexport */ fetchData,\n  getDocument: () => /* reexport */ getDocument,\n  getFilenameFromUrl: () => /* reexport */ getFilenameFromUrl,\n  getPdfFilenameFromUrl: () => /* reexport */ getPdfFilenameFromUrl,\n  getXfaPageViewport: () => /* reexport */ getXfaPageViewport,\n  isDataScheme: () => /* reexport */ isDataScheme,\n  isPdfFile: () => /* reexport */ isPdfFile,\n  noContextMenu: () => /* reexport */ noContextMenu,\n  normalizeUnicode: () => /* reexport */ normalizeUnicode,\n  renderTextLayer: () => /* reexport */ renderTextLayer,\n  setLayerDimensions: () => /* reexport */ setLayerDimensions,\n  shadow: () => /* reexport */ shadow,\n  updateTextLayer: () => /* reexport */ updateTextLayer,\n  version: () => /* reexport */ version,\n}); // CONCATENATED MODULE: ./src/shared/util.js\n\nconst isNodeJS =\n  typeof process === 'object' &&\n  process + '' === '[object process]' &&\n  !process.versions.nw &&\n  !(process.versions.electron && process.type && process.type !== 'browser');\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst MAX_IMAGE_SIZE_TO_CACHE = 10e6;\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  OPLIST: 0x100,\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3,\n};\nconst AnnotationEditorPrefix = 'pdfjs_internal_editor_';\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800,\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4,\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3,\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26,\n};\nconst AnnotationReplyType = {\n  GROUP: 'Group',\n  REPLY: 'R',\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200,\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5,\n};\nconst AnnotationActionEventType = {\n  E: 'Mouse Enter',\n  X: 'Mouse Exit',\n  D: 'Mouse Down',\n  U: 'Mouse Up',\n  Fo: 'Focus',\n  Bl: 'Blur',\n  PO: 'PageOpen',\n  PC: 'PageClose',\n  PV: 'PageVisible',\n  PI: 'PageInvisible',\n  K: 'Keystroke',\n  F: 'Format',\n  V: 'Validate',\n  C: 'Calculate',\n};\nconst DocumentActionEventType = {\n  WC: 'WillClose',\n  WS: 'WillSave',\n  DS: 'DidSave',\n  WP: 'WillPrint',\n  DP: 'DidPrint',\n};\nconst PageActionEventType = {\n  O: 'PageOpen',\n  C: 'PageClose',\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5,\n};\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1,\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2,\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case 'http:':\n    case 'https:':\n    case 'ftp:':\n    case 'mailto:':\n    case 'tel:':\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  try {\n    if (options && typeof url === 'string') {\n      if (options.addDefaultProtocol && url.startsWith('www.')) {\n        const dots = url.match(/\\./g);\n        if (dots?.length >= 2) {\n          url = `http://${url}`;\n        }\n      }\n      if (options.tryConvertEncoding) {\n        try {\n          url = stringToUTF8String(url);\n        } catch {}\n      }\n    }\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch {}\n  return null;\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false,\n  });\n  return value;\n}\nconst BaseException = (function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    if (this.constructor === BaseException) {\n      unreachable('Cannot initialize BaseException.');\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n})();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, 'PasswordException');\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, 'UnknownErrorException');\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, 'InvalidPDFException');\n  }\n}\nclass MissingPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, 'MissingPDFException');\n  }\n}\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg, 'UnexpectedResponseException');\n    this.status = status;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, 'FormatError');\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, 'AbortException');\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== 'object' || bytes?.length === undefined) {\n    unreachable('Invalid argument for bytesToString');\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join('');\n}\nfunction stringToBytes(str) {\n  if (typeof str !== 'string') {\n    unreachable('Invalid argument for stringToBytes');\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(\n    (value >> 24) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 8) & 0xff,\n    value & 0xff,\n  );\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction objectFromMap(map) {\n  const obj = Object.create(null);\n  for (const [key, value] of map) {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function('');\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, 'isLittleEndian', isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, 'isEvalSupported', isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, 'isOffscreenCanvasSupported', typeof OffscreenCanvas !== 'undefined');\n  }\n  static get platform() {\n    if (typeof navigator !== 'undefined' && typeof navigator?.platform === 'string') {\n      return shadow(this, 'platform', {\n        isMac: navigator.platform.includes('Mac'),\n      });\n    }\n    return shadow(this, 'platform', {\n      isMac: false,\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(\n      this,\n      'isCSSRoundSupported',\n      globalThis.CSS?.supports?.('width: round(1.5px, 1px)'),\n    );\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), (n) => n.toString(16).padStart(2, '0'));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5],\n    ];\n  }\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = this.applyTransform(r, m);\n    const p2 = this.applyTransform(r.slice(2, 4), m);\n    const p3 = this.applyTransform([r[0], r[3]], m);\n    const p4 = this.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1]),\n    ];\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [\n      m[3] / d,\n      -m[1] / d,\n      -m[2] / d,\n      m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d,\n      (m[4] * m[1] - m[5] * m[0]) / d,\n    ];\n  }\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    if (minMax) {\n      minMax[0] = Math.min(minMax[0], x0, x3);\n      minMax[1] = Math.min(minMax[1], y0, y3);\n      minMax[2] = Math.max(minMax[2], x0, x3);\n      minMax[3] = Math.max(minMax[3], y0, y3);\n    } else {\n      minMax = [Math.min(x0, x3), Math.min(y0, y3), Math.max(x0, x3), Math.max(y0, y3)];\n    }\n    this.#getExtremum(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      3 * (-x0 + 3 * (x1 - x2) + x3),\n      6 * (x0 - 2 * x1 + x2),\n      3 * (x1 - x0),\n      minMax,\n    );\n    this.#getExtremum(\n      x0,\n      x1,\n      x2,\n      x3,\n      y0,\n      y1,\n      y2,\n      y3,\n      3 * (-y0 + 3 * (y1 - y2) + y3),\n      6 * (y0 - 2 * y1 + y2),\n      3 * (y1 - y0),\n      minMax,\n    );\n    return minMax;\n  }\n}\nconst PDFStringTranslateTable = /* unused pure expression or super */ null && [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6,\n  0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039,\n  0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02,\n  0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac,\n];\nfunction stringToPDFString(str) {\n  if (str[0] >= '\\xEF') {\n    let encoding;\n    if (str[0] === '\\xFE' && str[1] === '\\xFF') {\n      encoding = 'utf-16be';\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === '\\xFF' && str[1] === '\\xFE') {\n      encoding = 'utf-16le';\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === '\\xEF' && str[1] === '\\xBB' && str[2] === '\\xBF') {\n      encoding = 'utf-8';\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true,\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (!decoded.includes('\\x1b')) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, '');\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join('');\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [\n    date.getUTCFullYear().toString(),\n    (date.getUTCMonth() + 1).toString().padStart(2, '0'),\n    date.getUTCDate().toString().padStart(2, '0'),\n    date.getUTCHours().toString().padStart(2, '0'),\n    date.getUTCMinutes().toString().padStart(2, '0'),\n    date.getUTCSeconds().toString().padStart(2, '0'),\n  ];\n  return buffer.join('');\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex =\n      /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([['', 't']]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) =>\n    p1 ? p1.normalize('NFKC') : NormalizationMap.get(p2),\n  );\n}\nfunction getUuid() {\n  if (typeof crypto !== 'undefined' && typeof crypto?.randomUUID === 'function') {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  if (typeof crypto !== 'undefined' && typeof crypto?.getRandomValues === 'function') {\n    crypto.getRandomValues(buf);\n  } else {\n    for (let i = 0; i < 32; i++) {\n      buf[i] = Math.floor(Math.random() * 255);\n    }\n  }\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = 'pdfjs_internal_id_';\nconst FontRenderOps = {\n  BEZIER_CURVE_TO: 0,\n  MOVE_TO: 1,\n  LINE_TO: 2,\n  QUADRATIC_CURVE_TO: 3,\n  RESTORE: 4,\n  SAVE: 5,\n  SCALE: 6,\n  TRANSFORM: 7,\n  TRANSLATE: 8,\n}; // CONCATENATED MODULE: ./src/display/base_factory.js\n\nclass BaseFilterFactory {\n  constructor() {\n    if (this.constructor === BaseFilterFactory) {\n      unreachable('Cannot initialize BaseFilterFactory.');\n    }\n  }\n  addFilter(maps) {\n    return 'none';\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return 'none';\n  }\n  addAlphaFilter(map) {\n    return 'none';\n  }\n  addLuminosityFilter(map) {\n    return 'none';\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return 'none';\n  }\n  destroy(keepHCM = false) {}\n}\nclass BaseCanvasFactory {\n  constructor() {\n    if (this.constructor === BaseCanvasFactory) {\n      unreachable('Cannot initialize BaseCanvasFactory.');\n    }\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error('Invalid canvas size');\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext('2d'),\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error('Canvas is not specified');\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error('Invalid canvas size');\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error('Canvas is not specified');\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable('Abstract method `_createCanvas` called.');\n  }\n}\nclass BaseCMapReaderFactory {\n  constructor({ baseUrl = null, isCompressed = true }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      unreachable('Cannot initialize BaseCMapReaderFactory.');\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({ name }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The CMap \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.',\n      );\n    }\n    if (!name) {\n      throw new Error('CMap name must be specified.');\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? '.bcmap' : '');\n    const compressionType = this.isCompressed\n      ? CMapCompressionType.BINARY\n      : CMapCompressionType.NONE;\n    return this._fetchData(url, compressionType).catch((reason) => {\n      throw new Error(`Unable to load ${this.isCompressed ? 'binary ' : ''}CMap at: ${url}`);\n    });\n  }\n  _fetchData(url, compressionType) {\n    unreachable('Abstract method `_fetchData` called.');\n  }\n}\nclass BaseStandardFontDataFactory {\n  constructor({ baseUrl = null }) {\n    if (this.constructor === BaseStandardFontDataFactory) {\n      unreachable('Cannot initialize BaseStandardFontDataFactory.');\n    }\n    this.baseUrl = baseUrl;\n  }\n  async fetch({ filename }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The standard font \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"standardFontDataUrl\" API parameter is provided.',\n      );\n    }\n    if (!filename) {\n      throw new Error('Font filename must be specified.');\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetchData(url).catch((reason) => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  _fetchData(url) {\n    unreachable('Abstract method `_fetchData` called.');\n  }\n}\nclass BaseSVGFactory {\n  constructor() {\n    if (this.constructor === BaseSVGFactory) {\n      unreachable('Cannot initialize BaseSVGFactory.');\n    }\n  }\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error('Invalid SVG dimensions');\n    }\n    const svg = this._createSVG('svg:svg');\n    svg.setAttribute('version', '1.1');\n    if (!skipDimensions) {\n      svg.setAttribute('width', `${width}px`);\n      svg.setAttribute('height', `${height}px`);\n    }\n    svg.setAttribute('preserveAspectRatio', 'none');\n    svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== 'string') {\n      throw new Error('Invalid SVG element type');\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable('Abstract method `_createSVG` called.');\n  }\n} // CONCATENATED MODULE: ./src/display/display_utils.js\n\nconst SVG_NS = 'http://www.w3.org/2000/svg';\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({ docId, ownerDocument = globalThis.document } = {}) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return (this.#_cache ||= new Map());\n  }\n  get #hcmCache() {\n    return (this.#_hcmCache ||= new Map());\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement('div');\n      const { style } = div;\n      style.visibility = 'hidden';\n      style.contain = 'strict';\n      style.width = style.height = 0;\n      style.position = 'absolute';\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, 'svg');\n      svg.setAttribute('width', 0);\n      svg.setAttribute('height', 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, 'defs');\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(',');\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(','), bufferG.join(','), bufferB.join(',')];\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return 'none';\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = 'base';\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = 'none';\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: 'none',\n        filter: null,\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = '';\n    if ((fgColor === '#000000' && bgColor === '#ffffff') || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(',');\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = (info.filter = this.#createFilter(id));\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + (i / n) * (end - start);\n      }\n      return arr.join(',');\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || 'luminosity');\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = 'luminosity';\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = 'none';\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: 'none',\n        filter: null,\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = '';\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(',');\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = (info.filter = this.#createFilter(id));\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(\n      getSteps(newFgRGB[0], newBgRGB[0], 5),\n      getSteps(newFgRGB[1], newBgRGB[1], 5),\n      getSteps(newFgRGB[2], newBgRGB[2], 5),\n      filter,\n    );\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#hcmCache.size !== 0) {\n      return;\n    }\n    if (this.#_defs) {\n      this.#_defs.parentNode.parentNode.remove();\n      this.#_defs = null;\n    }\n    if (this.#_cache) {\n      this.#_cache.clear();\n      this.#_cache = null;\n    }\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, 'feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('values', '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0');\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, 'feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute(\n      'values',\n      '0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0',\n    );\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, 'filter');\n    filter.setAttribute('color-interpolation-filters', 'sRGB');\n    filter.setAttribute('id', id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute('type', 'discrete');\n    feFunc.setAttribute('tableValues', table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, 'feComponentTransfer');\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, 'feFuncR', rTable);\n    this.#appendFeFunc(feComponentTransfer, 'feFuncG', gTable);\n    this.#appendFeFunc(feComponentTransfer, 'feFuncB', bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, 'feComponentTransfer');\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, 'feFuncA', aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue('color'));\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({ ownerDocument = globalThis.document } = {}) {\n    super();\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\nasync function fetchData(url, type = 'text') {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case 'arraybuffer':\n        return response.arrayBuffer();\n      case 'blob':\n        return response.blob();\n      case 'json':\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case 'arraybuffer':\n          case 'blob':\n          case 'json':\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    return fetchData(url, this.isCompressed ? 'arraybuffer' : 'text').then((data) => ({\n      cMapData: data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data),\n      compressionType,\n    }));\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  _fetchData(url) {\n    return fetchData(url, 'arraybuffer').then((data) => new Uint8Array(data));\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\nclass PageViewport {\n  constructor({ viewBox, scale, rotation, offsetX = 0, offsetY = 0, dontFlip = false }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error('PageViewport: Invalid rotation, must be a multiple of 90 degrees.');\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY,\n    ];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const { viewBox } = this;\n    return shadow(this, 'rawDims', {\n      pageWidth: viewBox[2] - viewBox[0],\n      pageHeight: viewBox[3] - viewBox[1],\n      pageX: viewBox[0],\n      pageY: viewBox[1],\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n  convertToViewportPoint(x, y) {\n    return Util.applyTransform([x, y], this.transform);\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    return Util.applyInverseTransform([x, y], this.transform);\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, 'RenderingCancelledException');\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === '') {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === 'data:';\n}\nfunction isPdfFile(filename) {\n  return typeof filename === 'string' && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf('/') + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = 'document.pdf') {\n  if (typeof url !== 'string') {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename =\n    reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes('%')) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now(),\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const { name } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const { name, start, end } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join('');\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  try {\n    const { protocol } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    return protocol === 'http:' || protocol === 'https:';\n  } catch {\n    return false;\n  }\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction deprecated(details) {\n  console.log('Deprecated API usage: ' + details);\n}\nlet pdfDateStringRegex;\nclass PDFDateString {\n  static toDateObject(input) {\n    if (!input || typeof input !== 'string') {\n      return null;\n    }\n    pdfDateStringRegex ||= new RegExp(\n      '^D:' +\n        '(\\\\d{4})' +\n        '(\\\\d{2})?' +\n        '(\\\\d{2})?' +\n        '(\\\\d{2})?' +\n        '(\\\\d{2})?' +\n        '(\\\\d{2})?' +\n        '([Z|+|-])?' +\n        '(\\\\d{2})?' +\n        \"'?\" +\n        '(\\\\d{2})?' +\n        \"'?\",\n    );\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || 'Z';\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === '-') {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === '+') {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, { scale = 1, rotation = 0 }) {\n  const { width, height } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    scale,\n    rotation,\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith('#')) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith('rgb(')) {\n    return color\n      .slice(4, -1)\n      .split(',')\n      .map((x) => parseInt(x));\n  }\n  if (color.startsWith('rgba(')) {\n    return color\n      .slice(5, -1)\n      .split(',')\n      .map((x) => parseInt(x))\n      .slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement('span');\n  span.style.visibility = 'hidden';\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const { pageWidth, pageHeight } = viewport.rawDims;\n    const { style } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--scale-factor) * ${pageWidth}px`,\n      h = `var(--scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(${w}, 1px)` : `calc(${w})`,\n      heightStr = useRound ? `round(${h}, 1px)` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute('data-main-rotation', viewport.rotation);\n  }\n} // CONCATENATED MODULE: ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  constructor(editor) {\n    this.#editor = editor;\n  }\n  render() {\n    const editToolbar = (this.#toolbar = document.createElement('div'));\n    editToolbar.className = 'editToolbar';\n    editToolbar.setAttribute('role', 'toolbar');\n    editToolbar.addEventListener('contextmenu', noContextMenu);\n    editToolbar.addEventListener('pointerdown', EditorToolbar.#pointerDown);\n    const buttons = (this.#buttons = document.createElement('div'));\n    buttons.className = 'buttons';\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const { style } = editToolbar;\n      const x = this.#editor._uiManager.direction === 'ltr' ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    this.#addDeleteButton();\n    return editToolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  #addListenersToElement(element) {\n    element.addEventListener('focusin', this.#focusIn.bind(this), {\n      capture: true,\n    });\n    element.addEventListener('focusout', this.#focusOut.bind(this), {\n      capture: true,\n    });\n    element.addEventListener('contextmenu', noContextMenu);\n  }\n  hide() {\n    this.#toolbar.classList.add('hidden');\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove('hidden');\n  }\n  #addDeleteButton() {\n    const button = document.createElement('button');\n    button.className = 'delete';\n    button.tabIndex = 0;\n    button.setAttribute('data-l10n-id', `pdfjs-editor-remove-${this.#editor.editorType}-button`);\n    this.#addListenersToElement(button);\n    button.addEventListener('click', (e) => {\n      this.#editor._uiManager.delete();\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement('div');\n    divider.className = 'divider';\n    return divider;\n  }\n  addAltTextButton(button) {\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = (this.#toolbar = document.createElement('div'));\n    editToolbar.className = 'editToolbar';\n    editToolbar.setAttribute('role', 'toolbar');\n    editToolbar.addEventListener('contextmenu', noContextMenu);\n    const buttons = (this.#buttons = document.createElement('div'));\n    buttons.className = 'buttons';\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const { style } = (this.#toolbar ||= this.#render());\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement('button');\n    button.className = 'highlightButton';\n    button.tabIndex = 0;\n    button.setAttribute('data-l10n-id', `pdfjs-highlight-floating-button1`);\n    const span = document.createElement('span');\n    button.append(span);\n    span.className = 'visuallyHidden';\n    span.setAttribute('data-l10n-id', 'pdfjs-highlight-floating-button-label');\n    button.addEventListener('contextmenu', noContextMenu);\n    button.addEventListener('click', () => {\n      this.#uiManager.highlightSelection('floating_button');\n    });\n    this.#buttons.append(button);\n  }\n} // CONCATENATED MODULE: ./src/display/editor/tools.js\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nfunction opacityToHex(opacity) {\n  return Math.round(Math.min(255, Math.max(1, 255 * opacity)))\n    .toString(16)\n    .padStart(2, '0');\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext('2d');\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, '_isSVGFittingCanvas', promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false,\n      };\n      let image;\n      if (typeof rawData === 'string') {\n        data.url = rawData;\n        image = await fetchData(rawData, 'blob');\n      } else {\n        image = data.file = rawData;\n      }\n      if (image.type === 'image/svg+xml') {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = (data.svgUrl = fileReader.result);\n            imageElement.src = (await mustRemoveAspectRatioPromise)\n              ? `${url}#svgView(preserveAspectRatio(none))`\n              : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      console.error(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const { lastModified, name, size, type } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({ cmd, undo, post, mustExec, type = NaN, overwriteIfSameType = false, keepUndo = false }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type,\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const { undo, post } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const { cmd, post } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const { isMac } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith('mac+');\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options,\n          });\n          this.allKeys.add(key.split('+').at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options,\n          });\n          this.allKeys.add(key.split('+').at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push('alt');\n    }\n    if (event.ctrlKey) {\n      this.buffer.push('ctrl');\n    }\n    if (event.metaKey) {\n      this.buffer.push('meta');\n    }\n    if (event.shiftKey) {\n      this.buffer.push('shift');\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join('+');\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: { bubbles = false, args = [], checker = null },\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([\n    ['CanvasText', [0, 0, 0]],\n    ['Canvas', [255, 255, 255]],\n  ]);\n  get _colors() {\n    const colors = new Map([\n      ['CanvasText', null],\n      ['Canvas', null],\n    ]);\n    getColorValues(colors);\n    return shadow(this, '_colors', colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia('(forced-colors: active)').matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  #enableHighlightFloatingButton = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #boundBlur = this.blur.bind(this);\n  #boundFocus = this.focus.bind(this);\n  #boundCopy = this.copy.bind(this);\n  #boundCut = this.cut.bind(this);\n  #boundPaste = this.paste.bind(this);\n  #boundKeydown = this.keydown.bind(this);\n  #boundKeyup = this.keyup.bind(this);\n  #boundOnEditingAction = this.onEditingAction.bind(this);\n  #boundOnPageChanging = this.onPageChanging.bind(this);\n  #boundOnScaleChanging = this.onScaleChanging.bind(this);\n  #boundSelectionChange = this.#selectionChange.bind(this);\n  #boundOnRotationChanging = this.onRotationChanging.bind(this);\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false,\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = (self) =>\n      self.#container.contains(document.activeElement) &&\n      document.activeElement.tagName !== 'BUTTON' &&\n      self.hasSomethingToControl();\n    const textInputChecker = (_self, { target: el }) => {\n      if (el instanceof HTMLInputElement) {\n        const { type } = el;\n        return type !== 'text' && type !== 'number';\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(\n      this,\n      '_keyboardManager',\n      new KeyboardManager([\n        [\n          ['ctrl+a', 'mac+meta+a'],\n          proto.selectAll,\n          {\n            checker: textInputChecker,\n          },\n        ],\n        [\n          ['ctrl+z', 'mac+meta+z'],\n          proto.undo,\n          {\n            checker: textInputChecker,\n          },\n        ],\n        [\n          ['ctrl+y', 'ctrl+shift+z', 'mac+meta+shift+z', 'ctrl+shift+Z', 'mac+meta+shift+Z'],\n          proto.redo,\n          {\n            checker: textInputChecker,\n          },\n        ],\n        [\n          [\n            'Backspace',\n            'alt+Backspace',\n            'ctrl+Backspace',\n            'shift+Backspace',\n            'mac+Backspace',\n            'mac+alt+Backspace',\n            'mac+ctrl+Backspace',\n            'Delete',\n            'ctrl+Delete',\n            'shift+Delete',\n            'mac+Delete',\n          ],\n          proto.delete,\n          {\n            checker: textInputChecker,\n          },\n        ],\n        [\n          ['Enter', 'mac+Enter'],\n          proto.addNewEditorFromKeyboard,\n          {\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(el) &&\n              !self.isEnterHandled,\n          },\n        ],\n        [\n          [' ', 'mac+ '],\n          proto.addNewEditorFromKeyboard,\n          {\n            checker: (self, { target: el }) =>\n              !(el instanceof HTMLButtonElement) &&\n              self.#container.contains(document.activeElement),\n          },\n        ],\n        [['Escape', 'mac+Escape'], proto.unselectAll],\n        [\n          ['ArrowLeft', 'mac+ArrowLeft'],\n          proto.translateSelectedEditors,\n          {\n            args: [-small, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowLeft', 'mac+shift+ArrowLeft'],\n          proto.translateSelectedEditors,\n          {\n            args: [-big, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowRight', 'mac+ArrowRight'],\n          proto.translateSelectedEditors,\n          {\n            args: [small, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowRight', 'mac+shift+ArrowRight'],\n          proto.translateSelectedEditors,\n          {\n            args: [big, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowUp', 'mac+ArrowUp'],\n          proto.translateSelectedEditors,\n          {\n            args: [0, -small],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowUp', 'mac+shift+ArrowUp'],\n          proto.translateSelectedEditors,\n          {\n            args: [0, -big],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowDown', 'mac+ArrowDown'],\n          proto.translateSelectedEditors,\n          {\n            args: [0, small],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowDown', 'mac+shift+ArrowDown'],\n          proto.translateSelectedEditors,\n          {\n            args: [0, big],\n            checker: arrowChecker,\n          },\n        ],\n      ]),\n    );\n  }\n  constructor(\n    container,\n    viewer,\n    altTextManager,\n    eventBus,\n    pdfDocument,\n    pageColors,\n    highlightColors,\n    enableHighlightFloatingButton,\n    mlManager,\n  ) {\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this._eventBus = eventBus;\n    this._eventBus._on('editingaction', this.#boundOnEditingAction);\n    this._eventBus._on('pagechanging', this.#boundOnPageChanging);\n    this._eventBus._on('scalechanging', this.#boundOnScaleChanging);\n    this._eventBus._on('rotationchanging', this.#boundOnRotationChanging);\n    this.#addSelectionListener();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0,\n    };\n    this.isShiftKeyDown = false;\n  }\n  destroy() {\n    this.#removeKeyboardManager();\n    this.#removeFocusManager();\n    this._eventBus._off('editingaction', this.#boundOnEditingAction);\n    this._eventBus._off('pagechanging', this.#boundOnPageChanging);\n    this._eventBus._off('scalechanging', this.#boundOnScaleChanging);\n    this._eventBus._off('rotationchanging', this.#boundOnRotationChanging);\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this.#removeSelectionListener();\n  }\n  async mlGuess(data) {\n    return this.#mlManager?.guess(data) || null;\n  }\n  get hasMLManager() {\n    return !!this.#mlManager;\n  }\n  get hcmFilter() {\n    return shadow(\n      this,\n      'hcmFilter',\n      this.#pageColors\n        ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background)\n        : 'none',\n    );\n  }\n  get direction() {\n    return shadow(this, 'direction', getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(\n      this,\n      'highlightColors',\n      this.#highlightColors\n        ? new Map(\n            this.#highlightColors.split(',').map((pair) => pair.split('=').map((x) => x.trim())),\n          )\n        : null,\n    );\n  }\n  get highlightColorNames() {\n    return shadow(\n      this,\n      'highlightColorNames',\n      this.highlightColors ? new Map(Array.from(this.highlightColors, (e) => e.reverse())) : null,\n    );\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor) {\n    this.#altTextManager?.editAltText(this, editor);\n  }\n  onPageChanging({ pageNumber }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const { x: layerX, y: layerY, width, height } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle('noUserSelect', value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({ scale }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n  }\n  onRotationChanging({ pagesRotation }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({ anchorNode }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  highlightSelection(methodOfCreation = '') {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const { anchorNode, anchorOffset, focusNode, focusOffset } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest('.textLayer');\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    if (this.#mode === AnnotationEditorType.NONE) {\n      this._eventBus.dispatch('showannotationeditorui', {\n        source: this,\n        mode: AnnotationEditorType.HIGHLIGHT,\n      });\n      this.showAllEditors('highlight', true, true);\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        layer.createAndAddNewEditor(\n          {\n            x: 0,\n            y: 0,\n          },\n          false,\n          {\n            methodOfCreation,\n            boxes,\n            anchorNode,\n            anchorOffset,\n            focusNode,\n            focusOffset,\n            text,\n          },\n        );\n        break;\n      }\n    }\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest('.textLayer');\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === 'ltr');\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false,\n        });\n      }\n      return;\n    }\n    const { anchorNode } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest('.textLayer');\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false,\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true,\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors('highlight', true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const pointerup = (e) => {\n        if (e.type === 'pointerup' && e.button !== 0) {\n          return;\n        }\n        window.removeEventListener('pointerup', pointerup);\n        window.removeEventListener('blur', pointerup);\n        if (e.type === 'pointerup') {\n          this.#onSelectEnd('main_toolbar');\n        }\n      };\n      window.addEventListener('pointerup', pointerup);\n      window.addEventListener('blur', pointerup);\n    }\n  }\n  #onSelectEnd(methodOfCreation = '') {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener('selectionchange', this.#boundSelectionChange);\n  }\n  #removeSelectionListener() {\n    document.removeEventListener('selectionchange', this.#boundSelectionChange);\n  }\n  #addFocusManager() {\n    window.addEventListener('focus', this.#boundFocus);\n    window.addEventListener('blur', this.#boundBlur);\n  }\n  #removeFocusManager() {\n    window.removeEventListener('focus', this.#boundFocus);\n    window.removeEventListener('blur', this.#boundBlur);\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd('main_toolbar');\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const { activeElement } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\n      'focusin',\n      () => {\n        lastEditor._focusEventsAllowed = true;\n      },\n      {\n        once: true,\n      },\n    );\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    window.addEventListener('keydown', this.#boundKeydown);\n    window.addEventListener('keyup', this.#boundKeyup);\n  }\n  #removeKeyboardManager() {\n    window.removeEventListener('keydown', this.#boundKeydown);\n    window.removeEventListener('keyup', this.#boundKeyup);\n  }\n  #addCopyPasteListeners() {\n    document.addEventListener('copy', this.#boundCopy);\n    document.addEventListener('cut', this.#boundCut);\n    document.addEventListener('paste', this.#boundPaste);\n  }\n  #removeCopyPasteListeners() {\n    document.removeEventListener('copy', this.#boundCopy);\n    document.removeEventListener('cut', this.#boundCut);\n    document.removeEventListener('paste', this.#boundPaste);\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData('application/pdfjs', JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  paste(event) {\n    event.preventDefault();\n    const { clipboardData } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData('application/pdfjs');\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true,\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === 'Shift') {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === 'Shift') {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd('main_toolbar');\n      }\n    }\n  }\n  onEditingAction({ name }) {\n    switch (name) {\n      case 'undo':\n      case 'redo':\n      case 'delete':\n      case 'selectAll':\n        this[name]();\n        break;\n      case 'highlightSelection':\n        this.highlightSelection('context_menu');\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(\n      ([key, value]) => this.#previousStates[key] !== value,\n    );\n    if (hasChanged) {\n      this._eventBus.dispatch('annotationeditorstateschanged', {\n        source: this,\n        details: Object.assign(this.#previousStates, details),\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch('annotationeditorparamschanged', {\n      source: this,\n      details,\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false,\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false,\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      return;\n    }\n    this.setEditingState(true);\n    this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId && isFromKeyboard) {\n      this.addNewEditorFromKeyboard();\n      return;\n    }\n    if (!editId) {\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n        break;\n      }\n    }\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(mode) {\n    if (mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch('switchannotationeditormode', {\n      source: this,\n      mode,\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor();\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch('reporttelemetry', {\n          source: this,\n          details: {\n            type: 'editing',\n            data: {\n              type: 'highlight',\n              action: 'toggle_visibility',\n            },\n          },\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors('highlight', value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle('waiting', mustWait);\n    }\n  }\n  #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      for (const layer of this.#allLayers.values()) {\n        layer.enable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    this.unselect(editor);\n    if (\n      !editor.annotationElementId ||\n      !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)\n    ) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {\n    }\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection,\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n  setSelected(editor) {\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection,\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty(),\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [...this.#selectedEditors];\n    const cmd = () => {\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true,\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection,\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false,\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n            }\n          }\n        },\n        mustExec: false,\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1,\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{ x, y, pageIndex }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||=\n        x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, { newX, newY, newPageIndex }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, { savedX, savedY, savedPageIndex }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true,\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return (\n      this.getActive()?.shouldGetKeyboardEvents() ||\n      (this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents())\n    );\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, 'imageManager', new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute('data-main-rotation')) {\n      case '90':\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      case '180':\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n      case '270':\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth,\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight,\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const { x, y, width, height } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({ annotationElementId, id }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({ annotationElementId }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n} // CONCATENATED MODULE: ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = '';\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #editor = null;\n  static _l10nPromise = null;\n  constructor(editor) {\n    this.#editor = editor;\n  }\n  static initialize(l10nPromise) {\n    AltText._l10nPromise ||= l10nPromise;\n  }\n  async render() {\n    const altText = (this.#altTextButton = document.createElement('button'));\n    altText.className = 'altText';\n    const msg = await AltText._l10nPromise.get('pdfjs-editor-alt-text-button-label');\n    altText.textContent = msg;\n    altText.setAttribute('aria-label', msg);\n    altText.tabIndex = '0';\n    altText.addEventListener('contextmenu', noContextMenu);\n    altText.addEventListener('pointerdown', (event) => event.stopPropagation());\n    const onClick = (event) => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n    };\n    altText.addEventListener('click', onClick, {\n      capture: true,\n    });\n    altText.addEventListener('keydown', (event) => {\n      if (event.target === altText && event.key === 'Enter') {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    });\n    await this.#setState();\n    return altText;\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard,\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative,\n    };\n  }\n  set data({ altText, decorative }) {\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    this.#altText = altText;\n    this.#altTextDecorative = decorative;\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextTooltip = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (!this.#altText && !this.#altTextDecorative) {\n      button.classList.remove('done');\n      this.#altTextTooltip?.remove();\n      return;\n    }\n    button.classList.add('done');\n    AltText._l10nPromise.get('pdfjs-editor-alt-text-edit-button-label').then((msg) => {\n      button.setAttribute('aria-label', msg);\n    });\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement('span');\n      tooltip.className = 'tooltip';\n      tooltip.setAttribute('role', 'tooltip');\n      const id = (tooltip.id = `alt-text-tooltip-${this.#editor.id}`);\n      button.setAttribute('aria-describedby', id);\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      button.addEventListener('mouseenter', () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add('show');\n          this.#editor._reportTelemetry({\n            action: 'alt_text_tooltip',\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      });\n      button.addEventListener('mouseleave', () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove('show');\n      });\n    }\n    tooltip.innerText = this.#altTextDecorative\n      ? await AltText._l10nPromise.get('pdfjs-editor-alt-text-decorative-tooltip')\n      : this.#altText;\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getImageForAltText();\n    element?.setAttribute('aria-describedby', tooltip.id);\n  }\n} // CONCATENATED MODULE: ./src/display/editor/editor.js\n\nclass AnnotationEditor {\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #savedDimensions = null;\n  #boundFocusin = this.focusin.bind(this);\n  #boundFocusout = this.focusout.bind(this);\n  #editToolbar = null;\n  #focusedResizerName = '';\n  #hasBeenClicked = false;\n  #initialPosition = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  _initialOptions = Object.create(null);\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  _l10nPromise = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(\n      this,\n      '_resizerKeyboardManager',\n      new KeyboardManager([\n        [\n          ['ArrowLeft', 'mac+ArrowLeft'],\n          resize,\n          {\n            args: [-small, 0],\n          },\n        ],\n        [\n          ['ctrl+ArrowLeft', 'mac+shift+ArrowLeft'],\n          resize,\n          {\n            args: [-big, 0],\n          },\n        ],\n        [\n          ['ArrowRight', 'mac+ArrowRight'],\n          resize,\n          {\n            args: [small, 0],\n          },\n        ],\n        [\n          ['ctrl+ArrowRight', 'mac+shift+ArrowRight'],\n          resize,\n          {\n            args: [big, 0],\n          },\n        ],\n        [\n          ['ArrowUp', 'mac+ArrowUp'],\n          resize,\n          {\n            args: [0, -small],\n          },\n        ],\n        [\n          ['ctrl+ArrowUp', 'mac+shift+ArrowUp'],\n          resize,\n          {\n            args: [0, -big],\n          },\n        ],\n        [\n          ['ArrowDown', 'mac+ArrowDown'],\n          resize,\n          {\n            args: [0, small],\n          },\n        ],\n        [\n          ['ctrl+ArrowDown', 'mac+shift+ArrowDown'],\n          resize,\n          {\n            args: [0, big],\n          },\n        ],\n        [['Escape', 'mac+Escape'], AnnotationEditor.prototype._stopResizingWithKeyboard],\n      ]),\n    );\n  }\n  constructor(parameters) {\n    if (this.constructor === AnnotationEditor) {\n      unreachable('Cannot initialize AnnotationEditor.');\n    }\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: { pageWidth, pageHeight, pageX, pageY },\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, '_defaultLineColor', this._colorManager.getHexCode('CanvasText'));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager,\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager, options) {\n    AnnotationEditor._l10nPromise ||= new Map(\n      [\n        'pdfjs-editor-alt-text-button-label',\n        'pdfjs-editor-alt-text-edit-button-label',\n        'pdfjs-editor-alt-text-decorative-tooltip',\n        'pdfjs-editor-resizer-label-topLeft',\n        'pdfjs-editor-resizer-label-topMiddle',\n        'pdfjs-editor-resizer-label-topRight',\n        'pdfjs-editor-resizer-label-middleRight',\n        'pdfjs-editor-resizer-label-bottomRight',\n        'pdfjs-editor-resizer-label-bottomMiddle',\n        'pdfjs-editor-resizer-label-bottomLeft',\n        'pdfjs-editor-resizer-label-middleLeft',\n      ].map((str) => [str, l10n.get(str.replaceAll(/([A-Z])/g, (c) => `-${c.toLowerCase()}`))]),\n    );\n    if (options?.strings) {\n      for (const str of options.strings) {\n        AnnotationEditor._l10nPromise.set(str, l10n.get(str));\n      }\n    }\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue('--outline-width')) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable('Not implemented');\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle('draggable', value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= (this.height * pageHeight) / (pageWidth * 2);\n        this.y += (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += (this.height * pageHeight) / (pageWidth * 2);\n        this.y -= (this.width * pageWidth) / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialPosition ||= [this.x, this.y];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: 'nearest',\n    });\n  }\n  drag(tx, ty) {\n    this.#initialPosition ||= [this.x, this.y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const { x, y } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let { x, y } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    this.div.style.left = `${(100 * x).toFixed(2)}%`;\n    this.div.style.top = `${(100 * y).toFixed(2)}%`;\n    this.div.scrollIntoView({\n      block: 'nearest',\n    });\n  }\n  get _hasBeenMoved() {\n    return (\n      !!this.#initialPosition &&\n      (this.#initialPosition[0] !== this.x || this.#initialPosition[1] !== this.y)\n    );\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const { _borderLineWidth } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    let { x, y, width, height } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = Math.max(0, Math.min(pageWidth - width, x));\n          y = Math.max(0, Math.min(pageHeight - height, y));\n          break;\n        case 90:\n          x = Math.max(0, Math.min(pageWidth - height, x));\n          y = Math.min(pageHeight, Math.max(width, y));\n          break;\n        case 180:\n          x = Math.min(pageWidth, Math.max(width, x));\n          y = Math.min(pageHeight, Math.max(height, y));\n          break;\n        case 270:\n          x = Math.min(pageWidth, Math.max(height, x));\n          y = Math.max(0, Math.min(pageHeight - width, y));\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const { style } = this.div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n      }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270: {\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n      }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight],\n    } = this;\n    const scaledWidth = pageWidth * parentScale;\n    const scaledHeight = pageHeight * parentScale;\n    return util_FeatureTest.isCSSRoundSupported\n      ? [Math.round(scaledWidth), Math.round(scaledHeight)]\n      : [scaledWidth, scaledHeight];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.div.style.width = `${((100 * width) / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      this.div.style.height = `${((100 * height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const { style } = this.div;\n    const { height, width } = style;\n    const widthPercent = width.endsWith('%');\n    const heightPercent = !this.#keepAspectRatio && height.endsWith('%');\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${((100 * parseFloat(width)) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${((100 * parseFloat(height)) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement('div');\n    this.#resizersDiv.classList.add('resizers');\n    const classes = this._willKeepAspectRatio\n      ? ['topLeft', 'topRight', 'bottomRight', 'bottomLeft']\n      : [\n          'topLeft',\n          'topMiddle',\n          'topRight',\n          'middleRight',\n          'bottomRight',\n          'bottomMiddle',\n          'bottomLeft',\n          'middleLeft',\n        ];\n    for (const name of classes) {\n      const div = document.createElement('div');\n      this.#resizersDiv.append(div);\n      div.classList.add('resizer', name);\n      div.setAttribute('data-resizer-name', name);\n      div.addEventListener('pointerdown', this.#resizerPointerdown.bind(this, name));\n      div.addEventListener('contextmenu', noContextMenu);\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const { isMac } = util_FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const boundResizerPointermove = this.#resizerPointermove.bind(this, name);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    const pointerMoveOptions = {\n      passive: true,\n      capture: true,\n    };\n    this.parent.togglePointerEvents(false);\n    window.addEventListener('pointermove', boundResizerPointermove, pointerMoveOptions);\n    window.addEventListener('contextmenu', noContextMenu);\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(\n      event.target,\n    ).cursor;\n    const pointerUpCallback = () => {\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      window.removeEventListener('pointerup', pointerUpCallback);\n      window.removeEventListener('blur', pointerUpCallback);\n      window.removeEventListener('pointermove', boundResizerPointermove, pointerMoveOptions);\n      window.removeEventListener('contextmenu', noContextMenu);\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n    };\n    window.addEventListener('pointerup', pointerUpCallback);\n    window.addEventListener('blur', pointerUpCallback);\n  }\n  #addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight) {\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (\n      newX === savedX &&\n      newY === savedY &&\n      newWidth === savedWidth &&\n      newHeight === savedHeight\n    ) {\n      return;\n    }\n    this.addCommands({\n      cmd: () => {\n        this.width = newWidth;\n        this.height = newHeight;\n        this.x = newX;\n        this.y = newY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n        this.fixAndSetPosition();\n      },\n      undo: () => {\n        this.width = savedWidth;\n        this.height = savedHeight;\n        this.x = savedX;\n        this.y = savedY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * savedWidth, parentHeight * savedHeight);\n        this.fixAndSetPosition();\n      },\n      mustExec: true,\n    });\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const round = (x) => Math.round(x * 10000) / 10000;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [\n      rotationMatrix[0] * x + rotationMatrix[2] * y,\n      rotationMatrix[1] * x + rotationMatrix[3] * y,\n    ];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [\n      invRotationMatrix[0] * x + invRotationMatrix[2] * y,\n      invRotationMatrix[1] * x + invRotationMatrix[3] * y,\n    ];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case 'topLeft':\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case 'topMiddle':\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case 'topRight':\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case 'middleRight':\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case 'bottomRight':\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case 'bottomMiddle':\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case 'bottomLeft':\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case 'middleLeft':\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = round(savedX + transfOppositePoint[0]);\n    const oppositeY = round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let [deltaX, deltaY] = this.screenToPageTranslation(event.movementX, event.movementY);\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(\n        Math.min(\n          Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) /\n            oldDiag,\n          1 / savedWidth,\n          1 / savedHeight,\n        ),\n        minWidth / savedWidth,\n        minHeight / savedHeight,\n      );\n    } else if (isHorizontal) {\n      ratioX =\n        Math.max(minWidth, Math.min(1, Math.abs(oppositePoint[0] - point[0] - deltaX))) /\n        savedWidth;\n    } else {\n      ratioY =\n        Math.max(minHeight, Math.min(1, Math.abs(oppositePoint[1] - point[1] - deltaY))) /\n        savedHeight;\n    }\n    const newWidth = round(savedWidth * ratioX);\n    const newHeight = round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n  }\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  async addEditToolbar() {\n    if (this.#editToolbar || this.#isInEditMode) {\n      return this.#editToolbar;\n    }\n    this.#editToolbar = new EditorToolbar(this);\n    this.div.append(this.#editToolbar.render());\n    if (this.#altText) {\n      this.#editToolbar.addAltTextButton(await this.#altText.render());\n    }\n    return this.#editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this.#editToolbar) {\n      return;\n    }\n    this.#editToolbar.remove();\n    this.#editToolbar = null;\n    this.#altText?.destroy();\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10nPromise);\n    this.#altText = new AltText(this);\n    await this.addEditToolbar();\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  hasAltText() {\n    return !this.#altText?.isEmpty();\n  }\n  render() {\n    this.div = document.createElement('div');\n    this.div.setAttribute('data-editor-rotation', (360 - this.rotation) % 360);\n    this.div.className = this.name;\n    this.div.setAttribute('id', this.id);\n    this.div.tabIndex = this.#disabled ? -1 : 0;\n    if (!this._isVisible) {\n      this.div.classList.add('hidden');\n    }\n    this.setInForeground();\n    this.div.addEventListener('focusin', this.#boundFocusin);\n    this.div.addEventListener('focusout', this.#boundFocusout);\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      this.div.style.maxWidth = `${((100 * parentHeight) / parentWidth).toFixed(2)}%`;\n      this.div.style.maxHeight = `${((100 * parentWidth) / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, this.div, ['pointerdown']);\n    return this.div;\n  }\n  pointerdown(event) {\n    const { isMac } = util_FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const { isMac } = util_FeatureTest.platform;\n    if ((event.ctrlKey && !isMac) || event.shiftKey || (event.metaKey && isMac)) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const isSelected = this._uiManager.isSelected(this);\n    this._uiManager.setUpDragSession();\n    let pointerMoveOptions, pointerMoveCallback;\n    if (isSelected) {\n      this.div.classList.add('moving');\n      pointerMoveOptions = {\n        passive: true,\n        capture: true,\n      };\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      pointerMoveCallback = (e) => {\n        const { clientX: x, clientY: y } = e;\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      };\n      window.addEventListener('pointermove', pointerMoveCallback, pointerMoveOptions);\n    }\n    const pointerUpCallback = () => {\n      window.removeEventListener('pointerup', pointerUpCallback);\n      window.removeEventListener('blur', pointerUpCallback);\n      if (isSelected) {\n        this.div.classList.remove('moving');\n        window.removeEventListener('pointermove', pointerMoveCallback, pointerMoveOptions);\n      }\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(event);\n      }\n    };\n    window.addEventListener('pointerup', pointerUpCallback);\n    window.addEventListener('blur', pointerUpCallback);\n  }\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [\n          x + shiftX + pageX,\n          pageHeight - y - shiftY - height + pageY,\n          x + shiftX + width + pageX,\n          pageHeight - y - shiftY + pageY,\n        ];\n      case 90:\n        return [\n          x + shiftY + pageX,\n          pageHeight - y + shiftX + pageY,\n          x + shiftY + height + pageX,\n          pageHeight - y + shiftX + width + pageY,\n        ];\n      case 180:\n        return [\n          x - shiftX - width + pageX,\n          pageHeight - y + shiftY + pageY,\n          x - shiftX + pageX,\n          pageHeight - y + shiftY + height + pageY,\n        ];\n      case 270:\n        return [\n          x - shiftY - height + pageX,\n          pageHeight - y - shiftX - width + pageY,\n          x - shiftY + pageX,\n          pageHeight - y - shiftX + pageY,\n        ];\n      default:\n        throw new Error('Invalid rotation');\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error('Invalid rotation');\n    }\n  }\n  onceAdded() {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    this.#isInEditMode = true;\n  }\n  disableEditMode() {\n    this.#isInEditMode = false;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  rebuild() {\n    this.div?.addEventListener('focusin', this.#boundFocusin);\n    this.div?.addEventListener('focusout', this.#boundFocusout);\n  }\n  rotate(_angle) {}\n  serialize(isForCopying = false, context = null) {\n    unreachable('An editor must be serializable');\n  }\n  static deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager,\n    });\n    editor.rotation = data.rotation;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.div.removeEventListener('focusin', this.#boundFocusin);\n    this.div.removeEventListener('focusout', this.#boundFocusout);\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove('hidden');\n      bindEvents(this, this.div, ['keydown']);\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== 'Enter') {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height,\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute('data-resizer-name');\n        div.setAttribute('role', 'spinbutton');\n        div.addEventListener('keydown', boundResizerKeydown);\n        div.addEventListener('blur', boundResizerBlur);\n        div.addEventListener('focus', this.#resizerFocus.bind(this, name));\n        AnnotationEditor._l10nPromise\n          .get(`pdfjs-editor-resizer-label-${name}`)\n          .then((msg) => div.setAttribute('aria-label', msg));\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition =\n      (((360 - this.rotation + this.parentRotation) % 360) / 90) *\n      (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute('data-resizer-name');\n        AnnotationEditor._l10nPromise\n          .get(`pdfjs-editor-resizer-label-${name}`)\n          .then((msg) => child.setAttribute('aria-label', msg));\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true,\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (\n      this.#isResizerEnabledForKeyboard &&\n      event.relatedTarget?.parentNode !== this.#resizersDiv\n    ) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : '';\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      movementX: x,\n      movementY: y,\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    if (this.#savedDimensions) {\n      const { savedX, savedY, savedWidth, savedHeight } = this.#savedDimensions;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n      this.#savedDimensions = null;\n    }\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    this.makeResizable();\n    this.div?.classList.add('selectedEditor');\n    if (!this.#editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains('selectedEditor')) {\n          this.#editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this.#editToolbar?.show();\n  }\n  unselect() {\n    this.#resizersDiv?.classList.add('hidden');\n    this.div?.classList.remove('selectedEditor');\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true,\n      });\n    }\n    this.#editToolbar?.hide();\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  enterInEditMode() {}\n  getImageForAltText() {\n    return null;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const { style } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = 'auto';\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: 'added',\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const { action } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch('reporttelemetry', {\n      source: this,\n      details: {\n        type: 'editing',\n        data,\n      },\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle('hidden', !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector('.annotationContent');\n    if (!content) {\n      content = document.createElement('div');\n      content.classList.add('annotationContent', this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === 'CANVAS') {\n      const canvas = content;\n      content = document.createElement('div');\n      content.classList.add('annotationContent', this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const { firstChild } = annotation.container;\n    if (firstChild.nodeName === 'DIV' && firstChild.classList.contains('annotationContent')) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n    };\n  }\n} // CONCATENATED MODULE: ./src/shared/murmurhash3.js\n\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === 'string') {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error('Invalid data format, must be a string or TypedArray.');\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        h1 ^= k1;\n        h1 = (h1 << 13) | (h1 >>> 19);\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = ((k2 * C1) & MASK_HIGH) | ((k2 * C1_LOW) & MASK_LOW);\n        k2 = (k2 << 15) | (k2 >>> 17);\n        k2 = ((k2 * C2) & MASK_HIGH) | ((k2 * C2_LOW) & MASK_LOW);\n        h2 ^= k2;\n        h2 = (h2 << 13) | (h2 >>> 19);\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0xed558ccd) & MASK_HIGH) | ((h1 * 0x8ccd) & MASK_LOW);\n    h2 =\n      ((h2 * 0xff51afd7) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xafd7ed55) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0x1a85ec53) & MASK_HIGH) | ((h1 * 0xec53) & MASK_LOW);\n    h2 =\n      ((h2 * 0xc4ceb9fe) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xb9fe1a85) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, '0') + (h2 >>> 0).toString(16).padStart(8, '0');\n  }\n} // CONCATENATED MODULE: ./src/display/annotation_storage.js\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: '',\n  transfer: undefined,\n});\nclass AnnotationStorage {\n  #modified = false;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === 'function') {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === 'function') {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  getAll() {\n    return this.#storage.size > 0 ? objectFromMap(this.#storage) : null;\n  }\n  setAll(obj) {\n    for (const [key, val] of Object.entries(obj)) {\n      this.setValue(key, val);\n    }\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === 'function') {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === 'function') {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0\n      ? {\n          map,\n          hash: hash.hexdigest(),\n          transfer,\n        }\n      : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const { type } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = (stats[type] ||= new Map());\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === 'type') {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const { map, hash, transfer } = parent.serializable;\n    const clone = structuredClone(\n      map,\n      transfer\n        ? {\n            transfer,\n          }\n        : null,\n    );\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer,\n    };\n  }\n  get print() {\n    unreachable('Should not call PrintAnnotationStorage.print');\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n} // CONCATENATED MODULE: ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({ ownerDocument = globalThis.document, styleElement = null }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement('style');\n      this._document.documentElement.getElementsByTagName('head')[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({ systemFontInfo: info, _inspectFont }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(\n      !this.disableFontFace,\n      \"loadSystemFont shouldn't be called when `disableFontFace` is set.\",\n    );\n    if (this.isFontLoadingAPISupported) {\n      const { loadedName, src, style } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(\n          `Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`,\n        );\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable('Not implemented: loadSystemFont without the Font Loading API.');\n  }\n  async bind(font) {\n    if (font.attached || (font.missingFile && !font.systemFontInfo)) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise((resolve) => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, 'isFontLoadingAPISupported', hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    let supported = false;\n    if (isNodeJS) {\n      supported = true;\n    } else if (\n      typeof navigator !== 'undefined' &&\n      typeof navigator?.userAgent === 'string' &&\n      /Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)\n    ) {\n      supported = true;\n    }\n    return shadow(this, 'isSyncFontLoadingSupported', supported);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, 'completeRequest() cannot be called twice.');\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const { loadingRequests } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback,\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\n      'T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA' +\n        'FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA' +\n        'ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA' +\n        'AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1' +\n        'AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD' +\n        '6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM' +\n        'AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D' +\n        'IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA' +\n        'AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA' +\n        'AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB' +\n        'AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY' +\n        'AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA' +\n        'AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n        'AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n        'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n        'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n        'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n        'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA' +\n        'AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC' +\n        'AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3' +\n        'Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj' +\n        'FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==',\n    );\n    return shadow(this, '_loadTestFont', testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return (\n        (data.charCodeAt(offset) << 24) |\n        (data.charCodeAt(offset + 1) << 16) |\n        (data.charCodeAt(offset + 2) << 8) |\n        (data.charCodeAt(offset + 3) & 0xff)\n      );\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext('2d');\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn('Load test font never loaded.');\n        callback();\n        return;\n      }\n      ctx.font = '30px ' + name;\n      ctx.fillText('.', 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId + 'XXX', i)) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement('div');\n    div.style.visibility = 'hidden';\n    div.style.width = div.style.height = '10px';\n    div.style.position = 'absolute';\n    div.style.top = div.style.left = '0px';\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement('span');\n      span.textContent = 'Hi';\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, { disableFontFace = false, inspectFont = null }) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.disableFontFace = disableFontFace === true;\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight,\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = bytesToString(this.data);\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    let cmds;\n    try {\n      cmds = objs.get(this.loadedName + '_path_' + character);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    if (!Array.isArray(cmds) || cmds.length === 0) {\n      return (this.compiledGlyphs[character] = function (c, size) {});\n    }\n    const commands = [];\n    for (let i = 0, ii = cmds.length; i < ii; ) {\n      switch (cmds[i++]) {\n        case FontRenderOps.BEZIER_CURVE_TO:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push((ctx) => ctx.bezierCurveTo(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.MOVE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push((ctx) => ctx.moveTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.LINE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push((ctx) => ctx.lineTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.QUADRATIC_CURVE_TO:\n          {\n            const [a, b, c, d] = cmds.slice(i, i + 4);\n            commands.push((ctx) => ctx.quadraticCurveTo(a, b, c, d));\n            i += 4;\n          }\n          break;\n        case FontRenderOps.RESTORE:\n          commands.push((ctx) => ctx.restore());\n          break;\n        case FontRenderOps.SAVE:\n          commands.push((ctx) => ctx.save());\n          break;\n        case FontRenderOps.SCALE:\n          assert(commands.length === 2, 'Scale command is only valid at the third position.');\n          break;\n        case FontRenderOps.TRANSFORM:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push((ctx) => ctx.transform(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.TRANSLATE:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push((ctx) => ctx.translate(a, b));\n            i += 2;\n          }\n          break;\n      }\n    }\n    return (this.compiledGlyphs[character] = function glyphDrawer(ctx, size) {\n      commands[0](ctx);\n      commands[1](ctx);\n      ctx.scale(size, -size);\n      for (let i = 2, ii = commands.length; i < ii; i++) {\n        commands[i](ctx);\n      }\n    });\n  }\n} // CONCATENATED MODULE: ./src/display/node_utils.js\n\nif (isNodeJS) {\n  var packageCapability = Promise.withResolvers();\n  var packageMap = null;\n  const loadPackages = async () => {\n    const fs = await import(/*webpackIgnore: true*/ 'fs'),\n      http = await import(/*webpackIgnore: true*/ 'http'),\n      https = await import(/*webpackIgnore: true*/ 'https'),\n      url = await import(/*webpackIgnore: true*/ 'url');\n    let canvas, path2d;\n    return new Map(\n      Object.entries({\n        fs,\n        http,\n        https,\n        url,\n        canvas,\n        path2d,\n      }),\n    );\n  };\n  loadPackages().then(\n    (map) => {\n      packageMap = map;\n      packageCapability.resolve();\n    },\n    (reason) => {\n      warn(`loadPackages: ${reason}`);\n      packageMap = new Map();\n      packageCapability.resolve();\n    },\n  );\n}\nclass NodePackages {\n  static get promise() {\n    return packageCapability.promise;\n  }\n  static get(name) {\n    return packageMap?.get(name);\n  }\n}\nconst node_utils_fetchData = function (url) {\n  const fs = NodePackages.get('fs');\n  return fs.promises.readFile(url).then((data) => new Uint8Array(data));\n};\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const canvas = NodePackages.get('canvas');\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    return node_utils_fetchData(url).then((data) => ({\n      cMapData: data,\n      compressionType,\n    }));\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  _fetchData(url) {\n    return node_utils_fetchData(url);\n  }\n} // CONCATENATED MODULE: ./src/display/pattern_helper.js\n\nconst PathType = {\n  FILL: 'Fill',\n  STROKE: 'Stroke',\n  SHADING: 'Shading',\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  constructor() {\n    if (this.constructor === BaseShadingPattern) {\n      unreachable('Cannot initialize BaseShadingPattern.');\n    }\n  }\n  getPattern() {\n    unreachable('Abstract method `getPattern` called.');\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === 'axial') {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === 'radial') {\n      grad = ctx.createRadialGradient(\n        this._p0[0],\n        this._p0[1],\n        this._r0,\n        this._p1[0],\n        this._p1[1],\n        this._r1,\n      );\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(\n        pathType,\n        getCurrentTransform(ctx),\n      ) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas('pattern', width, height, true);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, 'no-repeat');\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = (car - (car - cbr) * k) | 0;\n      bytes[j++] = (cag - (cag - cbg) * k) | 0;\n      bytes[j++] = (cab - (cab - cbb) * k) | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case 'lattice':\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(\n            data,\n            context,\n            ps[q],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q],\n            cs[q + 1],\n            cs[q + verticesPerRow],\n          );\n          drawTriangle(\n            data,\n            context,\n            ps[q + verticesPerRow + 1],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q + verticesPerRow + 1],\n            cs[q + 1],\n            cs[q + verticesPerRow],\n          );\n        }\n      }\n      break;\n    case 'triangles':\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error('illegal figure');\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[7];\n    this._background = IR[8];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(\n      Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE,\n    );\n    const height = Math.min(\n      Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE,\n    );\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas('mesh', paddedWidth, paddedHeight, false);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY,\n    };\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    let scale;\n    if (pathType === PathType.SHADING) {\n      scale = Util.singularValueDecompose2dScale(getCurrentTransform(ctx));\n    } else {\n      scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n      if (this.matrix) {\n        const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n      }\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(\n      scale,\n      pathType === PathType.SHADING ? null : this._background,\n      owner.cachedCanvases,\n    );\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, 'no-repeat');\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return 'hotpink';\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case 'RadialAxial':\n      return new RadialAxialShadingPattern(IR);\n    case 'Mesh':\n      return new MeshShadingPattern(IR);\n    case 'Dummy':\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2,\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const operatorList = this.operatorList;\n    const bbox = this.bbox;\n    const xstep = this.xstep;\n    const ystep = this.ystep;\n    const paintType = this.paintType;\n    const tilingType = this.tilingType;\n    const color = this.color;\n    const canvasGraphicsFactory = this.canvasGraphicsFactory;\n    info('TilingType: ' + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n    const curMatrixScale = Util.singularValueDecompose2dScale(this.baseTransform);\n    const combinedScale = [matrixScale[0] * curMatrixScale[0], matrixScale[1] * curMatrixScale[1]];\n    const dimx = this.getSizeAndScale(xstep, this.ctx.canvas.width, combinedScale[0]);\n    const dimy = this.getSizeAndScale(ystep, this.ctx.canvas.height, combinedScale[1]);\n    const tmpCanvas = owner.cachedCanvases.getCanvas('pattern', dimx.size, dimy.size, true);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    let adjustedX0 = x0;\n    let adjustedY0 = y0;\n    let adjustedX1 = x1;\n    let adjustedY1 = y1;\n    if (x0 < 0) {\n      adjustedX0 = 0;\n      adjustedX1 += Math.abs(x0);\n    }\n    if (y0 < 0) {\n      adjustedY0 = 0;\n      adjustedY1 += Math.abs(y0);\n    }\n    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: adjustedX0,\n      offsetY: adjustedY0,\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    step = Math.abs(step);\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size,\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx), [x0, y0, x1, y1]);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(\n      1 / temporaryPatternCanvas.scaleX,\n      1 / temporaryPatternCanvas.scaleY,\n    );\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, 'repeat');\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n} // CONCATENATED MODULE: ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false,\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & (1 << (7 - j)) ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos,\n  };\n}\nfunction convertRGBToRGBA({ src, srcPos = 0, dest, destPos = 0, width, height }) {\n  let i = 0;\n  const len32 = src.length >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = (s1 >>> 24) | (s2 << 8) | 0xff000000;\n      dest[destPos + 2] = (s2 >>> 16) | (s3 << 16) | 0xff000000;\n      dest[destPos + 3] = (s3 >>> 8) | 0xff000000;\n    }\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] = src[j] | (src[j + 1] << 8) | (src[j + 2] << 16) | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = (s1 << 24) | (s2 >>> 8) | 0xff;\n      dest[destPos + 2] = (s2 << 16) | (s3 >>> 16) | 0xff;\n      dest[destPos + 3] = (s3 << 8) | 0xff;\n    }\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] = (src[j] << 24) | (src[j + 1] << 16) | (src[j + 2] << 8) | 0xff;\n    }\n  }\n  return {\n    srcPos,\n    destPos,\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x10101) | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x1010100) | 0x000000ff;\n    }\n  }\n} // CONCATENATED MODULE: ./src/display/canvas.js\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst MAX_SIZE_TO_COMPILE = 1000;\nconst FULL_CHUNK_HEIGHT = 16;\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error('Context is already forwarding operations.');\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function ctxSave() {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function ctxRestore() {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function ctxTranslate(x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function ctxScale(x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function ctxResetTransform() {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function ctxRotate(angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function ctxRotate(rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nfunction compileType3Glyph(imgData) {\n  const { width, height } = imgData;\n  if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {\n    return null;\n  }\n  const POINT_TO_PROCESS_LIMIT = 1000;\n  const POINT_TYPES = new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);\n  const width1 = width + 1;\n  let points = new Uint8Array(width1 * (height + 1));\n  let i, j, j0;\n  const lineSize = (width + 7) & ~7;\n  let data = new Uint8Array(lineSize * height),\n    pos = 0;\n  for (const elem of imgData.data) {\n    let mask = 128;\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n  let count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) + (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  const path = new Path2D();\n  for (i = 0; count && i <= height; i++) {\n    let p = i * width1;\n    const end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    path.moveTo(p % width1, i);\n    const p0 = p;\n    let type = points[p];\n    do {\n      const step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n      const pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        type = pp;\n        points[p] = 0;\n      } else {\n        type = pp & ((0x33 * type) >> 4);\n        points[p] &= (type >> 2) | (type << 2);\n      }\n      path.lineTo(p % width1, (p / width1) | 0);\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n    --i;\n  }\n  data = null;\n  points = null;\n  const drawOutline = function (c) {\n    c.save();\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.fill(path);\n    c.beginPath();\n    c.restore();\n  };\n  return drawOutline;\n}\nclass CanvasExtraState {\n  constructor(width, height) {\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    this.x = 0;\n    this.y = 0;\n    this.lineX = 0;\n    this.lineY = 0;\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    this.fillColor = '#000000';\n    this.strokeColor = '#000000';\n    this.patternFill = false;\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.transferMaps = 'none';\n    this.startNewPathAndClipBox([0, 0, width, height]);\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    return clone;\n  }\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  updatePathMinMax(transform, x, y) {\n    [x, y] = Util.applyTransform([x, y], transform);\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n  updateRectMinMax(transform, rect) {\n    const p1 = Util.applyTransform(rect, transform);\n    const p2 = Util.applyTransform(rect.slice(2), transform);\n    const p3 = Util.applyTransform([rect[0], rect[3]], transform);\n    const p4 = Util.applyTransform([rect[2], rect[1]], transform);\n    this.minX = Math.min(this.minX, p1[0], p2[0], p3[0], p4[0]);\n    this.minY = Math.min(this.minY, p1[1], p2[1], p3[1], p4[1]);\n    this.maxX = Math.max(this.maxX, p1[0], p2[0], p3[0], p4[0]);\n    this.maxY = Math.max(this.maxY, p1[1], p2[1], p3[1], p4[1]);\n  }\n  updateScalingPathMinMax(transform, minMax) {\n    Util.scaleMinMax(transform, minMax);\n    this.minX = Math.min(this.minX, minMax[0]);\n    this.minY = Math.min(this.minY, minMax[1]);\n    this.maxX = Math.max(this.maxX, minMax[2]);\n    this.maxY = Math.max(this.maxY, minMax[3]);\n  }\n  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    const box = Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax);\n    if (minMax) {\n      return;\n    }\n    this.updateRectMinMax(transform, box);\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = [this.minX, this.minY, this.maxX, this.maxY];\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable('Stroke bounding box must include transform.');\n      }\n      const scale = Util.singularValueDecompose2dScale(transform);\n      const xStrokePad = (scale[0] * this.lineWidth) / 2;\n      const yStrokePad = (scale[1] * this.lineWidth) / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minX === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox = box;\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = 0;\n    this.maxY = 0;\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (typeof ImageData !== 'undefined' && imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = (width + 7) >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--; ) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({ srcPos } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0,\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\n    'strokeStyle',\n    'fillStyle',\n    'fillRule',\n    'globalAlpha',\n    'lineWidth',\n    'lineCap',\n    'lineJoin',\n    'miterLimit',\n    'globalCompositeOperation',\n    'font',\n    'filter',\n  ];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = '#000000';\n  ctx.fillRule = 'nonzero';\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = 'butt';\n  ctx.lineJoin = 'miter';\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = 'source-over';\n  ctx.font = '10px sans-serif';\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  if (!isNodeJS) {\n    const { filter } = ctx;\n    if (filter !== 'none' && filter !== '') {\n      ctx.filter = 'none';\n    }\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  const scale = Util.singularValueDecompose2dScale(transform);\n  scale[0] = Math.fround(scale[0]);\n  scale[1] = Math.fround(scale[1]);\n  const actualScale = Math.fround(\n    (globalThis.devicePixelRatio || 1) * PixelsPerInch.PDF_TO_CSS_UNITS,\n  );\n  return scale[0] <= actualScale && scale[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = ['butt', 'round', 'square'];\nconst LINE_JOIN_STYLES = ['miter', 'round', 'bevel'];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(\n    canvasCtx,\n    commonObjs,\n    objs,\n    canvasFactory,\n    filterFactory,\n    { optionalContentConfig, markedContentStack = null },\n    annotationCanvasMap,\n    pageColors,\n  ) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.processingType3 = null;\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === 'string') {\n      return data.startsWith('g_') ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({ transform, viewport, transparency = false, background = null }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || '#ffffff';\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas('transparent', width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations =\n      argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === 'function';\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith('g_') ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== 'undefined' && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(\n        this.pageColors.foreground,\n        this.pageColors.background,\n      );\n      if (hcmFilterId !== 'none') {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width;\n    const height = img.height;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = 'prescale1';\n    let tmpCanvas, tmpCtx;\n    while ((widthScale > 2 && paintWidth > 1) || (heightScale > 2 && paintHeight > 1)) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth =\n          paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight =\n          paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === 'prescale1' ? 'prescale2' : 'prescale1';\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight,\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const { width, height } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(\n        isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor],\n      );\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(\n          Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4],\n        );\n        const offsetY = Math.round(\n          Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5],\n        );\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY,\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas('maskCanvas', width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const [minX, minY, maxX, maxY] = Util.getAxialAlignedBoundingBox(\n      [0, 0, width, height],\n      maskToCanvas,\n    );\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas('fillCanvas', drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(fillCtx),\n      img.interpolate,\n    );\n    drawImageAtIntegerCoords(\n      fillCtx,\n      scaled,\n      0,\n      0,\n      scaled.width,\n      scaled.height,\n      0,\n      0,\n      width,\n      height,\n    );\n    fillCtx.globalCompositeOperation = 'source-in';\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [\n      1,\n      0,\n      0,\n      1,\n      -offsetX,\n      -offsetY,\n    ]);\n    fillCtx.fillStyle = isPatternFill\n      ? fillColor.getPattern(ctx, this, inverse, PathType.FILL)\n      : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete('fillCanvas');\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY),\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case 'LW':\n          this.setLineWidth(value);\n          break;\n        case 'LC':\n          this.setLineCap(value);\n          break;\n        case 'LJ':\n          this.setLineJoin(value);\n          break;\n        case 'ML':\n          this.setMiterLimit(value);\n          break;\n        case 'D':\n          this.setDash(value[0], value[1]);\n          break;\n        case 'RI':\n          this.setRenderingIntent(value);\n          break;\n        case 'FL':\n          this.setFlatness(value);\n          break;\n        case 'Font':\n          this.setFont(value[0], value[1]);\n          break;\n        case 'CA':\n          this.current.strokeAlpha = value;\n          break;\n        case 'ca':\n          this.current.fillAlpha = value;\n          this.ctx.globalAlpha = value;\n          break;\n        case 'BM':\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case 'SMask':\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case 'TR':\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error('beginSMaskMode called while already in smask mode');\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = 'smaskGroupAt' + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    this.ctx = scratchCanvas.context;\n    const ctx = this.ctx;\n    ctx.setTransform(...getCurrentTransform(this.suspendedCtx));\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([\n      ['BM', 'source-over'],\n      ['ca', 1],\n      ['CA', 1],\n    ]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error('endSMaskMode called while not in smask mode');\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(\n      smask.context,\n      layerCtx,\n      layerWidth,\n      layerHeight,\n      smask.subtype,\n      smask.backdrop,\n      smask.transferMap,\n      layerOffsetX,\n      layerOffsetY,\n      smask.offsetX,\n      smask.offsetY,\n    );\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = 'source-over';\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(\n    maskCtx,\n    layerCtx,\n    width,\n    height,\n    subtype,\n    backdrop,\n    transferMap,\n    layerOffsetX,\n    layerOffsetY,\n    maskOffsetX,\n    maskOffsetY,\n  ) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (\n        maskX < 0 ||\n        maskY < 0 ||\n        maskX + width > maskCanvas.width ||\n        maskY + height > maskCanvas.height\n      ) {\n        const canvas = this.cachedCanvases.getCanvas('maskExtension', width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        if (backdrop.some((c) => c !== 0)) {\n          ctx.globalCompositeOperation = 'destination-atop';\n          ctx.fillStyle = Util.makeHexColor(...backdrop);\n          ctx.fillRect(0, 0, width, height);\n          ctx.globalCompositeOperation = 'source-over';\n        }\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else if (backdrop.some((c) => c !== 0)) {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = 'destination-atop';\n        maskCtx.fillStyle = Util.makeHexColor(...backdrop);\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === 'Alpha' && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === 'Luminosity') {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = 'destination-in';\n    layerCtx.drawImage(\n      maskCanvas,\n      maskX,\n      maskY,\n      width,\n      height,\n      layerOffsetX,\n      layerOffsetY,\n      width,\n      height,\n    );\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n      this.suspendedCtx.save();\n    } else {\n      this.ctx.save();\n    }\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0 && this.inSMaskMode) {\n      this.endSMaskMode();\n    }\n    if (this.stateStack.length !== 0) {\n      this.current = this.stateStack.pop();\n      if (this.inSMaskMode) {\n        this.suspendedCtx.restore();\n        copyCtxState(this.suspendedCtx, this.ctx);\n      } else {\n        this.ctx.restore();\n      }\n      this.checkSMaskState();\n      this.pendingClip = null;\n      this._cachedScaleForStroking[0] = -1;\n      this._cachedGetSinglePixelWidth = null;\n    }\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(ops, args, minMax) {\n    const ctx = this.ctx;\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let startX, startY;\n    const currentTransform = getCurrentTransform(ctx);\n    const isScalingMatrix =\n      (currentTransform[0] === 0 && currentTransform[3] === 0) ||\n      (currentTransform[1] === 0 && currentTransform[2] === 0);\n    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n      switch (ops[i] | 0) {\n        case OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n          const xw = x + width;\n          const yh = y + height;\n          ctx.moveTo(x, y);\n          if (width === 0 || height === 0) {\n            ctx.lineTo(xw, yh);\n          } else {\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n          }\n          if (!isScalingMatrix) {\n            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n          }\n          ctx.closePath();\n          break;\n        case OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.moveTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.lineTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.curveTo:\n          startX = x;\n          startY = y;\n          x = args[j + 4];\n          y = args[j + 5];\n          ctx.bezierCurveTo(args[j], args[j + 1], args[j + 2], args[j + 3], x, y);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y,\n            minMaxForBezier,\n          );\n          j += 6;\n          break;\n        case OPS.curveTo2:\n          startX = x;\n          startY = y;\n          ctx.bezierCurveTo(x, y, args[j], args[j + 1], args[j + 2], args[j + 3]);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            minMaxForBezier,\n          );\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case OPS.curveTo3:\n          startX = x;\n          startY = y;\n          x = args[j + 2];\n          y = args[j + 3];\n          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            x,\n            y,\n            x,\n            y,\n            minMaxForBezier,\n          );\n          j += 4;\n          break;\n        case OPS.closePath:\n          ctx.closePath();\n          break;\n      }\n    }\n    if (isScalingMatrix) {\n      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n    }\n    current.setCurrentPoint(x, y);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === 'object' && strokeColor?.getPattern) {\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(\n          ctx,\n          this,\n          getCurrentTransformInverse(ctx),\n          PathType.STROKE,\n        );\n        this.rescaleAndStroke(false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(this.current.getClippedPathBoundingBox());\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n  fill(consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL,\n      );\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill('evenodd');\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(intersect);\n    }\n  }\n  eoFill() {\n    this.pendingEOFill = true;\n    this.fill();\n  }\n  fillStroke() {\n    this.fill(false);\n    this.stroke(false);\n    this.consumePath();\n  }\n  eoFillStroke() {\n    this.pendingEOFill = true;\n    this.fillStroke();\n  }\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n  closeEOFillStroke() {\n    this.pendingEOFill = true;\n    this.closePath();\n    this.fillStroke();\n  }\n  endPath() {\n    this.consumePath();\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = IDENTITY_MATRIX;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      ctx.beginPath();\n      return;\n    }\n    ctx.save();\n    ctx.beginPath();\n    for (const path of paths) {\n      ctx.setTransform(...path.transform);\n      ctx.translate(path.x, path.y);\n      path.addToPath(ctx, path.fontSize);\n    }\n    ctx.restore();\n    ctx.clip();\n    ctx.beginPath();\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn('Invalid font matrix for font ' + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || 'sans-serif';\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = 'normal';\n    if (fontObj.black) {\n      bold = '900';\n    } else if (fontObj.bold) {\n      bold = 'bold';\n    }\n    const italic = fontObj.italic ? 'italic' : 'normal';\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(a, b, c, d, e, f) {\n    this.current.textMatrix = [a, b, c, d, e, f];\n    this.current.textMatrixScale = Math.hypot(a, b);\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  paintChar(character, x, y, patternTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    let addToPath;\n    if (font.disableFontFace || isAddToPathSet || patternFill) {\n      addToPath = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      addToPath(ctx, fontSize);\n      if (patternTransform) {\n        ctx.setTransform(...patternTransform);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fill();\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.stroke();\n      }\n      ctx.restore();\n    } else {\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fillText(character, x, y);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = (this.pendingTextPaths ||= []);\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        addToPath,\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const { context: ctx } = this.cachedCanvases.getCanvas('isFontSubpixelAAEnabled', 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText('I', 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, 'isFontSubpixelAAEnabled', enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText =\n      current.textRenderingMode === TextRenderingMode.FILL &&\n      !font.disableFontFace &&\n      !current.patternFill;\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL,\n      );\n      patternTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(''), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === 'number') {\n        x += (spacingDir * glyph * fontSize) / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth =\n          ((ctx.measureText(character).width * 1000) / fontSize) * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (((width - measuredWidth) / 2000) * fontSize) / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + (fontSize * accent.offset.x) / fontSizeScale;\n            const scaledAccentY = scaledY - (fontSize * accent.offset.y) / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternTransform);\n          }\n        }\n      }\n      const charWidth = vertical\n        ? width * widthAdvanceScale - spacing * fontDirection\n        : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === 'number') {\n        spacingLength = (spacingDir * glyph * fontSize) / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n        continue;\n      }\n      if (this.contentVisible) {\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n      width = transformed[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    this.processingType3 = null;\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    this.ctx.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip();\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === 'TilingPattern') {\n      const color = IR[1];\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: (ctx) =>\n          new CanvasGraphics(\n            ctx,\n            this.commonObjs,\n            this.objs,\n            this.canvasFactory,\n            this.filterFactory,\n            {\n              optionalContentConfig: this.optionalContentConfig,\n              markedContentStack: this.markedContentStack,\n            },\n          ),\n      };\n      pattern = new TilingPattern(IR, color, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.strokeStyle = color;\n    this.current.strokeColor = color;\n  }\n  setFillRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.fillStyle = color;\n    this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(\n      ctx,\n      this,\n      getCurrentTransformInverse(ctx),\n      PathType.SHADING,\n    );\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const { width, height } = ctx.canvas;\n      const [x0, y0, x1, y1] = Util.getAxialAlignedBoundingBox([0, 0, width, height], inv);\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable('Should not call beginInlineImage');\n  }\n  beginImageData() {\n    unreachable('Should not call beginImageData');\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      this.ctx.rect(bbox[0], bbox[1], width, height);\n      this.current.updateRectMinMax(getCurrentTransform(this.ctx), bbox);\n      this.clip();\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info('TODO: Support non-isolated groups.');\n    }\n    if (group.knockout) {\n      warn('Knockout groups not supported.');\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error('Bounding box is required.');\n    }\n    let bounds = Util.getAxialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx));\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = 'groupAt' + this.groupLevel;\n    if (group.smask) {\n      cacheId += '_smask_' + (this.smaskCounter++ % 2);\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null,\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([\n      ['BM', 'source-over'],\n      ['ca', 1],\n      ['CA', 1],\n    ]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = Util.getAxialAlignedBoundingBox(\n        [0, 0, groupCtx.canvas.width, groupCtx.canvas.height],\n        currentMtx,\n      );\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        const [scaleX, scaleY] = Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx));\n        const { viewportScale } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const { canvas, context } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.ctx.clip();\n        this.endPath();\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const glyph = this.processingType3;\n    if (glyph) {\n      if (glyph.compiled === undefined) {\n        glyph.compiled = compileType3Glyph(img);\n      }\n      if (glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n    }\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(\n      1,\n      0,\n      0,\n      1,\n      mask.offsetX - currentTransform[4],\n      mask.offsetY - currentTransform[5],\n    );\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [\n        scaleX,\n        skewX,\n        skewY,\n        scaleY,\n        positions[i],\n        positions[i + 1],\n      ]);\n      const [x, y] = Util.applyTransform([0, 0], trans);\n      ctx.drawImage(mask.canvas, x, y);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const { data, width, height, transform } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas('maskCanvas', width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = 'source-in';\n      maskCtx.fillStyle = isPatternFill\n        ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL)\n        : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height,\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== 'none') {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = 'none';\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === 'none') {\n      return imgData.bitmap;\n    }\n    const { bitmap, width, height } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas('inlineImage', width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = 'none';\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    if (!isNodeJS) {\n      const { filter } = ctx;\n      if (filter !== 'none' && filter !== '') {\n        ctx.filter = 'none';\n      }\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (\n      (typeof HTMLElement === 'function' && imgData instanceof HTMLElement) ||\n      !imgData.data\n    ) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas('inlineImage', width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(ctx),\n      imgData.interpolate,\n    );\n    drawImageAtIntegerCoords(\n      ctx,\n      scaled.img,\n      0,\n      0,\n      scaled.paintWidth,\n      scaled.paintHeight,\n      0,\n      -height,\n      width,\n      height,\n    );\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas('inlineImage', w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true,\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === 'OC') {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties),\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true,\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip('evenodd');\n        } else {\n          ctx.clip();\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n    ctx.beginPath();\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const { lineWidth } = this.current;\n      const { a, b, c, d } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(saveRestore) {\n    const { ctx } = this;\n    const { lineWidth } = this.current;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    ctx.lineWidth = lineWidth || 1;\n    if (scaleX === 1 && scaleY === 1) {\n      ctx.stroke();\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map((x) => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.stroke();\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n} // CONCATENATED MODULE: ./src/display/worker_options.js\n\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = '';\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== 'undefined' && val instanceof Worker) && val !== null) {\n      throw new Error('Invalid `workerPort` type.');\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== 'string') {\n      throw new Error('Invalid `workerSrc` type.');\n    }\n    this.#src = val;\n  }\n} // CONCATENATED MODULE: ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2,\n};\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8,\n};\nfunction wrapReason(reason) {\n  if (!(reason instanceof Error || (typeof reason === 'object' && reason !== null))) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (reason.name) {\n    case 'AbortException':\n      return new AbortException(reason.message);\n    case 'MissingPDFException':\n      return new MissingPDFException(reason.message);\n    case 'PasswordException':\n      return new PasswordException(reason.message, reason.code);\n    case 'UnexpectedResponseException':\n      return new UnexpectedResponseException(reason.message, reason.status);\n    case 'UnknownErrorException':\n      return new UnknownErrorException(reason.message, reason.details);\n    default:\n      return new UnknownErrorException(reason.message, reason.toString());\n  }\n}\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    this._onComObjOnMessage = (event) => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this.#processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error('Unexpected callback case');\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(\n          function (result) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.DATA,\n              callbackId: data.callbackId,\n              data: result,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.ERROR,\n              callbackId: data.callbackId,\n              reason: wrapReason(reason),\n            });\n          },\n        );\n        return;\n      }\n      if (data.streamId) {\n        this.#createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener('message', this._onComObjOnMessage);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage(\n      {\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        data,\n      },\n      transfers,\n    );\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage(\n        {\n          sourceName: this.sourceName,\n          targetName: this.targetName,\n          action: actionName,\n          callbackId,\n          data,\n        },\n        transfers,\n      );\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream(\n      {\n        start: (controller) => {\n          const startCapability = Promise.withResolvers();\n          this.streamControllers[streamId] = {\n            controller,\n            startCall: startCapability,\n            pullCall: null,\n            cancelCall: null,\n            isClosed: false,\n          };\n          comObj.postMessage(\n            {\n              sourceName,\n              targetName,\n              action: actionName,\n              streamId,\n              data,\n              desiredSize: controller.desiredSize,\n            },\n            transfers,\n          );\n          return startCapability.promise;\n        },\n        pull: (controller) => {\n          const pullCapability = Promise.withResolvers();\n          this.streamControllers[streamId].pullCall = pullCapability;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL,\n            streamId,\n            desiredSize: controller.desiredSize,\n          });\n          return pullCapability.promise;\n        },\n        cancel: (reason) => {\n          assert(reason instanceof Error, 'cancel must have a valid reason');\n          const cancelCapability = Promise.withResolvers();\n          this.streamControllers[streamId].cancelCall = cancelCapability;\n          this.streamControllers[streamId].isClosed = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL,\n            streamId,\n            reason: wrapReason(reason),\n          });\n          return cancelCapability.promise;\n        },\n      },\n      queueingStrategy,\n    );\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage(\n          {\n            sourceName,\n            targetName,\n            stream: StreamKind.ENQUEUE,\n            streamId,\n            chunk,\n          },\n          transfers,\n        );\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId,\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, 'error must have a valid reason');\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null,\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(\n      function () {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          success: true,\n        });\n      },\n      function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n    );\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true,\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        new Promise(function (resolve) {\n          resolve(streamSink.onPull?.());\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          },\n        );\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, 'enqueue should have stream controller');\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, 'close should have stream controller');\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, 'error should have stream controller');\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        new Promise(function (resolve) {\n          resolve(streamSink.onCancel?.(wrapReason(data.reason)));\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          },\n        );\n        streamSink.sinkCapability.reject(wrapReason(data.reason));\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error('Unexpected stream case');\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([\n      streamController.startCall?.promise,\n      streamController.pullCall?.promise,\n      streamController.cancelCall?.promise,\n    ]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.comObj.removeEventListener('message', this._onComObjOnMessage);\n  }\n} // CONCATENATED MODULE: ./src/display/metadata.js\n\nclass Metadata {\n  #metadataMap;\n  #data;\n  constructor({ parsedData, rawData }) {\n    this.#metadataMap = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#metadataMap.get(name) ?? null;\n  }\n  getAll() {\n    return objectFromMap(this.#metadataMap);\n  }\n  has(name) {\n    return this.#metadataMap.has(name);\n  }\n} // CONCATENATED MODULE: ./src/display/optional_content_config.js\n\nconst INTERNAL = Symbol('INTERNAL');\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, { name, intent, usage }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const { print, view } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== 'OFF';\n    } else if (this.#isPrint) {\n      return print?.printState !== 'OFF';\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable('Internal method `_setVisible` called.');\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === 'OFF') {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case 'And':\n          if (!state) {\n            return false;\n          }\n          break;\n        case 'Or':\n          if (state) {\n            return true;\n          }\n          break;\n        case 'Not':\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === 'And';\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info('Optional content group not defined.');\n      return true;\n    }\n    if (group.type === 'OCG') {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === 'OCMD') {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === 'AnyOn') {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === 'AllOn') {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === 'AnyOff') {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === 'AllOff') {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({ state, preserveRB }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case 'ON':\n        case 'OFF':\n        case 'Toggle':\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case 'ON':\n          group._setVisible(INTERNAL, true);\n          break;\n        case 'OFF':\n          group._setVisible(INTERNAL, false);\n          break;\n        case 'Toggle':\n          group._setVisible(INTERNAL, !group.visible);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroups() {\n    return this.#groups.size > 0 ? objectFromMap(this.#groups) : null;\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return (this.#cachedGetHash = hash.hexdigest());\n  }\n} // CONCATENATED MODULE: ./src/display/transport_stream.js\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, { disableRange = false, disableStream = false }) {\n    assert(\n      pdfDataRangeTransport,\n      'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.',\n    );\n    const { length, initialData, progressiveDone, contentDispositionFilename } =\n      pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer =\n        initialData instanceof Uint8Array &&\n        initialData.byteLength === initialData.buffer.byteLength\n          ? initialData.buffer\n          : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk,\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total,\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener((chunk) => {\n      this._onReceiveData({\n        chunk,\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({ begin, chunk }) {\n    const buffer =\n      chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength\n        ? chunk.buffer\n        : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, '_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.');\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded,\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total,\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      'PDFDataTransportStream.getFullReader can only be called once.',\n    );\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(\n      this,\n      queuedChunks,\n      this._progressiveDone,\n      this._contentDispositionFilename,\n    );\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false,\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false,\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false,\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true,\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false,\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n} // CONCATENATED MODULE: ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp('filename\\\\*', 'i').exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp('filename', 'i').exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\n      '(?:^|;)\\\\s*' +\n        attributePattern +\n        '\\\\s*=\\\\s*' +\n        '(' +\n        '[^\";\\\\s][^;\\\\s]*' +\n        '|' +\n        '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' +\n        ')',\n      flags,\n    );\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true,\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode('utf-8', value);\n      if (needsEncodingFixup) {\n        value = textdecode('iso-8859-1', value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp('filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)', 'ig');\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join('');\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, '$1');\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, '');\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith('=?') || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(\n      /=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,\n      function (matches, charset, encoding, text) {\n        if (encoding === 'q' || encoding === 'Q') {\n          text = text.replaceAll('_', ' ');\n          text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n            return String.fromCharCode(parseInt(hex, 16));\n          });\n          return textdecode(charset, text);\n        }\n        try {\n          text = atob(text);\n        } catch {}\n        return textdecode(charset, text);\n      },\n    );\n  }\n  return '';\n} // CONCATENATED MODULE: ./src/display/network_utils.js\n\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange,\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined,\n  };\n  const length = parseInt(getResponseHeader('Content-Length'), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader('Accept-Ranges') !== 'bytes') {\n    return returnValues;\n  }\n  const contentEncoding = getResponseHeader('Content-Encoding') || 'identity';\n  if (contentEncoding !== 'identity') {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader('Content-Disposition');\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes('%')) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || (status === 0 && url.startsWith('file:'))) {\n    return new MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new UnexpectedResponseException(\n    `Unexpected server response (${status}) while retrieving PDF \"${url}\".`,\n    status,\n  );\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n} // CONCATENATED MODULE: ./src/display/fetch_stream.js\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: 'GET',\n    headers,\n    signal: abortController.signal,\n    mode: 'cors',\n    credentials: withCredentials ? 'include' : 'same-origin',\n    redirect: 'follow',\n  };\n}\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (value === undefined) {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, 'PDFFetchStream.getFullReader can only be called once.');\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._headers = createHeaders(this._stream.httpHeaders);\n    const url = source.url;\n    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController))\n      .then((response) => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._reader = response.body.getReader();\n        this._headersCapability.resolve();\n        const getResponseHeader = (name) => response.headers.get(name);\n        const { allowRangeRequests, suggestedLength } = validateRangeRequestCapabilities({\n          getResponseHeader,\n          isHttp: this._stream.isHttp,\n          rangeChunkSize: this._rangeChunkSize,\n          disableRange: this._disableRange,\n        });\n        this._isRangeSupported = allowRangeRequests;\n        this._contentLength = suggestedLength || this._contentLength;\n        this._filename = extractFilenameFromHeader(getResponseHeader);\n        if (!this._isStreamingSupported && this._isRangeSupported) {\n          this.cancel(new AbortException('Streaming is disabled.'));\n        }\n      })\n      .catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done,\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false,\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append('Range', `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController))\n      .then((response) => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._readCapability.resolve();\n        this._reader = response.body.getReader();\n      })\n      .catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done,\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false,\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n} // CONCATENATED MODULE: ./src/display/network.js\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== 'string') {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  constructor(url, args = {}) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = (this.isHttp && args.httpHeaders) || Object.create(null);\n    this.withCredentials = args.withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end,\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = (this.pendingRequests[xhrId] = {\n      xhr,\n    });\n    xhr.open('GET', this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && 'begin' in args && 'end' in args) {\n      xhr.setRequestHeader('Range', `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = 'arraybuffer';\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request =\n      xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader('Content-Range');\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk,\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk,\n      });\n    } else {\n      pendingRequest.onError?.(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials,\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, 'PDFNetworkStream.getFullReader can only be called once.');\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    const getResponseHeader = (name) => fullRequestXhr.getResponseHeader(name);\n    const { allowRangeRequests, suggestedLength } = validateRangeRequestCapabilities({\n      getResponseHeader,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange,\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(getResponseHeader);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersReceivedCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false,\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    this._headersReceivedCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength,\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false,\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    const args = {\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = manager.url;\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false,\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded,\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false,\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true,\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n} // CONCATENATED MODULE: ./src/display/node_stream.js\n\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\nfunction parseUrl(sourceUrl) {\n  const url = NodePackages.get('url');\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === 'file:' || parsedUrl.host) {\n    return parsedUrl;\n  }\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = 'file:';\n  }\n  return parsedUrl;\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp = this.url.protocol === 'http:' || this.url.protocol === 'https:';\n    this.isFsUrl = this.url.protocol === 'file:';\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, 'PDFNodeStream.getFullReader can only be called once.');\n    this._fullRequestReader = this.isFsUrl\n      ? new PDFNodeStreamFsFullReader(this)\n      : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl\n      ? new PDFNodeStreamFsRangeReader(this, start, end)\n      : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false,\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on('readable', () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on('end', () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on('error', (reason) => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException('streaming is disabled'));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true,\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false,\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on('readable', () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on('end', () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on('error', (reason) => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: 'GET',\n    headers,\n  };\n}\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n    const handleResponse = (response) => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n      const getResponseHeader = (name) => this._readableStream.headers[name.toLowerCase()];\n      const { allowRangeRequests, suggestedLength } = validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange,\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n    };\n    this._request = null;\n    if (this._url.protocol === 'http:') {\n      const http = NodePackages.get('http');\n      this._request = http.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse,\n      );\n    } else {\n      const https = NodePackages.get('https');\n      this._request = https.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse,\n      );\n    }\n    this._request.on('error', (reason) => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    this._request.end();\n  }\n}\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n    const handleResponse = (response) => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n    this._request = null;\n    if (this._url.protocol === 'http:') {\n      const http = NodePackages.get('http');\n      this._request = http.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse,\n      );\n    } else {\n      const https = NodePackages.get('https');\n      this._request = https.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse,\n      );\n    }\n    this._request.on('error', (reason) => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n    let path = decodeURIComponent(this._url.path);\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, '');\n    }\n    const fs = NodePackages.get('fs');\n    fs.promises.lstat(path).then(\n      (stat) => {\n        this._contentLength = stat.size;\n        this._setReadableStream(fs.createReadStream(path));\n        this._headersCapability.resolve();\n      },\n      (error) => {\n        if (error.code === 'ENOENT') {\n          error = new MissingPDFException(`Missing PDF \"${path}\".`);\n        }\n        this._storedError = error;\n        this._headersCapability.reject(error);\n      },\n    );\n  }\n}\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n    let path = decodeURIComponent(this._url.path);\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, '');\n    }\n    const fs = NodePackages.get('fs');\n    this._setReadableStream(\n      fs.createReadStream(path, {\n        start,\n        end: end - 1,\n      }),\n    );\n  }\n} // CONCATENATED MODULE: ./src/display/text_layer.js\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nconst DEFAULT_FONT_ASCENT = 0.8;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #pendingTextLayers = new Set();\n  constructor({ textContentSource, container, viewport }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === 'object') {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        },\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      properties: null,\n      ctx: null,\n    };\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    setLayerDimensions(container, viewport);\n    TextLayer.#pendingTextLayers.add(this);\n    this.#capability.promise\n      .catch(() => {})\n      .then(() => {\n        TextLayer.#pendingTextLayers.delete(this);\n        this.#layoutTextParams = null;\n        this.#styleCache = null;\n      });\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({ value, done }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    pump();\n    return this.#capability.promise;\n  }\n  update({ viewport, onBefore = null }) {\n    const scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation,\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        prevFontSize: null,\n        prevFontFamily: null,\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang),\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException('TextLayer task cancelled.');\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ||= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn('Ignoring additional textDivs for performance reasons.');\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === 'beginMarkedContentProps' || item.type === 'beginMarkedContent') {\n          const parent = this.#container;\n          this.#container = document.createElement('span');\n          this.#container.classList.add('markedContent');\n          if (item.id !== null) {\n            this.#container.setAttribute('id', `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === 'endMarkedContent') {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement('span');\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== '',\n      hasEOL: geom.hasEOL,\n      fontSize: 0,\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    const fontFamily = (this.#fontInspectorEnabled && style.fontSubstitution) || style.fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = 'calc(var(--scale-factor)*';\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${((100 * left) / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${((100 * top) / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${fontHeight.toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute('role', 'presentation');\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== ' ' && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (\n        absScaleX !== absScaleY &&\n        Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5\n      ) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement('br');\n      br.setAttribute('role', 'presentation');\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const { div, properties, ctx, prevFontSize, prevFontFamily } = params;\n    const { style } = div;\n    let transform = '';\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const { fontFamily } = style;\n      const { canvasWidth, fontSize } = properties;\n      if (prevFontSize !== fontSize || prevFontFamily !== fontFamily) {\n        ctx.font = `${fontSize * this.#scale}px ${fontFamily}`;\n        params.prevFontSize = fontSize;\n        params.prevFontFamily = fontFamily;\n      }\n      const { width } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${(canvasWidth * this.#scale) / width})`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const { canvas } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let canvasContext = this.#canvasContexts.get((lang ||= ''));\n    if (!canvasContext) {\n      const canvas = document.createElement('canvas');\n      canvas.className = 'hiddenCanvasElement';\n      canvas.lang = lang;\n      document.body.append(canvas);\n      canvasContext = canvas.getContext('2d', {\n        alpha: false,\n      });\n      this.#canvasContexts.set(lang, canvasContext);\n    }\n    return canvasContext;\n  }\n  static #getAscent(fontFamily, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    const savedFont = ctx.font;\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;\n    const metrics = ctx.measureText('');\n    let ascent = metrics.fontBoundingBoxAscent;\n    let descent = Math.abs(metrics.fontBoundingBoxDescent);\n    if (ascent) {\n      const ratio = ascent / (ascent + descent);\n      this.#ascentCache.set(fontFamily, ratio);\n      ctx.canvas.width = ctx.canvas.height = 0;\n      ctx.font = savedFont;\n      return ratio;\n    }\n    ctx.strokeStyle = 'red';\n    ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n    ctx.strokeText('g', 0, 0);\n    let pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n    descent = 0;\n    for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n      if (pixels[i] > 0) {\n        descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n        break;\n      }\n    }\n    ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n    ctx.strokeText('A', 0, DEFAULT_FONT_SIZE);\n    pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n    ascent = 0;\n    for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n      if (pixels[i] > 0) {\n        ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n        break;\n      }\n    }\n    ctx.canvas.width = ctx.canvas.height = 0;\n    ctx.font = savedFont;\n    const ratio = ascent ? ascent / (ascent + descent) : DEFAULT_FONT_ASCENT;\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\nfunction renderTextLayer() {\n  deprecated('`renderTextLayer`, please use `TextLayer` instead.');\n  const { textContentSource, container, viewport, ...rest } = arguments[0];\n  const restKeys = Object.keys(rest);\n  if (restKeys.length > 0) {\n    warn('Ignoring `renderTextLayer` parameters: ' + restKeys.join(', '));\n  }\n  const textLayer = new TextLayer({\n    textContentSource,\n    container,\n    viewport,\n  });\n  const { textDivs, textContentItemsStr } = textLayer;\n  const promise = textLayer.render();\n  return {\n    promise,\n    textDivs,\n    textContentItemsStr,\n  };\n}\nfunction updateTextLayer() {\n  deprecated('`updateTextLayer`, please use `TextLayer` instead.');\n} // CONCATENATED MODULE: ./src/display/xfa_text.js\n\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null),\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === '#text') {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str,\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === 'textarea' || name === 'input' || name === 'option' || name === 'select');\n  }\n} // CONCATENATED MODULE: ./src/display/api.js\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536;\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nconst DELAYED_CLEANUP_TIMEOUT = 5000;\nconst DefaultCanvasFactory = isNodeJS ? NodeCanvasFactory : DOMCanvasFactory;\nconst DefaultCMapReaderFactory = isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory;\nconst DefaultFilterFactory = isNodeJS ? NodeFilterFactory : DOMFilterFactory;\nconst DefaultStandardFontDataFactory = isNodeJS\n  ? NodeStandardFontDataFactory\n  : DOMStandardFontDataFactory;\nfunction getDocument(src) {\n  if (typeof src === 'string' || src instanceof URL) {\n    src = {\n      url: src,\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src,\n    };\n  }\n  if (typeof src !== 'object') {\n    throw new Error('Invalid parameter in getDocument, need parameter object.');\n  }\n  if (!src.url && !src.data && !src.range) {\n    throw new Error('Invalid parameter object: need either .data, .range or .url');\n  }\n  const task = new PDFDocumentLoadingTask();\n  const { docId } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize =\n    Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0\n      ? src.rangeChunkSize\n      : DEFAULT_RANGE_CHUNK_SIZE;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl =\n    typeof src.docBaseUrl === 'string' && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = typeof src.cMapUrl === 'string' ? src.cMapUrl : null;\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || DefaultCMapReaderFactory;\n  const standardFontDataUrl =\n    typeof src.standardFontDataUrl === 'string' ? src.standardFontDataUrl : null;\n  const StandardFontDataFactory = src.StandardFontDataFactory || DefaultStandardFontDataFactory;\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize =\n    Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported =\n    typeof src.isOffscreenCanvasSupported === 'boolean'\n      ? src.isOffscreenCanvasSupported\n      : !isNodeJS;\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes)\n    ? src.canvasMaxAreaInBytes\n    : -1;\n  const disableFontFace = typeof src.disableFontFace === 'boolean' ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const length = rangeTransport ? rangeTransport.length : (src.length ?? NaN);\n  const useSystemFonts =\n    typeof src.useSystemFonts === 'boolean' ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch =\n    typeof src.useWorkerFetch === 'boolean'\n      ? src.useWorkerFetch\n      : CMapReaderFactory === DOMCMapReaderFactory &&\n        StandardFontDataFactory === DOMStandardFontDataFactory &&\n        cMapUrl &&\n        standardFontDataUrl &&\n        isValidFetchUrl(cMapUrl, document.baseURI) &&\n        isValidFetchUrl(standardFontDataUrl, document.baseURI);\n  const canvasFactory =\n    src.canvasFactory ||\n    new DefaultCanvasFactory({\n      ownerDocument,\n    });\n  const filterFactory =\n    src.filterFactory ||\n    new DefaultFilterFactory({\n      docId,\n      ownerDocument,\n    });\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory,\n    filterFactory,\n  };\n  if (!useWorkerFetch) {\n    transportFactory.cMapReaderFactory = new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked,\n    });\n    transportFactory.standardFontDataFactory = new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl,\n    });\n  }\n  if (!worker) {\n    const workerParams = {\n      verbosity,\n      port: GlobalWorkerOptions.workerPort,\n    };\n    worker = workerParams.port ? PDFWorker.fromPort(workerParams) : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: '4.3.99',\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      cMapUrl: useWorkerFetch ? cMapUrl : null,\n      standardFontDataUrl: useWorkerFetch ? standardFontDataUrl : null,\n    },\n  };\n  const transportParams = {\n    disableFontFace,\n    fontExtraProperties,\n    enableXfa,\n    ownerDocument,\n    disableAutoFetch,\n    pdfBug,\n    styleElement,\n  };\n  worker.promise\n    .then(function () {\n      if (task.destroyed) {\n        throw new Error('Loading aborted');\n      }\n      if (worker.destroyed) {\n        throw new Error('Worker was destroyed');\n      }\n      const workerIdPromise = worker.messageHandler.sendWithPromise(\n        'GetDocRequest',\n        docParams,\n        data ? [data.buffer] : null,\n      );\n      let networkStream;\n      if (rangeTransport) {\n        networkStream = new PDFDataTransportStream(rangeTransport, {\n          disableRange,\n          disableStream,\n        });\n      } else if (!data) {\n        const createPDFNetworkStream = (params) => {\n          if (isNodeJS) {\n            const isFetchSupported = function () {\n              return (\n                typeof fetch !== 'undefined' &&\n                typeof Response !== 'undefined' &&\n                'body' in Response.prototype\n              );\n            };\n            return isFetchSupported() && isValidFetchUrl(params.url)\n              ? new PDFFetchStream(params)\n              : new PDFNodeStream(params);\n          }\n          return isValidFetchUrl(params.url)\n            ? new PDFFetchStream(params)\n            : new PDFNetworkStream(params);\n        };\n        networkStream = createPDFNetworkStream({\n          url,\n          length,\n          httpHeaders,\n          withCredentials,\n          rangeChunkSize,\n          disableRange,\n          disableStream,\n        });\n      }\n      return workerIdPromise.then((workerId) => {\n        if (task.destroyed) {\n          throw new Error('Loading aborted');\n        }\n        if (worker.destroyed) {\n          throw new Error('Worker was destroyed');\n        }\n        const messageHandler = new MessageHandler(docId, workerId, worker.port);\n        const transport = new WorkerTransport(\n          messageHandler,\n          task,\n          networkStream,\n          transportParams,\n          transportFactory,\n        );\n        task._transport = transport;\n        messageHandler.send('Ready', null);\n      });\n    })\n    .catch(task._capability.reject);\n  return task;\n}\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  try {\n    return new URL(val, window.location).href;\n  } catch {\n    if (isNodeJS && typeof val === 'string') {\n      return val;\n    }\n  }\n  throw new Error(\n    'Invalid PDF url data: ' + 'either string or URL-object is expected in the url property.',\n  );\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== 'undefined' && val instanceof Buffer) {\n    throw new Error('Please provide binary data as `Uint8Array`, rather than `Buffer`.');\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === 'string') {\n    return stringToBytes(val);\n  }\n  if (\n    val instanceof ArrayBuffer ||\n    ArrayBuffer.isView(val) ||\n    (typeof val === 'object' && !isNaN(val?.length))\n  ) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\n    'Invalid PDF binary data: either TypedArray, ' +\n      'string, or array-like object is expected in the data property.',\n  );\n}\nfunction isRefProxy(ref) {\n  return (\n    typeof ref === 'object' &&\n    Number.isInteger(ref?.num) &&\n    ref.num >= 0 &&\n    Number.isInteger(ref?.gen) &&\n    ref.gen >= 0\n  );\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  constructor() {\n    this._capability = Promise.withResolvers();\n    this._transport = null;\n    this._worker = null;\n    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;\n    this.destroyed = false;\n    this.onPassword = null;\n    this.onProgress = null;\n  }\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    if (this._worker) {\n      this._worker.destroy();\n      this._worker = null;\n    }\n  }\n}\nclass PDFDataRangeTransport {\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = Promise.withResolvers();\n  }\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable('Abstract method PDFDataRangeTransport.requestDataRange');\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, 'isPureXfa', !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({ intent = 'display' } = {}) {\n    const { renderingIntent } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #delayedCleanupTimeout = null;\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._maybeCleanupAfterRender = false;\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({ scale, rotation = this.rotate, offsetX = 0, offsetY = 0, dontFlip = false } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n  getAnnotations({ intent = 'display' } = {}) {\n    const { renderingIntent } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, 'isPureXfa', !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = 'display',\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n  }) {\n    this._stats?.time('Overall');\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage,\n    );\n    const { renderingIntent, cacheKey } = intentArgs;\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n      this._stats?.time('Page Request');\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = (error) => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (this._maybeCleanupAfterRender || intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup(!intentPrint);\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error),\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd('Rendering');\n        this._stats.timeEnd('Overall');\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background,\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors,\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise])\n      .then(([transparency, optionalContentConfig]) => {\n        if (this.destroyed) {\n          complete();\n          return;\n        }\n        this._stats?.time('Rendering');\n        if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n          throw new Error(\n            'Must use the same `intent`-argument when calling the `PDFPageProxy.render` ' +\n              'and `PDFDocumentProxy.getOptionalContentConfig` methods.',\n          );\n        }\n        internalRenderTask.initializeGraphics({\n          transparency,\n          optionalContentConfig,\n        });\n        internalRenderTask.operatorListChanged();\n      })\n      .catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = 'display',\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage,\n      true,\n    );\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n      this._stats?.time('Page Request');\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({ includeMarkedContent = false, disableNormalization = false } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\n      'GetTextContent',\n      {\n        pageIndex: this._pageIndex,\n        includeMarkedContent: includeMarkedContent === true,\n        disableNormalization: disableNormalization === true,\n      },\n      {\n        highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n        size(textContent) {\n          return textContent.items.length;\n        },\n      },\n    );\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then((xfa) => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({ value, done }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null,\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error('Page was destroyed.'),\n        force: true,\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup(false);\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup(delayed = false) {\n    this.#abortDelayedCleanup();\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    if (delayed) {\n      this.#delayedCleanupTimeout = setTimeout(() => {\n        this.#delayedCleanupTimeout = null;\n        this.#tryCleanup(false);\n      }, DELAYED_CLEANUP_TIMEOUT);\n      return false;\n    }\n    for (const { renderTasks, operatorList } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  #abortDelayedCleanup() {\n    if (this.#delayedCleanupTimeout) {\n      clearTimeout(this.#delayedCleanupTimeout);\n      this.#delayedCleanupTimeout = null;\n    }\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd('Page Request');\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup(true);\n    }\n  }\n  _pumpOperatorList({ renderingIntent, cacheKey, annotationStorageSerializable }) {\n    const { map, transfer } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\n      'GetOperatorList',\n      {\n        pageIndex: this._pageIndex,\n        intent: renderingIntent,\n        cacheKey,\n        annotationStorage: map,\n      },\n      transfer,\n    );\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(\n        ({ value, done }) => {\n          if (done) {\n            intentState.streamReader = null;\n            return;\n          }\n          if (this._transport.destroyed) {\n            return;\n          }\n          this._renderPageChunk(value, intentState);\n          pump();\n        },\n        (reason) => {\n          intentState.streamReader = null;\n          if (this._transport.destroyed) {\n            return;\n          }\n          if (intentState.operatorList) {\n            intentState.operatorList.lastChunk = true;\n            for (const internalRenderTask of intentState.renderTasks) {\n              internalRenderTask.operatorListChanged();\n            }\n            this.#tryCleanup(true);\n          }\n          if (intentState.displayReadyCapability) {\n            intentState.displayReadyCapability.reject(reason);\n          } else if (intentState.opListReadCapability) {\n            intentState.opListReadCapability.reject(reason);\n          } else {\n            throw reason;\n          }\n        },\n      );\n    };\n    pump();\n  }\n  _abortOperatorList({ intentState, reason, force = false }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true,\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass LoopbackPort {\n  #listeners = new Set();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(\n        obj,\n        transfer\n          ? {\n              transfer,\n            }\n          : null,\n      ),\n    };\n    this.#deferred.then(() => {\n      for (const listener of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener) {\n    this.#listeners.add(listener);\n  }\n  removeEventListener(name, listener) {\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    this.#listeners.clear();\n  }\n}\nconst PDFWorkerUtil = {\n  isWorkerDisabled: false,\n  fakeWorkerId: 0,\n};\n{\n  if (isNodeJS) {\n    PDFWorkerUtil.isWorkerDisabled = true;\n  }\n  GlobalWorkerOptions.workerSrc ||= '/script/pdf.worker.mjs';\n  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n    let base;\n    try {\n      base = new URL(baseUrl);\n      if (!base.origin || base.origin === 'null') {\n        return false;\n      }\n    } catch {\n      return false;\n    }\n    const other = new URL(otherUrl, base);\n    return base.origin === other.origin;\n  };\n  PDFWorkerUtil.createCDNWrapper = function (url) {\n    const wrapper = `await import(\"${url}\");`;\n    return URL.createObjectURL(\n      new Blob([wrapper], {\n        type: 'text/javascript',\n      }),\n    );\n  };\n}\nclass PDFWorker {\n  static #workerPorts;\n  constructor({ name = null, port = null, verbosity = getVerbosityLevel() } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    this._readyCapability = Promise.withResolvers();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n    if (port) {\n      if (PDFWorker.#workerPorts?.has(port)) {\n        throw new Error('Cannot use more than one PDFWorker per port.');\n      }\n      (PDFWorker.#workerPorts ||= new WeakMap()).set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n  get promise() {\n    if (isNodeJS) {\n      return Promise.all([NodePackages.promise, this._readyCapability.promise]);\n    }\n    return this._readyCapability.promise;\n  }\n  get port() {\n    return this._port;\n  }\n  get messageHandler() {\n    return this._messageHandler;\n  }\n  _initializeFromPort(port) {\n    this._port = port;\n    this._messageHandler = new MessageHandler('main', 'worker', port);\n    this._messageHandler.on('ready', function () {});\n    this._readyCapability.resolve();\n    this._messageHandler.send('configure', {\n      verbosity: this.verbosity,\n    });\n  }\n  _initialize() {\n    if (!PDFWorkerUtil.isWorkerDisabled && !PDFWorker.#mainThreadWorkerMessageHandler) {\n      let { workerSrc } = PDFWorker;\n      try {\n        if (!PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)) {\n          workerSrc = PDFWorkerUtil.createCDNWrapper(new URL(workerSrc, window.location).href);\n        }\n        const worker = new Worker(workerSrc, {\n          type: 'module',\n        });\n        const messageHandler = new MessageHandler('main', 'worker', worker);\n        const terminateEarly = () => {\n          worker.removeEventListener('error', onWorkerError);\n          messageHandler.destroy();\n          worker.terminate();\n          if (this.destroyed) {\n            this._readyCapability.reject(new Error('Worker was destroyed'));\n          } else {\n            this._setupFakeWorker();\n          }\n        };\n        const onWorkerError = () => {\n          if (!this._webWorker) {\n            terminateEarly();\n          }\n        };\n        worker.addEventListener('error', onWorkerError);\n        messageHandler.on('test', (data) => {\n          worker.removeEventListener('error', onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return;\n          }\n          if (data) {\n            this._messageHandler = messageHandler;\n            this._port = worker;\n            this._webWorker = worker;\n            this._readyCapability.resolve();\n            messageHandler.send('configure', {\n              verbosity: this.verbosity,\n            });\n          } else {\n            this._setupFakeWorker();\n            messageHandler.destroy();\n            worker.terminate();\n          }\n        });\n        messageHandler.on('ready', (data) => {\n          worker.removeEventListener('error', onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return;\n          }\n          try {\n            sendTest();\n          } catch {\n            this._setupFakeWorker();\n          }\n        });\n        const sendTest = () => {\n          const testObj = new Uint8Array();\n          messageHandler.send('test', testObj, [testObj.buffer]);\n        };\n        sendTest();\n        return;\n      } catch {\n        info('The worker has been disabled.');\n      }\n    }\n    this._setupFakeWorker();\n  }\n  _setupFakeWorker() {\n    if (!PDFWorkerUtil.isWorkerDisabled) {\n      warn('Setting up fake worker.');\n      PDFWorkerUtil.isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal\n      .then((WorkerMessageHandler) => {\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error('Worker was destroyed'));\n          return;\n        }\n        const port = new LoopbackPort();\n        this._port = port;\n        const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;\n        const workerHandler = new MessageHandler(id + '_worker', id, port);\n        WorkerMessageHandler.setup(workerHandler, port);\n        const messageHandler = new MessageHandler(id, id + '_worker', port);\n        this._messageHandler = messageHandler;\n        this._readyCapability.resolve();\n        messageHandler.send('configure', {\n          verbosity: this.verbosity,\n        });\n      })\n      .catch((reason) => {\n        this._readyCapability.reject(\n          new Error(`Setting up fake worker failed: \"${reason.message}\".`),\n        );\n      });\n  }\n  destroy() {\n    this.destroyed = true;\n    if (this._webWorker) {\n      this._webWorker.terminate();\n      this._webWorker = null;\n    }\n    PDFWorker.#workerPorts?.delete(this._port);\n    this._port = null;\n    if (this._messageHandler) {\n      this._messageHandler.destroy();\n      this._messageHandler = null;\n    }\n  }\n  static fromPort(params) {\n    if (!params?.port) {\n      throw new Error('PDFWorker.fromPort - invalid method signature.');\n    }\n    const cachedPort = this.#workerPorts?.get(params.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\n          'PDFWorker.fromPort - the worker is being destroyed.\\n' +\n            'Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.',\n        );\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import(/*webpackIgnore: true*/ this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, '_setupFakeWorkerGlobal', loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement,\n    });\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, 'annotationStorage', new AnnotationStorage());\n  }\n  getRenderingIntent(\n    intent,\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isOpList = false,\n  ) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case 'any':\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case 'display':\n        break;\n      case 'print':\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        const annotationStorage =\n          renderingIntent & RenderingIntentFlag.PRINT &&\n          printAnnotationStorage instanceof PrintAnnotationStorage\n            ? printAnnotationStorage\n            : this.annotationStorage;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    return {\n      renderingIntent,\n      cacheKey: `${renderingIntent}_${annotationStorageSerializable.hash}`,\n      annotationStorageSerializable,\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error('Worker was destroyed during onPassword callback'));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty('annotationStorage')) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise('Terminate', null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException('Worker was terminated.'));\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const { messageHandler, loadingTask } = this;\n    messageHandler.on('GetReader', (data, sink) => {\n      assert(this._networkStream, 'GetReader - no `IPDFStream` instance available.');\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = (evt) => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total,\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(value instanceof ArrayBuffer, 'GetReader - expected an ArrayBuffer.');\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch((reason) => {\n            sink.error(reason);\n          });\n      };\n      sink.onCancel = (reason) => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch((readyReason) => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on('ReaderHeadersReady', (data) => {\n      const headersCapability = Promise.withResolvers();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress) {\n            loadingTask.onProgress?.(this._lastProgress);\n          }\n          fullReader.onProgress = (evt) => {\n            loadingTask.onProgress?.({\n              loaded: evt.loaded,\n              total: evt.total,\n            });\n          };\n        }\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength,\n        });\n      }, headersCapability.reject);\n      return headersCapability.promise;\n    });\n    messageHandler.on('GetRangeReader', (data, sink) => {\n      assert(this._networkStream, 'GetRangeReader - no `IPDFStream` instance available.');\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(value instanceof ArrayBuffer, 'GetRangeReader - expected an ArrayBuffer.');\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch((reason) => {\n            sink.error(reason);\n          });\n      };\n      sink.onCancel = (reason) => {\n        rangeReader.cancel(reason);\n        sink.ready.catch((readyReason) => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on('GetDoc', ({ pdfInfo }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on('DocException', function (ex) {\n      let reason;\n      switch (ex.name) {\n        case 'PasswordException':\n          reason = new PasswordException(ex.message, ex.code);\n          break;\n        case 'InvalidPDFException':\n          reason = new InvalidPDFException(ex.message);\n          break;\n        case 'MissingPDFException':\n          reason = new MissingPDFException(ex.message);\n          break;\n        case 'UnexpectedResponseException':\n          reason = new UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case 'UnknownErrorException':\n          reason = new UnknownErrorException(ex.message, ex.details);\n          break;\n        default:\n          unreachable('DocException - expected a valid Error.');\n      }\n      loadingTask._capability.reject(reason);\n    });\n    messageHandler.on('PasswordRequest', (exception) => {\n      this.#passwordCapability = Promise.withResolvers();\n      if (loadingTask.onPassword) {\n        const updatePassword = (password) => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password,\n            });\n          }\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this.#passwordCapability.reject(ex);\n        }\n      } else {\n        this.#passwordCapability.reject(new PasswordException(exception.message, exception.code));\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on('DataLoaded', (data) => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length,\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on('StartRenderPage', (data) => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on('commonobj', ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case 'Font':\n          const { disableFontFace, fontExtraProperties, pdfBug } = this._params;\n          if ('error' in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont =\n            pdfBug && globalThis.FontInspector?.enabled\n              ? (font, url) => globalThis.FontInspector.fontAdded(font, url)\n              : null;\n          const font = new FontFaceObject(exportedData, {\n            disableFontFace,\n            inspectFont,\n          });\n          this.fontLoader\n            .bind(font)\n            .catch(() =>\n              messageHandler.sendWithPromise('FontFallback', {\n                id,\n              }),\n            )\n            .finally(() => {\n              if (!fontExtraProperties && font.data) {\n                font.data = null;\n              }\n              this.commonObjs.resolve(id, font);\n            });\n          break;\n        case 'CopyLocalImage':\n          const { imageRef } = exportedData;\n          assert(imageRef, 'The imageRef must be defined.');\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case 'FontPath':\n        case 'Image':\n        case 'Pattern':\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on('obj', ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case 'Image':\n          pageProxy.objs.resolve(id, imageData);\n          if (imageData?.dataLen > MAX_IMAGE_SIZE_TO_CACHE) {\n            pageProxy._maybeCleanupAfterRender = true;\n          }\n          break;\n        case 'Pattern':\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on('DocProgress', (data) => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total,\n      });\n    });\n    messageHandler.on('FetchBuiltInCMap', (data) => {\n      if (this.destroyed) {\n        return Promise.reject(new Error('Worker was destroyed.'));\n      }\n      if (!this.cMapReaderFactory) {\n        return Promise.reject(\n          new Error('CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.'),\n        );\n      }\n      return this.cMapReaderFactory.fetch(data);\n    });\n    messageHandler.on('FetchStandardFontData', (data) => {\n      if (this.destroyed) {\n        return Promise.reject(new Error('Worker was destroyed.'));\n      }\n      if (!this.standardFontDataFactory) {\n        return Promise.reject(\n          new Error('StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.'),\n        );\n      }\n      return this.standardFontDataFactory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise('GetData', null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\n        'saveDocument called while `annotationStorage` is empty, ' +\n          'please use the getData-method instead.',\n      );\n    }\n    const { map, transfer } = this.annotationStorage.serializable;\n    return this.messageHandler\n      .sendWithPromise(\n        'SaveDocument',\n        {\n          isPureXfa: !!this._htmlForXfa,\n          numPages: this._numPages,\n          annotationStorage: map,\n          filename: this._fullReader?.filename ?? null,\n        },\n        transfer,\n      )\n      .finally(() => {\n        this.annotationStorage.resetModified();\n      });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error('Invalid page request.'));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise('GetPage', {\n        pageIndex,\n      })\n      .then((pageInfo) => {\n        if (this.destroyed) {\n          throw new Error('Transport destroyed');\n        }\n        if (pageInfo.refStr) {\n          this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n        }\n        const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n        this.#pageCache.set(pageIndex, page);\n        return page;\n      });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error('Invalid pageIndex request.'));\n    }\n    return this.messageHandler.sendWithPromise('GetPageIndex', {\n      num: ref.num,\n      gen: ref.gen,\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise('GetAnnotations', {\n      pageIndex,\n      intent,\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod('GetFieldObjects');\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod('HasJSActions');\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise('GetCalculationOrderIds', null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise('GetDestinations', null);\n  }\n  getDestination(id) {\n    if (typeof id !== 'string') {\n      return Promise.reject(new Error('Invalid destination request.'));\n    }\n    return this.messageHandler.sendWithPromise('GetDestination', {\n      id,\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise('GetPageLabels', null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise('GetPageLayout', null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise('GetPageMode', null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise('GetViewerPreferences', null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise('GetOpenAction', null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise('GetAttachments', null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod('GetDocJSActions');\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise('GetPageJSActions', {\n      pageIndex,\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise('GetStructTree', {\n      pageIndex,\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise('GetOutline', null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod('GetOptionalContentConfig').then(\n      (data) => new OptionalContentConfig(data, renderingIntent),\n    );\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise('GetPermissions', null);\n  }\n  getMetadata() {\n    const name = 'GetMetadata',\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then((results) => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null,\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise('GetMarkInfo', null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise('Cleanup', null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n  get loadingParams() {\n    const { disableAutoFetch, enableXfa } = this._params;\n    return shadow(this, 'loadingParams', {\n      disableAutoFetch,\n      enableXfa,\n    });\n  }\n}\nconst INITIAL_DATA = Symbol('INITIAL_DATA');\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return (this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA,\n    });\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n    this.onContinue = null;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const { separateAnnots } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const { annotationCanvasMap } = this.#internalRenderTask;\n    return separateAnnots.form || (separateAnnots.canvas && annotationCanvasMap?.size > 0);\n  }\n}\nclass InternalRenderTask {\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null,\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame =\n      useRequestAnimationFrame === true && typeof window !== 'undefined';\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({ transparency = false, optionalContentConfig }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\n          'Cannot use the same canvas during multiple render() operations. ' +\n            'Use different canvas or ensure previous operations were ' +\n            'cancelled or completed.',\n        );\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const { canvasContext, viewport, transform, background } = this.params;\n    this.gfx = new CanvasGraphics(\n      canvasContext,\n      this.commonObjs,\n      this.objs,\n      this.canvasFactory,\n      this.filterFactory,\n      {\n        optionalContentConfig,\n      },\n      this.annotationCanvasMap,\n      this.pageColors,\n    );\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background,\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    this.callback(\n      error ||\n        new RenderingCancelledException(\n          `Rendering cancelled, page ${this._pageIndex + 1}`,\n          extraDelay,\n        ),\n    );\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      window.requestAnimationFrame(() => {\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(\n      this.operatorList,\n      this.operatorListIdx,\n      this._continueBound,\n      this.stepper,\n    );\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = '4.3.99';\nconst build = '2a52fda11'; // CONCATENATED MODULE: ./src/shared/scripting_utils.js\n\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255)\n    .toString(16)\n    .padStart(2, '0');\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return ['G', 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return ['CMYK', 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return ['RGB', g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return ['G', 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join('')}`;\n  }\n  static T_HTML() {\n    return '#00000000';\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return ['RGB', 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [\n      scaleAndClamp(1 - Math.min(1, c + k)),\n      scaleAndClamp(1 - Math.min(1, m + k)),\n      scaleAndClamp(1 - Math.min(1, y + k)),\n    ];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return ['CMYK', c, m, y, k];\n  }\n} // CONCATENATED MODULE: ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null,\n    });\n    switch (element.name) {\n      case 'textarea':\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === 'print') {\n          break;\n        }\n        html.addEventListener('input', (event) => {\n          storage.setValue(id, {\n            value: event.target.value,\n          });\n        });\n        break;\n      case 'input':\n        if (element.attributes.type === 'radio' || element.attributes.type === 'checkbox') {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute('checked', true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute('checked');\n          }\n          if (intent === 'print') {\n            break;\n          }\n          html.addEventListener('change', (event) => {\n            storage.setValue(id, {\n              value: event.target.checked\n                ? event.target.getAttribute('xfaOn')\n                : event.target.getAttribute('xfaOff'),\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute('value', storedData.value);\n          }\n          if (intent === 'print') {\n            break;\n          }\n          html.addEventListener('input', (event) => {\n            storage.setValue(id, {\n              value: event.target.value,\n            });\n          });\n        }\n        break;\n      case 'select':\n        if (storedData.value !== null) {\n          html.setAttribute('value', storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty('selected')) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener('input', (event) => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? '' : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value,\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({ html, element, storage = null, intent, linkService }) {\n    const { attributes } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === 'radio') {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case 'class':\n          if (value.length) {\n            html.setAttribute(key, value.join(' '));\n          }\n          break;\n        case 'dataId':\n          break;\n        case 'id':\n          html.setAttribute('data-element-id', value);\n          break;\n        case 'style':\n          Object.assign(html.style, value);\n          break;\n        case 'textContent':\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || (key !== 'href' && key !== 'newWindow')) {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || 'display';\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService,\n      });\n    }\n    const isNotForRichText = intent !== 'richText';\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(',')})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute('class', 'xfaLayer xfaFont');\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs,\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const { name } = child;\n      if (name === '#text') {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns\n        ? document.createElementNS(child.attributes.xmlns, name)\n        : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService,\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\n      '.xfaNonInteractive input, .xfaNonInteractive textarea',\n    )) {\n      el.setAttribute('readOnly', true);\n    }\n    return {\n      textDivs,\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(',')})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n} // CONCATENATED MODULE: ./src/display/annotation_layer.js\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nfunction getRectDims(rect) {\n  return {\n    width: rect[2] - rect[0],\n    height: rect[3] - rect[1],\n  };\n}\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case 'Tx':\n            return new TextWidgetAnnotationElement(parameters);\n          case 'Btn':\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case 'Ch':\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case 'Sig':\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(\n    parameters,\n    { isRenderable = false, ignoreBorder = false, createQuadrilaterals = false } = {},\n  ) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({ titleObj, contentsObj, richText }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0),\n    };\n    const { rect } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: { style },\n      data: { rect: currentRect, rotation },\n      parent: {\n        viewport: {\n          rawDims: { pageWidth, pageHeight, pageX, pageY },\n        },\n      },\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    const { width, height } = getRectDims(rect);\n    style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (pageHeight - rect[3] + pageY)) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${(100 * width) / pageWidth}%`;\n      style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: { page, viewport },\n    } = this;\n    const container = document.createElement('section');\n    container.setAttribute('data-annotation-id', data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const { style } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.popupRef) {\n      container.setAttribute('aria-haspopup', 'dialog');\n    }\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add('norotate');\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const { rotation } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const { width, height } = getRectDims(data.rect);\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = 'solid';\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = 'dashed';\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn('Unimplemented border style: beveled');\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn('Unimplemented border style: inset');\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = 'solid';\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(\n          borderColor[0] | 0,\n          borderColor[1] | 0,\n          borderColor[2] | 0,\n        );\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([\n      data.rect[0],\n      page.view[3] - data.rect[1] + page.view[1],\n      data.rect[2],\n      page.view[3] - data.rect[3] + page.view[1],\n    ]);\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n    style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    style.top = `${(100 * (rect[1] - pageY)) / pageHeight}%`;\n    const { rotation } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${(100 * width) / pageWidth}%`;\n      style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const { pageWidth, pageHeight } = this.parent.viewport.rawDims;\n    const { width, height } = getRectDims(this.data.rect);\n    let elementWidth, elementHeight;\n    if (angle % 180 === 0) {\n      elementWidth = (100 * width) / pageWidth;\n      elementHeight = (100 * height) / pageHeight;\n    } else {\n      elementWidth = (100 * height) / pageWidth;\n      elementHeight = (100 * width) / pageHeight;\n    }\n    container.style.width = `${elementWidth}%`;\n    container.style.height = `${elementHeight}%`;\n    container.setAttribute('data-main-rotation', (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray),\n      });\n    };\n    return shadow(this, '_commonActions', {\n      display: (event) => {\n        const { display } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? 'hidden' : 'visible';\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2,\n        });\n      },\n      print: (event) => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print,\n        });\n      },\n      hidden: (event) => {\n        const { hidden } = event.detail;\n        this.container.style.visibility = hidden ? 'hidden' : 'visible';\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden,\n        });\n      },\n      focus: (event) => {\n        setTimeout(\n          () =>\n            event.target.focus({\n              preventScroll: false,\n            }),\n          0,\n        );\n      },\n      userName: (event) => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: (event) => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: (event) => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: (event) => {\n        setColor('bgColor', 'backgroundColor', event);\n      },\n      fillColor: (event) => {\n        setColor('fillColor', 'backgroundColor', event);\n      },\n      fgColor: (event) => {\n        setColor('fgColor', 'color', event);\n      },\n      textColor: (event) => {\n        setColor('textColor', 'color', event);\n      },\n      borderColor: (event) => {\n        setColor('borderColor', 'borderColor', event);\n      },\n      strokeColor: (event) => {\n        setColor('strokeColor', 'borderColor', event);\n      },\n      rotation: (event) => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle,\n        });\n      },\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail,\n          },\n          target: element,\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const { quadPoints } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect;\n    if (quadPoints.length === 1) {\n      const [, { x: trX, y: trY }, { x: blX, y: blY }] = quadPoints[0];\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const { style } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const { borderColor, borderWidth } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\n        \"url('data:image/svg+xml;utf8,\",\n        `<svg xmlns=\"http://www.w3.org/2000/svg\"`,\n        ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`,\n        `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`,\n      ];\n      this.container.classList.add('hasBorder');\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const { svgFactory } = this;\n    const svg = svgFactory.createElement('svg');\n    svg.classList.add('quadrilateralsContainer');\n    svg.setAttribute('width', 0);\n    svg.setAttribute('height', 0);\n    const defs = svgFactory.createElement('defs');\n    svg.append(defs);\n    const clipPath = svgFactory.createElement('clipPath');\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute('id', id);\n    clipPath.setAttribute('clipPathUnits', 'objectBoundingBox');\n    defs.append(clipPath);\n    for (const [, { x: trX, y: trY }, { x: blX, y: blY }] of quadPoints) {\n      const rect = svgFactory.createElement('rect');\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute('x', x);\n      rect.setAttribute('y', y);\n      rect.setAttribute('width', rectWidth);\n      rect.setAttribute('height', rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(\n        `<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`,\n      );\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join('');\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const { container, data } = this;\n    container.setAttribute('aria-haspopup', 'dialog');\n    const popup = (this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation,\n      },\n      parent: this.parent,\n      elements: [this],\n    }));\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable('Abstract method `AnnotationElement.render` called');\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const { page, id, exportValues } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === 'string' ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement,\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const { exportValue } = domElement;\n      const id = domElement.getAttribute('data-element-id');\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement,\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add('highlightArea');\n      }\n    } else {\n      triggers.classList.add('highlightArea');\n    }\n  }\n  get _isEditable() {\n    return false;\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: { id: editId },\n    } = this;\n    this.container.addEventListener('dblclick', () => {\n      this.linkService.eventBus?.dispatch('switchannotationeditormode', {\n        source: this,\n        mode,\n        editId,\n      });\n    });\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true,\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const { data, linkService } = this;\n    const link = document.createElement('a');\n    link.setAttribute('data-element-id', data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (\n        data.actions &&\n        (data.actions.Action || data.actions['Mouse Up'] || data.actions['Mouse Down']) &&\n        this.enableScripting &&\n        this.hasJSActions\n      ) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, '');\n        isBound = true;\n      }\n    }\n    this.container.classList.add('linkAnnotation');\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute('data-internal-link', '');\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === '') {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl('');\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl('');\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl('');\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl('');\n    const map = new Map([\n      ['Action', 'onclick'],\n      ['Mouse Up', 'onmouseup'],\n      ['Mouse Down', 'onmousedown'],\n    ]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n          source: this,\n          detail: {\n            id: data.id,\n            name,\n          },\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl('');\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(\n        `_bindResetFormAction - \"resetForm\" action not supported, ` +\n          'ensure that the `fieldObjects` parameter is provided.',\n      );\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const { fields: resetFormFields, refs: resetFormRefs, include } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const { id } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const { id } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case 'text': {\n            const value = field.defaultValue || '';\n            storage.setValue(id, {\n              value,\n            });\n            break;\n          }\n          case 'checkbox':\n          case 'radiobutton': {\n            const value = field.defaultValue === field.exportValues;\n            storage.setValue(id, {\n              value,\n            });\n            break;\n          }\n          case 'combobox':\n          case 'listbox': {\n            const value = field.defaultValue || '';\n            storage.setValue(id, {\n              value,\n            });\n            break;\n          }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event('resetform'));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n          source: this,\n          detail: {\n            id: 'app',\n            ids: allIds,\n            name: 'ResetForm',\n          },\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n    });\n  }\n  render() {\n    this.container.classList.add('textAnnotation');\n    const image = document.createElement('img');\n    image.src = this.imageResourcesPath + 'annotation-' + this.data.name.toLowerCase() + '.svg';\n    image.setAttribute('data-l10n-id', 'pdfjs-text-annotation-type');\n    image.setAttribute(\n      'data-l10n-args',\n      JSON.stringify({\n        type: this.data.name,\n      }),\n    );\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === 'CANVAS') {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes('mouse')) {\n      element.addEventListener(baseName, (event) => {\n        this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event),\n          },\n        });\n      });\n    } else {\n      element.addEventListener(baseName, (event) => {\n        if (baseName === 'blur') {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === 'focus') {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n          },\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === 'Action' || this.data.actions?.[eventName]) {\n        if (eventName === 'Focus' || eventName === 'Blur') {\n          elementData ||= {\n            focused: false,\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === 'Focus' && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, 'blur', 'Blur', null);\n        } else if (eventName === 'Blur' && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, 'focus', 'Focus', null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor =\n      color === null ? 'transparent' : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = ['left', 'center', 'right'];\n    const { fontColor } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = (x) => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute('required', true);\n    } else {\n      element.removeAttribute('required');\n    }\n    element.setAttribute('aria-required', isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable =\n      parameters.renderForms ||\n      parameters.data.hasOwnCanvas ||\n      (!parameters.data.hasAppearance && !!parameters.data.fieldValue);\n    super(parameters, {\n      isRenderable,\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value,\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add('textWidgetAnnotation');\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue,\n      });\n      let textContent = storedData.value || '';\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen,\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues =\n        storedData.formattedValue || this.data.textContent?.join('\\n') || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, '');\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false,\n      };\n      if (this.data.multiLine) {\n        element = document.createElement('textarea');\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = 'hidden';\n        }\n      } else {\n        element = document.createElement('input');\n        element.type = 'text';\n        element.setAttribute('value', fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = 'hidden';\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute('data-element-id', id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener('input', (event) => {\n        storage.setValue(id, {\n          value: event.target.value,\n        });\n        this.setPropertyOnSiblings(element, 'value', event.target.value, 'value');\n        elementData.formattedValue = null;\n      });\n      element.addEventListener('resetform', (event) => {\n        const defaultValue = this.data.defaultFieldValue ?? '';\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = (event) => {\n        const { formattedValue } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener('focus', (event) => {\n          if (elementData.focused) {\n            return;\n          }\n          const { target } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener('updatefromsandbox', (jsEvent) => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? '';\n              storage.setValue(id, {\n                value: elementData.userValue.toString(),\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const { formattedValue } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (\n                formattedValue !== null &&\n                formattedValue !== undefined &&\n                event.target !== document.activeElement\n              ) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue,\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: (event) => {\n              const { charLimit } = event.detail;\n              const { target } = event;\n              if (charLimit === 0) {\n                target.removeAttribute('maxLength');\n                return;\n              }\n              target.setAttribute('maxLength', charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value,\n              });\n              this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n                source: this,\n                detail: {\n                  id,\n                  name: 'Keystroke',\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd,\n                },\n              });\n            },\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener('keydown', (event) => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === 'Escape') {\n            commitKey = 0;\n          } else if (event.key === 'Enter' && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === 'Tab') {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const { value } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n            source: this,\n            detail: {\n              id,\n              name: 'Keystroke',\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd,\n            },\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener('blur', (event) => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const { value } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n              source: this,\n              detail: {\n                id,\n                name: 'Keystroke',\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd,\n              },\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener('beforeinput', (event) => {\n            elementData.lastCommittedValue = null;\n            const { data, target } = event;\n            const { value, selectionStart, selectionEnd } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case 'deleteWordBackward': {\n                const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                if (match) {\n                  selStart -= match[0].length;\n                }\n                break;\n              }\n              case 'deleteWordForward': {\n                const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                if (match) {\n                  selEnd += match[0].length;\n                }\n                break;\n              }\n              case 'deleteContentBackward':\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case 'deleteContentForward':\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n              source: this,\n              detail: {\n                id,\n                name: 'Keystroke',\n                value,\n                change: data || '',\n                willCommit: false,\n                selStart,\n                selEnd,\n              },\n            });\n          });\n        }\n        this._setEventListeners(\n          element,\n          elementData,\n          [\n            ['focus', 'Focus'],\n            ['blur', 'Blur'],\n            ['mousedown', 'Mouse Down'],\n            ['mouseenter', 'Mouse Enter'],\n            ['mouseleave', 'Mouse Exit'],\n            ['mouseup', 'Mouse Up'],\n          ],\n          (event) => event.target.value,\n        );\n      }\n      if (blurListener) {\n        element.addEventListener('blur', blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add('comb');\n        element.style.letterSpacing = `calc(${combWidth}px * var(--scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement('div');\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = 'middle';\n      element.style.display = 'table-cell';\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas,\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms,\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue,\n    }).value;\n    if (typeof value === 'string') {\n      value = value !== 'Off';\n      storage.setValue(id, {\n        value,\n      });\n    }\n    this.container.classList.add('buttonWidgetAnnotation', 'checkBox');\n    const element = document.createElement('input');\n    GetElementsByNameSet.add(element);\n    element.setAttribute('data-element-id', id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = 'checkbox';\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute('checked', true);\n    }\n    element.setAttribute('exportValue', data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener('change', (event) => {\n      const { name, checked } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked,\n        });\n      }\n      storage.setValue(id, {\n        value: checked,\n      });\n    });\n    element.addEventListener('resetform', (event) => {\n      const defaultValue = data.defaultFieldValue || 'Off';\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener('updatefromsandbox', (jsEvent) => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== 'Off';\n            storage.setValue(id, {\n              value: event.target.checked,\n            });\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(\n        element,\n        null,\n        [\n          ['change', 'Validate'],\n          ['change', 'Action'],\n          ['focus', 'Focus'],\n          ['blur', 'Blur'],\n          ['mousedown', 'Mouse Down'],\n          ['mouseenter', 'Mouse Enter'],\n          ['mouseleave', 'Mouse Exit'],\n          ['mouseup', 'Mouse Up'],\n        ],\n        (event) => event.target.checked,\n      );\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms,\n    });\n  }\n  render() {\n    this.container.classList.add('buttonWidgetAnnotation', 'radioButton');\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue,\n    }).value;\n    if (typeof value === 'string') {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value,\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false,\n        });\n      }\n    }\n    const element = document.createElement('input');\n    GetElementsByNameSet.add(element);\n    element.setAttribute('data-element-id', id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = 'radio';\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute('checked', true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener('change', (event) => {\n      const { name, checked } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false,\n        });\n      }\n      storage.setValue(id, {\n        value: checked,\n      });\n    });\n    element.addEventListener('resetform', (event) => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked =\n        defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener('updatefromsandbox', (jsEvent) => {\n        const actions = {\n          value: (event) => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked,\n              });\n            }\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(\n        element,\n        null,\n        [\n          ['change', 'Validate'],\n          ['change', 'Action'],\n          ['focus', 'Focus'],\n          ['blur', 'Blur'],\n          ['mousedown', 'Mouse Down'],\n          ['mouseenter', 'Mouse Enter'],\n          ['mouseleave', 'Mouse Exit'],\n          ['mouseup', 'Mouse Up'],\n        ],\n        (event) => event.target.checked,\n      );\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance,\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add('buttonWidgetAnnotation', 'pushButton');\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener('updatefromsandbox', (jsEvent) => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms,\n    });\n  }\n  render() {\n    this.container.classList.add('choiceWidgetAnnotation');\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue,\n    });\n    const selectElement = document.createElement('select');\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute('data-element-id', id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener('resetform', (event) => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement('option');\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute('selected', true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement('option');\n      noneOptionElement.value = ' ';\n      noneOptionElement.setAttribute('hidden', true);\n      noneOptionElement.setAttribute('selected', true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener('input', removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener('input', removeEmptyEntry);\n    }\n    const getValue = (isExport) => {\n      const name = isExport ? 'value' : 'textContent';\n      const { options, multiple } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter\n        .call(options, (option) => option.selected)\n        .map((option) => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = (event) => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, (option) => ({\n        displayValue: option.textContent,\n        exportValue: option.value,\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener('updatefromsandbox', (jsEvent) => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, (option) => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: [],\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const { index, displayValue, exportValue } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement('option');\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const { items } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const { displayValue, exportValue } = item;\n              const optionElement = document.createElement('option');\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener('input', (event) => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue,\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch('dispatcheventinsandbox', {\n          source: this,\n          detail: {\n            id,\n            name: 'Keystroke',\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false,\n          },\n        });\n      });\n      this._setEventListeners(\n        selectElement,\n        null,\n        [\n          ['focus', 'Focus'],\n          ['blur', 'Blur'],\n          ['mousedown', 'Mouse Down'],\n          ['mouseenter', 'Mouse Enter'],\n          ['mouseleave', 'Mouse Exit'],\n          ['mouseup', 'Mouse Up'],\n          ['input', 'Action'],\n          ['input', 'Validate'],\n        ],\n        (event) => event.target.value,\n      );\n    } else {\n      selectElement.addEventListener('input', function (event) {\n        storage.setValue(id, {\n          value: getValue(true),\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {\n    }\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const { data, elements } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data),\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    this.container.classList.add('popupAnnotation');\n    const popup = (this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open,\n    }));\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\n      'aria-controls',\n      elementIds.map((id) => `${AnnotationPrefix}${id}`).join(','),\n    );\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open,\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap((e) => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener('click', this.#boundToggle);\n      element.addEventListener('mouseenter', this.#boundShow);\n      element.addEventListener('mouseleave', this.#boundHide);\n      element.classList.add('popupTriggerArea');\n    }\n    for (const element of elements) {\n      element.container?.addEventListener('keydown', this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = (this.#popup = document.createElement('div'));\n    popup.className = 'popup';\n    if (this.#color) {\n      const baseColor = (popup.style.outlineColor = Util.makeHexColor(...this.#color));\n      if (CSS.supports('background-color', 'color-mix(in srgb, red 30%, white)')) {\n        popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n      } else {\n        const BACKGROUND_ENLIGHT = 0.7;\n        popup.style.backgroundColor = Util.makeHexColor(\n          ...this.#color.map((c) => Math.floor(BACKGROUND_ENLIGHT * (255 - c) + c)),\n        );\n      }\n    }\n    const header = document.createElement('span');\n    header.className = 'header';\n    const title = document.createElement('h1');\n    header.append(title);\n    ({ dir: title.dir, str: title.textContent } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement('span');\n      modificationDate.classList.add('popupDate');\n      modificationDate.setAttribute('data-l10n-id', 'pdfjs-annotation-date-string');\n      modificationDate.setAttribute(\n        'data-l10n-args',\n        JSON.stringify({\n          date: this.#dateObj.toLocaleDateString(),\n          time: this.#dateObj.toLocaleTimeString(),\n        }),\n      );\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: 'richText',\n        div: popup,\n      });\n      popup.lastChild.classList.add('richText', 'popupContent');\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: 'div',\n        attributes: {\n          dir: 'auto',\n        },\n        children: [\n          {\n            name: 'p',\n            children: popupLines,\n          },\n        ],\n      },\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--scale-factor))` : '',\n      },\n    };\n    for (const line of text.split('\\n')) {\n      popupLines.push({\n        name: 'span',\n        value: line,\n        attributes: lineAttributes,\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({ str, dir }) {\n    const p = document.createElement('p');\n    p.classList.add('popupContent');\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement('br'));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === 'Enter' || (event.key === 'Escape' && this.#pinned)) {\n      this.#toggle();\n    }\n  }\n  updateEdited({ rect, popupContent }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText,\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({ contentsObj: this.#contentsObj, richText: this.#richText } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: { view },\n      viewport: {\n        rawDims: { pageWidth, pageHeight, pageX, pageY },\n      },\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([\n      rect[0],\n      view[3] - rect[1] + view[1],\n      rect[2],\n      view[3] - rect[3] + view[1],\n    ]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [\n      (100 * (popupLeft - pageX)) / pageWidth,\n      (100 * (popupTop - pageY)) / pageHeight,\n    ];\n    const { style } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener('click', this.#boundToggle);\n      this.#container.addEventListener('keydown', this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener('click', this.#boundToggle);\n      this.#container.removeEventListener('keydown', this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add('focused');\n    }\n  }\n  #hide() {\n    this.#container.classList.remove('focused');\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add('freeTextAnnotation');\n    if (this.textContent) {\n      const content = document.createElement('div');\n      content.classList.add('annotationTextContent');\n      content.setAttribute('role', 'comment');\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement('span');\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  get _isEditable() {\n    return this.data.hasOwnCanvas;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n  }\n  render() {\n    this.container.classList.add('lineAnnotation');\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const line = (this.#line = this.svgFactory.createElement('svg:line'));\n    line.setAttribute('x1', data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute('y1', data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute('x2', data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute('y2', data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute('stroke-width', data.borderStyle.width || 1);\n    line.setAttribute('stroke', 'transparent');\n    line.setAttribute('fill', 'transparent');\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n  }\n  render() {\n    this.container.classList.add('squareAnnotation');\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = (this.#square = this.svgFactory.createElement('svg:rect'));\n    square.setAttribute('x', borderWidth / 2);\n    square.setAttribute('y', borderWidth / 2);\n    square.setAttribute('width', width - borderWidth);\n    square.setAttribute('height', height - borderWidth);\n    square.setAttribute('stroke-width', borderWidth || 1);\n    square.setAttribute('stroke', 'transparent');\n    square.setAttribute('fill', 'transparent');\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n  }\n  render() {\n    this.container.classList.add('circleAnnotation');\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = (this.#circle = this.svgFactory.createElement('svg:ellipse'));\n    circle.setAttribute('cx', width / 2);\n    circle.setAttribute('cy', height / 2);\n    circle.setAttribute('rx', width / 2 - borderWidth / 2);\n    circle.setAttribute('ry', height / 2 - borderWidth / 2);\n    circle.setAttribute('stroke-width', borderWidth || 1);\n    circle.setAttribute('stroke', 'transparent');\n    circle.setAttribute('fill', 'transparent');\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n    this.containerClassName = 'polylineAnnotation';\n    this.svgElementName = 'svg:polyline';\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (const coordinate of data.vertices) {\n      const x = coordinate.x - data.rect[0];\n      const y = data.rect[3] - coordinate.y;\n      points.push(x + ',' + y);\n    }\n    points = points.join(' ');\n    const polyline = (this.#polyline = this.svgFactory.createElement(this.svgElementName));\n    polyline.setAttribute('points', points);\n    polyline.setAttribute('stroke-width', data.borderStyle.width || 1);\n    polyline.setAttribute('stroke', 'transparent');\n    polyline.setAttribute('fill', 'transparent');\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = 'polygonAnnotation';\n    this.svgElementName = 'svg:polygon';\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n  }\n  render() {\n    this.container.classList.add('caretAnnotation');\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n    this.containerClassName = 'inkAnnotation';\n    this.svgElementName = 'svg:polyline';\n    this.annotationEditorType = AnnotationEditorType.INK;\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    for (const inkList of data.inkLists) {\n      let points = [];\n      for (const coordinate of inkList) {\n        const x = coordinate.x - data.rect[0];\n        const y = data.rect[3] - coordinate.y;\n        points.push(`${x},${y}`);\n      }\n      points = points.join(' ');\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute('points', points);\n      polyline.setAttribute('stroke-width', data.borderStyle.width || 1);\n      polyline.setAttribute('stroke', 'transparent');\n      polyline.setAttribute('fill', 'transparent');\n      if (!data.popupRef && this.hasPopupData) {\n        this._createPopup();\n      }\n      svg.append(polyline);\n    }\n    this.container.append(svg);\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add('highlightAnnotation');\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add('underlineAnnotation');\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add('squigglyAnnotation');\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add('strikeoutAnnotation');\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n    });\n  }\n  render() {\n    this.container.classList.add('stampAnnotation');\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n    });\n    const { file } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch('fileattachmentannotation', {\n      source: this,\n      ...file,\n    });\n  }\n  render() {\n    this.container.classList.add('fileAttachmentAnnotation');\n    const { container, data } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement('div');\n    } else {\n      trigger = document.createElement('img');\n      trigger.src = `${this.imageResourcesPath}annotation-${\n        /paperclip/i.test(data.name) ? 'paperclip' : 'pushpin'\n      }.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener('dblclick', this.#download.bind(this));\n    this.#trigger = trigger;\n    const { isMac } = util_FeatureTest.platform;\n    container.addEventListener('keydown', (evt) => {\n      if (evt.key === 'Enter' && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add('popupTriggerArea');\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add('highlightArea');\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    contentElement.id = `${AnnotationPrefix}${id}`;\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const { annotations } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || '',\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null,\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        const { width, height } = getRectDims(data.rect);\n        if (width <= 0 || height <= 0) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = 'hidden';\n      }\n      this.#appendElement(rendered, data.id);\n      if (element.annotationEditorType > 0) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  update({ viewport }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation,\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = 'annotationContent';\n      const { firstChild } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === 'CANVAS') {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains('annotationContent')) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n} // CONCATENATED MODULE: ./src/display/editor/freetext.js\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #boundEditorDivBlur = this.editorDivBlur.bind(this);\n  #boundEditorDivFocus = this.editorDivFocus.bind(this);\n  #boundEditorDivInput = this.editorDivInput.bind(this);\n  #boundEditorDivKeydown = this.editorDivKeydown.bind(this);\n  #boundEditorDivPaste = this.editorDivPaste.bind(this);\n  #color;\n  #content = '';\n  #editorDivId = `${this.id}-editor`;\n  #fontSize;\n  #initialData = null;\n  static _freeTextDefaultContent = '';\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = (self) => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(\n      this,\n      '_keyboardManager',\n      new KeyboardManager([\n        [\n          ['ctrl+s', 'mac+meta+s', 'ctrl+p', 'mac+meta+p'],\n          proto.commitOrRemove,\n          {\n            bubbles: true,\n          },\n        ],\n        [['ctrl+Enter', 'mac+meta+Enter', 'Escape', 'mac+Escape'], proto.commitOrRemove],\n        [\n          ['ArrowLeft', 'mac+ArrowLeft'],\n          proto._translateEmpty,\n          {\n            args: [-small, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowLeft', 'mac+shift+ArrowLeft'],\n          proto._translateEmpty,\n          {\n            args: [-big, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowRight', 'mac+ArrowRight'],\n          proto._translateEmpty,\n          {\n            args: [small, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowRight', 'mac+shift+ArrowRight'],\n          proto._translateEmpty,\n          {\n            args: [big, 0],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowUp', 'mac+ArrowUp'],\n          proto._translateEmpty,\n          {\n            args: [0, -small],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowUp', 'mac+shift+ArrowUp'],\n          proto._translateEmpty,\n          {\n            args: [0, -big],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ArrowDown', 'mac+ArrowDown'],\n          proto._translateEmpty,\n          {\n            args: [0, small],\n            checker: arrowChecker,\n          },\n        ],\n        [\n          ['ctrl+ArrowDown', 'mac+shift+ArrowDown'],\n          proto._translateEmpty,\n          {\n            args: [0, big],\n            checker: arrowChecker,\n          },\n        ],\n      ]),\n    );\n  }\n  static _type = 'freetext';\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: 'freeTextEditor',\n    });\n    this.#color =\n      params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager, {\n      strings: ['pdfjs-free-text-default-content'],\n    });\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue('--freetext-padding'));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize],\n      [\n        AnnotationEditorParamsType.FREETEXT_COLOR,\n        FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n    ];\n  }\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize],\n      [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color],\n    ];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = (size) => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n  #updateColor(color) {\n    const setColor = (col) => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [\n      -FreeTextEditor._internalPadding * scale,\n      -(FreeTextEditor._internalPadding + this.#fontSize) * scale,\n    ];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(false);\n    this.parent.updateToolbar(AnnotationEditorType.FREETEXT);\n    super.enableEditMode();\n    this.overlayDiv.classList.remove('enabled');\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute('aria-activedescendant');\n    this.editorDiv.addEventListener('keydown', this.#boundEditorDivKeydown);\n    this.editorDiv.addEventListener('focus', this.#boundEditorDivFocus);\n    this.editorDiv.addEventListener('blur', this.#boundEditorDivBlur);\n    this.editorDiv.addEventListener('input', this.#boundEditorDivInput);\n    this.editorDiv.addEventListener('paste', this.#boundEditorDivPaste);\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(true);\n    super.disableEditMode();\n    this.overlayDiv.classList.add('enabled');\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute('aria-activedescendant', this.#editorDivId);\n    this._isDraggable = true;\n    this.editorDiv.removeEventListener('keydown', this.#boundEditorDivKeydown);\n    this.editorDiv.removeEventListener('focus', this.#boundEditorDivFocus);\n    this.editorDiv.removeEventListener('blur', this.#boundEditorDivBlur);\n    this.editorDiv.removeEventListener('input', this.#boundEditorDivInput);\n    this.editorDiv.removeEventListener('paste', this.#boundEditorDivPaste);\n    this.div.focus({\n      preventScroll: true,\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add('freetextEditing');\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded() {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    this.editorDiv.focus();\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === '';\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add('freetextEditing');\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    for (const child of this.editorDiv.childNodes) {\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n    }\n    return buffer.join('\\n');\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const { currentLayer, div } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains('hidden');\n      div.classList.remove('hidden');\n      div.style.display = 'hidden';\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle('hidden', savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = (this.#content = this.#extractText().trimEnd());\n    if (savedText === newText) {\n      return;\n    }\n    const setText = (text) => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false,\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === 'Enter') {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle('freetextEditing', this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute('role', 'comment');\n    this.editorDiv.removeAttribute('aria-multiline');\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute('role', 'textbox');\n    this.editorDiv.setAttribute('aria-multiline', true);\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement('div');\n    this.editorDiv.className = 'internal';\n    this.editorDiv.setAttribute('id', this.#editorDivId);\n    this.editorDiv.setAttribute('data-l10n-id', 'pdfjs-free-text');\n    this.enableEditing();\n    AnnotationEditor._l10nPromise\n      .get('pdfjs-free-text-default-content')\n      .then((msg) => this.editorDiv?.setAttribute('default-content', msg));\n    this.editorDiv.contentEditable = true;\n    const { style } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement('div');\n    this.overlayDiv.classList.add('overlay', 'enabled');\n    this.div.append(this.overlayDiv);\n    bindEvents(this, this.div, ['dblclick', 'keydown']);\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const { position } = this.#initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this.setAt(\n          baseX * parentWidth,\n          baseY * parentHeight,\n          this.width * parentWidth,\n          this.height * parentHeight,\n        );\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(\n      EOL_PATTERN,\n      '',\n    );\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const { types } = clipboardData;\n    if (types.length === 1 && types[0] === 'text/plain') {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(\n      clipboardData.getData('text') || '',\n    ).replaceAll(EOL_PATTERN, '\\n');\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes('\\n')) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const { startContainer, startOffset } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, ''));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, ''));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join('\\n')}${paste}${bufferAfter.join('\\n')}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = bufferBefore.reduce((acc, line) => acc + line.length, 0);\n    for (const { firstChild } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split('\\n')) {\n      const div = document.createElement('div');\n      div.append(line ? document.createTextNode(line) : document.createElement('br'));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll('\\xa0', ' ');\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(' ', '\\xa0');\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: { fontSize, fontColor },\n          rect,\n          rotation,\n          id,\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: { pageNumber },\n        },\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join('\\n'),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n      };\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor.#initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return {\n        pageIndex: this.pageIndex,\n        id: this.annotationElementId,\n        deleted: true,\n      };\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(\n      this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color,\n    );\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n    if (isForCopying) {\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const { value, fontSize, color, pageIndex } = this.#initialData;\n    return (\n      this._hasBeenMoved ||\n      serialized.value !== value ||\n      serialized.fontSize !== fontSize ||\n      serialized.color.some((c, i) => c !== color[i]) ||\n      serialized.pageIndex !== pageIndex\n    );\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const { style } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split('\\n')) {\n      const div = document.createElement('div');\n      div.append(line ? document.createTextNode(line) : document.createElement('br'));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content,\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n} // CONCATENATED MODULE: ./src/display/editor/outliner.js\n\nclass Outliner {\n  #box;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const { x, y, width, height } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      minX = Math.min(minX, x1);\n      maxX = Math.max(maxX, x2);\n      minY = Math.min(minY, y1);\n      maxY = Math.max(maxY, y2);\n    }\n    const bboxWidth = maxX - minX + 2 * innerMargin;\n    const bboxHeight = maxY - minY + 2 * innerMargin;\n    const shiftedMinX = minX - innerMargin;\n    const shiftedMinY = minY - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = {\n      x: shiftedMinX,\n      y: shiftedMinY,\n      width: bboxWidth,\n      height: bboxHeight,\n      lastPoint,\n    };\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = (start + end) >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass Outline {\n  toSVGPath() {\n    throw new Error('Abstract method `toSVGPath` must be implemented.');\n  }\n  get box() {\n    throw new Error('Abstract getter `box` must be implemented.');\n  }\n  serialize(_bbox, _rotation) {\n    throw new Error('Abstract method `serialize` must be implemented.');\n  }\n  get free() {\n    return this instanceof FreeHighlightOutline;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push('Z');\n    }\n    return buffer.join(' ');\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n}\nclass FreeOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float64Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeOutliner.#MIN_DIST + FreeOutliner.#MIN_DIFF;\n  constructor({ x, y }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  get free() {\n    return true;\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [\n      (this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width,\n      (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height,\n      (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width,\n      (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height,\n    ];\n  }\n  add({ x, y }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (x1 + thX - layerX) / layerWidth,\n          (y1 + thY - layerY) / layerHeight,\n        );\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (x1 - thX - layerX) / layerWidth,\n          (y1 - thY - layerY) / layerHeight,\n        );\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        ((x1 + x2) / 2 - layerX) / layerWidth,\n        ((y1 + y2) / 2 - layerY) / layerHeight,\n      );\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        ((x0 + x1) / 2 - layerX) / layerWidth,\n        ((y0 + y1) / 2 - layerY) / layerHeight,\n      );\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(\n      ((x0 + 5 * x1) / 6 - layerX) / layerWidth,\n      ((y0 + 5 * y1) / 6 - layerY) / layerHeight,\n      ((5 * x1 + x2) / 6 - layerX) / layerWidth,\n      ((5 * y1 + y2) / 6 - layerY) / layerHeight,\n      ((x1 + x2) / 2 - layerX) / layerWidth,\n      ((y1 + y2) / 2 - layerY) / layerHeight,\n    );\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(\n      ((x0 + 5 * x1) / 6 - layerX) / layerWidth,\n      ((y0 + 5 * y1) / 6 - layerY) / layerHeight,\n      ((5 * x1 + x2) / 6 - layerX) / layerWidth,\n      ((5 * y1 + y2) / 6 - layerY) / layerHeight,\n      ((x1 + x2) / 2 - layerX) / layerWidth,\n      ((y1 + y2) / 2 - layerY) / layerHeight,\n    );\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return '';\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${\n        (this.#last[4] - x) / width\n      } ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${\n        (this.#last[16] - x) / width\n      } ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${\n        (this.#last[15] - y) / height\n      } Z`;\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(\n          `C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`,\n        );\n      }\n    }\n    buffer.push(\n      `L${(lastTop[0] - x) / width} ${\n        (lastTop[1] - y) / height\n      } L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${\n        (lastBottom[1] - y) / height\n      }`,\n    );\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(\n          `C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${\n            bottom[i + 5]\n          }`,\n        );\n      }\n    }\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n    return buffer.join(' ');\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const lastTop = last.subarray(4, 6);\n    const lastBottom = last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float64Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      const outline = new Float64Array(36);\n      outline.set(\n        [\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[2] - layerX) / layerWidth,\n          (last[3] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[4] - layerX) / layerWidth,\n          (last[5] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          lastTopX,\n          lastTopY,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          lastBottomX,\n          lastBottomY,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[16] - layerX) / layerWidth,\n          (last[17] - layerY) / layerHeight,\n          NaN,\n          NaN,\n          NaN,\n          NaN,\n          (last[14] - layerX) / layerWidth,\n          (last[15] - layerY) / layerHeight,\n        ],\n        0,\n      );\n      return new FreeHighlightOutline(\n        outline,\n        points,\n        this.#box,\n        this.#scaleFactor,\n        this.#innerMargin,\n        this.#isLTR,\n      );\n    }\n    const outline = new Float64Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    outline.set(\n      [\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (lastTop[0] - layerX) / layerWidth,\n        (lastTop[1] - layerY) / layerHeight,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastTopX,\n        lastTopY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        lastBottomX,\n        lastBottomY,\n        NaN,\n        NaN,\n        NaN,\n        NaN,\n        (lastBottom[0] - layerX) / layerWidth,\n        (lastBottom[1] - layerY) / layerHeight,\n      ],\n      N,\n    );\n    N += 24;\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], N);\n    return new FreeHighlightOutline(\n      outline,\n      points,\n      this.#box,\n      this.#scaleFactor,\n      this.#innerMargin,\n      this.#isLTR,\n    );\n  }\n}\nclass FreeHighlightOutline extends Outline {\n  #box;\n  #bbox = null;\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.#computeMinMax(isLTR);\n    const { x, y, width, height } = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(\n        `C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${\n          this.#outline[i + 3]\n        } ${this.#outline[i + 4]} ${this.#outline[i + 5]}`,\n      );\n    }\n    buffer.push('Z');\n    return buffer.join(' ');\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = this.#rescale(this.#outline, blX, trY, width, -height);\n        points = this.#rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = this.#rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = this.#rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = this.#rescale(this.#outline, trX, blY, -width, height);\n        points = this.#rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = this.#rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = this.#rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)],\n    };\n  }\n  #rescale(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  #rescaleAndSwap(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    let minX = lastX;\n    let minY = lastY;\n    let maxX = lastX;\n    let maxY = lastY;\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      if (isNaN(outline[i])) {\n        minX = Math.min(minX, outline[i + 4]);\n        minY = Math.min(minY, outline[i + 5]);\n        maxX = Math.max(maxX, outline[i + 4]);\n        maxY = Math.max(maxY, outline[i + 5]);\n        if (lastPointY < outline[i + 5]) {\n          lastPointX = outline[i + 4];\n          lastPointY = outline[i + 5];\n        } else if (lastPointY === outline[i + 5]) {\n          lastPointX = ltrCallback(lastPointX, outline[i + 4]);\n        }\n      } else {\n        const bbox = Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6));\n        minX = Math.min(minX, bbox[0]);\n        minY = Math.min(minY, bbox[1]);\n        maxX = Math.max(maxX, bbox[2]);\n        maxY = Math.max(maxY, bbox[3]);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = outline[i + 4];\n      lastY = outline[i + 5];\n    }\n    const x = minX - this.#innerMargin,\n      y = minY - this.#innerMargin,\n      width = maxX - minX + 2 * this.#innerMargin,\n      height = maxY - minY + 2 * this.#innerMargin;\n    this.#bbox = {\n      x,\n      y,\n      width,\n      height,\n      lastPoint: [lastPointX, lastPointY],\n    };\n  }\n  get box() {\n    return this.#bbox;\n  }\n  getNewOutline(thickness, innerMargin) {\n    const { x, y, width, height } = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = new FreeOutliner(\n      {\n        x: this.#points[0] * sx + tx,\n        y: this.#points[1] * sy + ty,\n      },\n      this.#box,\n      this.#scaleFactor,\n      thickness,\n      this.#isLTR,\n      innerMargin ?? this.#innerMargin,\n    );\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty,\n      });\n    }\n    return outliner.getOutlines();\n  }\n} // CONCATENATED MODULE: ./src/display/editor/color_picker.js\n\nclass ColorPicker {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundPointerDown = this.#pointerDown.bind(this);\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #uiManager = null;\n  #type;\n  static get _keyboardManager() {\n    return shadow(\n      this,\n      '_keyboardManager',\n      new KeyboardManager([\n        [['Escape', 'mac+Escape'], ColorPicker.prototype._hideDropdownFromKeyboard],\n        [[' ', 'mac+ '], ColorPicker.prototype._colorSelectFromKeyboard],\n        [\n          ['ArrowDown', 'ArrowRight', 'mac+ArrowDown', 'mac+ArrowRight'],\n          ColorPicker.prototype._moveToNext,\n        ],\n        [\n          ['ArrowUp', 'ArrowLeft', 'mac+ArrowUp', 'mac+ArrowLeft'],\n          ColorPicker.prototype._moveToPrevious,\n        ],\n        [['Home', 'mac+Home'], ColorPicker.prototype._moveToBeginning],\n        [['End', 'mac+End'], ColorPicker.prototype._moveToEnd],\n      ]),\n    );\n  }\n  constructor({ editor = null, uiManager = null }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor =\n      editor?.color || this.#uiManager?.highlightColors.values().next().value || '#FFFF98';\n  }\n  renderButton() {\n    const button = (this.#button = document.createElement('button'));\n    button.className = 'colorPicker';\n    button.tabIndex = '0';\n    button.setAttribute('data-l10n-id', 'pdfjs-editor-colorpicker-button');\n    button.setAttribute('aria-haspopup', true);\n    button.addEventListener('click', this.#openDropdown.bind(this));\n    button.addEventListener('keydown', this.#boundKeyDown);\n    const swatch = (this.#buttonSwatch = document.createElement('span'));\n    swatch.className = 'swatch';\n    swatch.setAttribute('aria-hidden', true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = (this.#dropdown = this.#getDropdownRoot());\n    dropdown.setAttribute('aria-orientation', 'horizontal');\n    dropdown.setAttribute('aria-labelledby', 'highlightColorPickerLabel');\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement('div');\n    div.addEventListener('contextmenu', noContextMenu);\n    div.className = 'dropdown';\n    div.role = 'listbox';\n    div.setAttribute('aria-multiselectable', false);\n    div.setAttribute('aria-orientation', 'vertical');\n    div.setAttribute('data-l10n-id', 'pdfjs-editor-colorpicker-dropdown');\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement('button');\n      button.tabIndex = '0';\n      button.role = 'option';\n      button.setAttribute('data-color', color);\n      button.title = name;\n      button.setAttribute('data-l10n-id', `pdfjs-editor-colorpicker-${name}`);\n      const swatch = document.createElement('span');\n      button.append(swatch);\n      swatch.className = 'swatch';\n      swatch.style.backgroundColor = color;\n      button.setAttribute('aria-selected', color === this.#defaultColor);\n      button.addEventListener('click', this.#colorSelect.bind(this, color));\n      div.append(button);\n    }\n    div.addEventListener('keydown', this.#boundKeyDown);\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch('switchannotationeditorparams', {\n      source: this,\n      type: this.#type,\n      value: color,\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute('data-color');\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    window.addEventListener('pointerdown', this.#boundPointerDown);\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove('hidden');\n      return;\n    }\n    const root = (this.#dropdown = this.#getDropdownRoot());\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add('hidden');\n    window.removeEventListener('pointerdown', this.#boundPointerDown);\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains('hidden');\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard,\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute('aria-selected', i.next().value === color);\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n} // CONCATENATED MODULE: ./src/display/editor/highlight.js\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #boundKeydown = this.#keydown.bind(this);\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = '';\n  #thickness;\n  #methodOfCreation = '';\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _l10nPromise;\n  static _type = 'highlight';\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = '';\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(\n      this,\n      '_keyboardManager',\n      new KeyboardManager([\n        [\n          ['ArrowLeft', 'mac+ArrowLeft'],\n          proto._moveCaret,\n          {\n            args: [0],\n          },\n        ],\n        [\n          ['ArrowRight', 'mac+ArrowRight'],\n          proto._moveCaret,\n          {\n            args: [1],\n          },\n        ],\n        [\n          ['ArrowUp', 'mac+ArrowUp'],\n          proto._moveCaret,\n          {\n            args: [2],\n          },\n        ],\n        [\n          ['ArrowDown', 'mac+ArrowDown'],\n          proto._moveCaret,\n          {\n            args: [3],\n          },\n        ],\n      ]),\n    );\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: 'highlightEditor',\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || '';\n    this.#text = params.text || '';\n    this._isDraggable = false;\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: 'added',\n      type: this.#isFreeHighlight ? 'free_highlight' : 'highlight',\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation,\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: 'highlight',\n      color: this._uiManager.highlightColorNames.get(this.color),\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get('color').size,\n    };\n  }\n  #createOutlines() {\n    const outliner = new Outliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    ({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n    } = this.#highlightOutlines.box);\n    const outlinerForOutline = new Outliner(\n      this.#boxes,\n      0.0025,\n      0.001,\n      this._uiManager.direction === 'ltr',\n    );\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const { lastPoint } = this.#focusOutlines.box;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({ highlightOutlines, highlightId, clipPathId }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(\n      this.#thickness / 2 + extraThickness,\n      0.0025,\n    );\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeLine(highlightId, highlightOutlines);\n      this.#outlineId = this.parent.drawLayer.highlightOutline(this.#focusOutlines);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateLine(this.#id, highlightOutlines);\n      this.parent.drawLayer.updateBox(\n        this.#id,\n        HighlightEditor.#rotateBbox(\n          this.#highlightOutlines.box,\n          (angle - this.rotation + 360) % 360,\n        ),\n      );\n      this.parent.drawLayer.updateLine(this.#outlineId, this.#focusOutlines);\n      this.parent.drawLayer.updateBox(\n        this.#outlineId,\n        HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      );\n    }\n    const { x, y, width, height } = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90: {\n        const [pageWidth, pageHeight] = this.parentDimensions;\n        this.x = y;\n        this.y = 1 - x;\n        this.width = (width * pageHeight) / pageWidth;\n        this.height = (height * pageWidth) / pageHeight;\n        break;\n      }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270: {\n        const [pageWidth, pageHeight] = this.parentDimensions;\n        this.x = 1 - y;\n        this.y = x;\n        this.width = (width * pageHeight) / pageWidth;\n        this.height = (height * pageWidth) / pageHeight;\n        break;\n      }\n    }\n    const { lastPoint } = this.#focusOutlines.box;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || '#fff066';\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor],\n      [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness],\n    ];\n  }\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor],\n      [\n        AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,\n        this.#thickness || HighlightEditor._defaultThickness,\n      ],\n      [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight],\n    ];\n  }\n  #updateColor(color) {\n    const setColor = (col) => {\n      this.color = col;\n      this.parent?.drawLayer.changeColor(this.#id, col);\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n    this._reportTelemetry(\n      {\n        action: 'color_changed',\n        color: this._uiManager.highlightColorNames.get(color),\n      },\n      true,\n    );\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = (th) => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n    this._reportTelemetry(\n      {\n        action: 'thickness_changed',\n        thickness,\n      },\n      true,\n    );\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({\n        editor: this,\n      });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle('disabled', true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle('disabled', false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded() {\n    this.parent.addUndoableEditor(this);\n    this.div.focus();\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: 'deleted',\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains('selectedEditor');\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2),\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({ id: this.#id, clipPathId: this.#clipPathId } = parent.drawLayer.highlight(\n      this.#highlightOutlines,\n      this.color,\n      this.#opacity,\n    ));\n    this.#outlineId = parent.drawLayer.highlightOutline(this.#focusOutlines);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox({ x, y, width, height }, angle) {\n    switch (angle) {\n      case 90:\n        return {\n          x: 1 - y - height,\n          y: x,\n          width: height,\n          height: width,\n        };\n      case 180:\n        return {\n          x: 1 - x - width,\n          y: 1 - y - height,\n          width,\n          height,\n        };\n      case 270:\n        return {\n          x: y,\n          y: 1 - x - width,\n          width: height,\n          height: width,\n        };\n    }\n    return {\n      x,\n      y,\n      width,\n      height,\n    };\n  }\n  rotate(angle) {\n    const { drawLayer } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox(this, angle);\n    }\n    drawLayer.rotate(this.#id, angle);\n    drawLayer.rotate(this.#outlineId, angle);\n    drawLayer.updateBox(this.#id, box);\n    drawLayer.updateBox(\n      this.#outlineId,\n      HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n    );\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute('aria-label', this.#text);\n      div.setAttribute('role', 'mark');\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add('free');\n    } else {\n      this.div.addEventListener('keydown', this.#boundKeydown);\n    }\n    const highlightDiv = (this.#highlightDiv = document.createElement('div'));\n    div.append(highlightDiv);\n    highlightDiv.setAttribute('aria-hidden', 'true');\n    highlightDiv.className = 'internal';\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, ['pointerover', 'pointerleave']);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    this.parent.drawLayer.addClass(this.#outlineId, 'hovered');\n  }\n  pointerleave() {\n    this.parent.drawLayer.removeClass(this.#outlineId, 'hovered');\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, 'hovered');\n    this.parent?.drawLayer.addClass(this.#outlineId, 'selected');\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, 'selected');\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.show(this.#id, visible);\n      this.parent.drawLayer.show(this.#outlineId, visible);\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const boxes = this.#boxes;\n    const quadPoints = new Array(boxes.length * 8);\n    let i = 0;\n    for (const { x, y, width, height } of boxes) {\n      const sx = x * pageWidth;\n      const sy = (1 - y - height) * pageHeight;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy + height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, { target: textLayer, x, y }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight,\n    } = textLayer.getBoundingClientRect();\n    const pointerMove = (e) => {\n      this.#highlightMove(parent, e);\n    };\n    const pointerDownOptions = {\n      capture: true,\n      passive: false,\n    };\n    const pointerDown = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    const pointerUpCallback = (e) => {\n      textLayer.removeEventListener('pointermove', pointerMove);\n      window.removeEventListener('blur', pointerUpCallback);\n      window.removeEventListener('pointerup', pointerUpCallback);\n      window.removeEventListener('pointerdown', pointerDown, pointerDownOptions);\n      window.removeEventListener('contextmenu', noContextMenu);\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener('blur', pointerUpCallback);\n    window.addEventListener('pointerup', pointerUpCallback);\n    window.addEventListener('pointerdown', pointerDown, pointerDownOptions);\n    window.addEventListener('contextmenu', noContextMenu);\n    textLayer.addEventListener('pointermove', pointerMove);\n    this._freeHighlight = new FreeOutliner(\n      {\n        x,\n        y,\n      },\n      [layerX, layerY, parentWidth, parentHeight],\n      parent.scale,\n      this._defaultThickness / 2,\n      isLTR,\n      0.001,\n    );\n    ({ id: this._freeHighlightId, clipPathId: this._freeHighlightClipId } =\n      parent.drawLayer.highlight(\n        this._freeHighlight,\n        this._defaultColor,\n        this._defaultOpacity,\n        true,\n      ));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updatePath(this._freeHighlightId, this._freeHighlight);\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: 'main_toolbar',\n      });\n    } else {\n      parent.drawLayer.removeFreeHighlight(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = '';\n  }\n  static deserialize(data, parent, uiManager) {\n    const editor = super.deserialize(data, parent, uiManager);\n    const {\n      rect: [blX, blY, trX, trY],\n      color,\n      quadPoints,\n    } = data;\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = data.opacity;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    editor.width = (trX - blX) / pageWidth;\n    editor.height = (trY - blY) / pageHeight;\n    const boxes = (editor.#boxes = []);\n    for (let i = 0; i < quadPoints.length; i += 8) {\n      boxes.push({\n        x: (quadPoints[4] - trX) / pageWidth,\n        y: (trY - (1 - quadPoints[i + 5])) / pageHeight,\n        width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n        height: (quadPoints[i + 5] - quadPoints[i + 1]) / pageHeight,\n      });\n    }\n    editor.#createOutlines();\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    return {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId,\n    };\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n} // CONCATENATED MODULE: ./src/display/editor/ink.js\n\nclass InkEditor extends AnnotationEditor {\n  #baseHeight = 0;\n  #baseWidth = 0;\n  #boundCanvasPointermove = this.canvasPointermove.bind(this);\n  #boundCanvasPointerleave = this.canvasPointerleave.bind(this);\n  #boundCanvasPointerup = this.canvasPointerup.bind(this);\n  #boundCanvasPointerdown = this.canvasPointerdown.bind(this);\n  #canvasContextMenuTimeoutId = null;\n  #currentPath2D = new Path2D();\n  #disableEditing = false;\n  #hasSomethingToDraw = false;\n  #isCanvasInitialized = false;\n  #observer = null;\n  #realWidth = 0;\n  #realHeight = 0;\n  #requestFrameCallback = null;\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 1;\n  static _type = 'ink';\n  static _editorType = AnnotationEditorType.INK;\n  constructor(params) {\n    super({\n      ...params,\n      name: 'inkEditor',\n    });\n    this.color = params.color || null;\n    this.thickness = params.thickness || null;\n    this.opacity = params.opacity || null;\n    this.paths = [];\n    this.bezierPath2D = [];\n    this.allRawPaths = [];\n    this.currentPath = [];\n    this.scaleFactor = 1;\n    this.translationX = this.translationY = 0;\n    this.x = 0;\n    this.y = 0;\n    this._willKeepAspectRatio = true;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        InkEditor._defaultThickness = value;\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        InkEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        InkEditor._defaultOpacity = value / 100;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        this.#updateThickness(value);\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        this.#updateOpacity(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.INK_THICKNESS, InkEditor._defaultThickness],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        InkEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n      [AnnotationEditorParamsType.INK_OPACITY, Math.round(InkEditor._defaultOpacity * 100)],\n    ];\n  }\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.INK_THICKNESS, this.thickness || InkEditor._defaultThickness],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        this.color || InkEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n      [\n        AnnotationEditorParamsType.INK_OPACITY,\n        Math.round(100 * (this.opacity ?? InkEditor._defaultOpacity)),\n      ],\n    ];\n  }\n  #updateThickness(thickness) {\n    const setThickness = (th) => {\n      this.thickness = th;\n      this.#fitToContent();\n    };\n    const savedThickness = this.thickness;\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n  #updateColor(color) {\n    const setColor = (col) => {\n      this.color = col;\n      this.#redraw();\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n  #updateOpacity(opacity) {\n    const setOpacity = (op) => {\n      this.opacity = op;\n      this.#redraw();\n    };\n    opacity /= 100;\n    const savedOpacity = this.opacity;\n    this.addCommands({\n      cmd: setOpacity.bind(this, opacity),\n      undo: setOpacity.bind(this, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_OPACITY,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.canvas) {\n      this.#createCanvas();\n      this.#createObserver();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n      this.#setCanvasDims();\n    }\n    this.#fitToContent();\n  }\n  remove() {\n    if (this.canvas === null) {\n      return;\n    }\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.remove();\n    this.canvas = null;\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n      this.#canvasContextMenuTimeoutId = null;\n    }\n    this.#observer.disconnect();\n    this.#observer = null;\n    super.remove();\n  }\n  setParent(parent) {\n    if (!this.parent && parent) {\n      this._uiManager.removeShouldRescale(this);\n    } else if (this.parent && parent === null) {\n      this._uiManager.addShouldRescale(this);\n    }\n    super.setParent(parent);\n  }\n  onScaleChanging() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const width = this.width * parentWidth;\n    const height = this.height * parentHeight;\n    this.setDimensions(width, height);\n  }\n  enableEditMode() {\n    if (this.#disableEditing || this.canvas === null) {\n      return;\n    }\n    super.enableEditMode();\n    this._isDraggable = false;\n    this.canvas.addEventListener('pointerdown', this.#boundCanvasPointerdown);\n  }\n  disableEditMode() {\n    if (!this.isInEditMode() || this.canvas === null) {\n      return;\n    }\n    super.disableEditMode();\n    this._isDraggable = !this.isEmpty();\n    this.div.classList.remove('editing');\n    this.canvas.removeEventListener('pointerdown', this.#boundCanvasPointerdown);\n  }\n  onceAdded() {\n    this._isDraggable = !this.isEmpty();\n  }\n  isEmpty() {\n    return this.paths.length === 0 || (this.paths.length === 1 && this.paths[0].length === 0);\n  }\n  #getInitialBBox() {\n    const {\n      parentRotation,\n      parentDimensions: [width, height],\n    } = this;\n    switch (parentRotation) {\n      case 90:\n        return [0, height, height, width];\n      case 180:\n        return [width, height, width, height];\n      case 270:\n        return [width, 0, height, width];\n      default:\n        return [0, 0, width, height];\n    }\n  }\n  #setStroke() {\n    const { ctx, color, opacity, thickness, parentScale, scaleFactor } = this;\n    ctx.lineWidth = (thickness * parentScale) / scaleFactor;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n    ctx.miterLimit = 10;\n    ctx.strokeStyle = `${color}${opacityToHex(opacity)}`;\n  }\n  #startDrawing(x, y) {\n    this.canvas.addEventListener('contextmenu', noContextMenu);\n    this.canvas.addEventListener('pointerleave', this.#boundCanvasPointerleave);\n    this.canvas.addEventListener('pointermove', this.#boundCanvasPointermove);\n    this.canvas.addEventListener('pointerup', this.#boundCanvasPointerup);\n    this.canvas.removeEventListener('pointerdown', this.#boundCanvasPointerdown);\n    this.isEditing = true;\n    if (!this.#isCanvasInitialized) {\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.thickness ||= InkEditor._defaultThickness;\n      this.color ||= InkEditor._defaultColor || AnnotationEditor._defaultLineColor;\n      this.opacity ??= InkEditor._defaultOpacity;\n    }\n    this.currentPath.push([x, y]);\n    this.#hasSomethingToDraw = false;\n    this.#setStroke();\n    this.#requestFrameCallback = () => {\n      this.#drawPoints();\n      if (this.#requestFrameCallback) {\n        window.requestAnimationFrame(this.#requestFrameCallback);\n      }\n    };\n    window.requestAnimationFrame(this.#requestFrameCallback);\n  }\n  #draw(x, y) {\n    const [lastX, lastY] = this.currentPath.at(-1);\n    if (this.currentPath.length > 1 && x === lastX && y === lastY) {\n      return;\n    }\n    const currentPath = this.currentPath;\n    let path2D = this.#currentPath2D;\n    currentPath.push([x, y]);\n    this.#hasSomethingToDraw = true;\n    if (currentPath.length <= 2) {\n      path2D.moveTo(...currentPath[0]);\n      path2D.lineTo(x, y);\n      return;\n    }\n    if (currentPath.length === 3) {\n      this.#currentPath2D = path2D = new Path2D();\n      path2D.moveTo(...currentPath[0]);\n    }\n    this.#makeBezierCurve(path2D, ...currentPath.at(-3), ...currentPath.at(-2), x, y);\n  }\n  #endPath() {\n    if (this.currentPath.length === 0) {\n      return;\n    }\n    const lastPoint = this.currentPath.at(-1);\n    this.#currentPath2D.lineTo(...lastPoint);\n  }\n  #stopDrawing(x, y) {\n    this.#requestFrameCallback = null;\n    x = Math.min(Math.max(x, 0), this.canvas.width);\n    y = Math.min(Math.max(y, 0), this.canvas.height);\n    this.#draw(x, y);\n    this.#endPath();\n    let bezier;\n    if (this.currentPath.length !== 1) {\n      bezier = this.#generateBezierPoints();\n    } else {\n      const xy = [x, y];\n      bezier = [[xy, xy.slice(), xy.slice(), xy]];\n    }\n    const path2D = this.#currentPath2D;\n    const currentPath = this.currentPath;\n    this.currentPath = [];\n    this.#currentPath2D = new Path2D();\n    const cmd = () => {\n      this.allRawPaths.push(currentPath);\n      this.paths.push(bezier);\n      this.bezierPath2D.push(path2D);\n      this._uiManager.rebuild(this);\n    };\n    const undo = () => {\n      this.allRawPaths.pop();\n      this.paths.pop();\n      this.bezierPath2D.pop();\n      if (this.paths.length === 0) {\n        this.remove();\n      } else {\n        if (!this.canvas) {\n          this.#createCanvas();\n          this.#createObserver();\n        }\n        this.#fitToContent();\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true,\n    });\n  }\n  #drawPoints() {\n    if (!this.#hasSomethingToDraw) {\n      return;\n    }\n    this.#hasSomethingToDraw = false;\n    const thickness = Math.ceil(this.thickness * this.parentScale);\n    const lastPoints = this.currentPath.slice(-3);\n    const x = lastPoints.map((xy) => xy[0]);\n    const y = lastPoints.map((xy) => xy[1]);\n    const xMin = Math.min(...x) - thickness;\n    const xMax = Math.max(...x) + thickness;\n    const yMin = Math.min(...y) - thickness;\n    const yMax = Math.max(...y) + thickness;\n    const { ctx } = this;\n    ctx.save();\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n    ctx.stroke(this.#currentPath2D);\n    ctx.restore();\n  }\n  #makeBezierCurve(path2D, x0, y0, x1, y1, x2, y2) {\n    const prevX = (x0 + x1) / 2;\n    const prevY = (y0 + y1) / 2;\n    const x3 = (x1 + x2) / 2;\n    const y3 = (y1 + y2) / 2;\n    path2D.bezierCurveTo(\n      prevX + (2 * (x1 - prevX)) / 3,\n      prevY + (2 * (y1 - prevY)) / 3,\n      x3 + (2 * (x1 - x3)) / 3,\n      y3 + (2 * (y1 - y3)) / 3,\n      x3,\n      y3,\n    );\n  }\n  #generateBezierPoints() {\n    const path = this.currentPath;\n    if (path.length <= 2) {\n      return [[path[0], path[0], path.at(-1), path.at(-1)]];\n    }\n    const bezierPoints = [];\n    let i;\n    let [x0, y0] = path[0];\n    for (i = 1; i < path.length - 2; i++) {\n      const [x1, y1] = path[i];\n      const [x2, y2] = path[i + 1];\n      const x3 = (x1 + x2) / 2;\n      const y3 = (y1 + y2) / 2;\n      const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n      const control2 = [x3 + (2 * (x1 - x3)) / 3, y3 + (2 * (y1 - y3)) / 3];\n      bezierPoints.push([[x0, y0], control1, control2, [x3, y3]]);\n      [x0, y0] = [x3, y3];\n    }\n    const [x1, y1] = path[i];\n    const [x2, y2] = path[i + 1];\n    const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n    const control2 = [x2 + (2 * (x1 - x2)) / 3, y2 + (2 * (y1 - y2)) / 3];\n    bezierPoints.push([[x0, y0], control1, control2, [x2, y2]]);\n    return bezierPoints;\n  }\n  #redraw() {\n    if (this.isEmpty()) {\n      this.#updateTransform();\n      return;\n    }\n    this.#setStroke();\n    const { canvas, ctx } = this;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.#updateTransform();\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n  }\n  commit() {\n    if (this.#disableEditing) {\n      return;\n    }\n    super.commit();\n    this.isEditing = false;\n    this.disableEditMode();\n    this.setInForeground();\n    this.#disableEditing = true;\n    this.div.classList.add('disabled');\n    this.#fitToContent(true);\n    this.select();\n    this.parent.addInkEditorIfNeeded(true);\n    this.moveInDOM();\n    this.div.focus({\n      preventScroll: true,\n    });\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    this.enableEditMode();\n  }\n  canvasPointerdown(event) {\n    if (event.button !== 0 || !this.isInEditMode() || this.#disableEditing) {\n      return;\n    }\n    this.setInForeground();\n    event.preventDefault();\n    if (!this.div.contains(document.activeElement)) {\n      this.div.focus({\n        preventScroll: true,\n      });\n    }\n    this.#startDrawing(event.offsetX, event.offsetY);\n  }\n  canvasPointermove(event) {\n    event.preventDefault();\n    this.#draw(event.offsetX, event.offsetY);\n  }\n  canvasPointerup(event) {\n    event.preventDefault();\n    this.#endDrawing(event);\n  }\n  canvasPointerleave(event) {\n    this.#endDrawing(event);\n  }\n  #endDrawing(event) {\n    this.canvas.removeEventListener('pointerleave', this.#boundCanvasPointerleave);\n    this.canvas.removeEventListener('pointermove', this.#boundCanvasPointermove);\n    this.canvas.removeEventListener('pointerup', this.#boundCanvasPointerup);\n    this.canvas.addEventListener('pointerdown', this.#boundCanvasPointerdown);\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n    }\n    this.#canvasContextMenuTimeoutId = setTimeout(() => {\n      this.#canvasContextMenuTimeoutId = null;\n      this.canvas.removeEventListener('contextmenu', noContextMenu);\n    }, 10);\n    this.#stopDrawing(event.offsetX, event.offsetY);\n    this.addToAnnotationStorage();\n    this.setInBackground();\n  }\n  #createCanvas() {\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.className = 'inkEditorCanvas';\n    this.canvas.setAttribute('data-l10n-id', 'pdfjs-ink-canvas');\n    this.div.append(this.canvas);\n    this.ctx = this.canvas.getContext('2d');\n  }\n  #createObserver() {\n    this.#observer = new ResizeObserver((entries) => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n  get isResizable() {\n    return !this.isEmpty() && this.#disableEditing;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.setAttribute('data-l10n-id', 'pdfjs-ink');\n    const [x, y, w, h] = this.#getInitialBBox();\n    this.setAt(x, y, 0, 0);\n    this.setDims(w, h);\n    this.#createCanvas();\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAspectRatio(this.width * parentWidth, this.height * parentHeight);\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight,\n      );\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n      this.#redraw();\n      this.div.classList.add('disabled');\n    } else {\n      this.div.classList.add('editing');\n      this.enableEditMode();\n    }\n    this.#createObserver();\n    return this.div;\n  }\n  #setCanvasDims() {\n    if (!this.#isCanvasInitialized) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.canvas.width = Math.ceil(this.width * parentWidth);\n    this.canvas.height = Math.ceil(this.height * parentHeight);\n    this.#updateTransform();\n  }\n  setDimensions(width, height) {\n    const roundedWidth = Math.round(width);\n    const roundedHeight = Math.round(height);\n    if (this.#realWidth === roundedWidth && this.#realHeight === roundedHeight) {\n      return;\n    }\n    this.#realWidth = roundedWidth;\n    this.#realHeight = roundedHeight;\n    this.canvas.style.visibility = 'hidden';\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.fixAndSetPosition();\n    if (this.#disableEditing) {\n      this.#setScaleFactor(width, height);\n    }\n    this.#setCanvasDims();\n    this.#redraw();\n    this.canvas.style.visibility = 'visible';\n    this.fixDims();\n  }\n  #setScaleFactor(width, height) {\n    const padding = this.#getPadding();\n    const scaleFactorW = (width - padding) / this.#baseWidth;\n    const scaleFactorH = (height - padding) / this.#baseHeight;\n    this.scaleFactor = Math.min(scaleFactorW, scaleFactorH);\n  }\n  #updateTransform() {\n    const padding = this.#getPadding() / 2;\n    this.ctx.setTransform(\n      this.scaleFactor,\n      0,\n      0,\n      this.scaleFactor,\n      this.translationX * this.scaleFactor + padding,\n      this.translationY * this.scaleFactor + padding,\n    );\n  }\n  static #buildPath2D(bezier) {\n    const path2D = new Path2D();\n    for (let i = 0, ii = bezier.length; i < ii; i++) {\n      const [first, control1, control2, second] = bezier[i];\n      if (i === 0) {\n        path2D.moveTo(...first);\n      }\n      path2D.bezierCurveTo(\n        control1[0],\n        control1[1],\n        control2[0],\n        control2[1],\n        second[0],\n        second[1],\n      );\n    }\n    return path2D;\n  }\n  static #toPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] += blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] + blX;\n          points[i + 1] = x + blY;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] += blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trX - points[i + 1];\n          points[i + 1] = trY - x;\n        }\n        break;\n      default:\n        throw new Error('Invalid rotation');\n    }\n    return points;\n  }\n  static #fromPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] -= blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] - blY;\n          points[i + 1] = x - blX;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] -= blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trY - points[i + 1];\n          points[i + 1] = trX - x;\n        }\n        break;\n      default:\n        throw new Error('Invalid rotation');\n    }\n    return points;\n  }\n  #serializePaths(s, tx, ty, rect) {\n    const paths = [];\n    const padding = this.thickness / 2;\n    const shiftX = s * tx + padding;\n    const shiftY = s * ty + padding;\n    for (const bezier of this.paths) {\n      const buffer = [];\n      const points = [];\n      for (let j = 0, jj = bezier.length; j < jj; j++) {\n        const [first, control1, control2, second] = bezier[j];\n        if (first[0] === second[0] && first[1] === second[1] && jj === 1) {\n          const p0 = s * first[0] + shiftX;\n          const p1 = s * first[1] + shiftY;\n          buffer.push(p0, p1);\n          points.push(p0, p1);\n          break;\n        }\n        const p10 = s * first[0] + shiftX;\n        const p11 = s * first[1] + shiftY;\n        const p20 = s * control1[0] + shiftX;\n        const p21 = s * control1[1] + shiftY;\n        const p30 = s * control2[0] + shiftX;\n        const p31 = s * control2[1] + shiftY;\n        const p40 = s * second[0] + shiftX;\n        const p41 = s * second[1] + shiftY;\n        if (j === 0) {\n          buffer.push(p10, p11);\n          points.push(p10, p11);\n        }\n        buffer.push(p20, p21, p30, p31, p40, p41);\n        points.push(p20, p21);\n        if (j === jj - 1) {\n          points.push(p40, p41);\n        }\n      }\n      paths.push({\n        bezier: InkEditor.#toPDFCoordinates(buffer, rect, this.rotation),\n        points: InkEditor.#toPDFCoordinates(points, rect, this.rotation),\n      });\n    }\n    return paths;\n  }\n  #getBbox() {\n    let xMin = Infinity;\n    let xMax = -Infinity;\n    let yMin = Infinity;\n    let yMax = -Infinity;\n    for (const path of this.paths) {\n      for (const [first, control1, control2, second] of path) {\n        const bbox = Util.bezierBoundingBox(...first, ...control1, ...control2, ...second);\n        xMin = Math.min(xMin, bbox[0]);\n        yMin = Math.min(yMin, bbox[1]);\n        xMax = Math.max(xMax, bbox[2]);\n        yMax = Math.max(yMax, bbox[3]);\n      }\n    }\n    return [xMin, yMin, xMax, yMax];\n  }\n  #getPadding() {\n    return this.#disableEditing ? Math.ceil(this.thickness * this.parentScale) : 0;\n  }\n  #fitToContent(firstTime = false) {\n    if (this.isEmpty()) {\n      return;\n    }\n    if (!this.#disableEditing) {\n      this.#redraw();\n      return;\n    }\n    const bbox = this.#getBbox();\n    const padding = this.#getPadding();\n    this.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    this.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    const width = Math.ceil(padding + this.#baseWidth * this.scaleFactor);\n    const height = Math.ceil(padding + this.#baseHeight * this.scaleFactor);\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setAspectRatio(width, height);\n    const prevTranslationX = this.translationX;\n    const prevTranslationY = this.translationY;\n    this.translationX = -bbox[0];\n    this.translationY = -bbox[1];\n    this.#setCanvasDims();\n    this.#redraw();\n    this.#realWidth = width;\n    this.#realHeight = height;\n    this.setDims(width, height);\n    const unscaledPadding = firstTime ? padding / this.scaleFactor / 2 : 0;\n    this.translate(\n      prevTranslationX - this.translationX - unscaledPadding,\n      prevTranslationY - this.translationY - unscaledPadding,\n    );\n  }\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof InkAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.thickness = data.thickness;\n    editor.color = Util.makeHexColor(...data.color);\n    editor.opacity = data.opacity;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const width = editor.width * pageWidth;\n    const height = editor.height * pageHeight;\n    const scaleFactor = editor.parentScale;\n    const padding = data.thickness / 2;\n    editor.#disableEditing = true;\n    editor.#realWidth = Math.round(width);\n    editor.#realHeight = Math.round(height);\n    const { paths, rect, rotation } = data;\n    for (let { bezier } of paths) {\n      bezier = InkEditor.#fromPDFCoordinates(bezier, rect, rotation);\n      const path = [];\n      editor.paths.push(path);\n      let p0 = scaleFactor * (bezier[0] - padding);\n      let p1 = scaleFactor * (bezier[1] - padding);\n      for (let i = 2, ii = bezier.length; i < ii; i += 6) {\n        const p10 = scaleFactor * (bezier[i] - padding);\n        const p11 = scaleFactor * (bezier[i + 1] - padding);\n        const p20 = scaleFactor * (bezier[i + 2] - padding);\n        const p21 = scaleFactor * (bezier[i + 3] - padding);\n        const p30 = scaleFactor * (bezier[i + 4] - padding);\n        const p31 = scaleFactor * (bezier[i + 5] - padding);\n        path.push([\n          [p0, p1],\n          [p10, p11],\n          [p20, p21],\n          [p30, p31],\n        ]);\n        p0 = p30;\n        p1 = p31;\n      }\n      const path2D = this.#buildPath2D(path);\n      editor.bezierPath2D.push(path2D);\n    }\n    const bbox = editor.#getBbox();\n    editor.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    editor.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    editor.#setScaleFactor(width, height);\n    return editor;\n  }\n  serialize() {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);\n    return {\n      annotationType: AnnotationEditorType.INK,\n      color,\n      thickness: this.thickness,\n      opacity: this.opacity,\n      paths: this.#serializePaths(\n        this.scaleFactor / this.parentScale,\n        this.translationX,\n        this.translationY,\n        rect,\n      ),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n    };\n  }\n} // CONCATENATED MODULE: ./src/display/editor/stamp.js\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = '';\n  #canvas = null;\n  #observer = null;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = 'stamp';\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: 'stampEditor',\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static get supportedTypes() {\n    const types = ['apng', 'avif', 'bmp', 'gif', 'jpeg', 'png', 'svg+xml', 'webp', 'x-icon'];\n    return shadow(\n      this,\n      'supportedTypes',\n      types.map((type) => `image/${type}`),\n    );\n  }\n  static get supportedTypesStr() {\n    return shadow(this, 'supportedTypesStr', this.supportedTypes.join(','));\n  }\n  static isHandlingMimeForPasting(mime) {\n    return this.supportedTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor(AnnotationEditorType.STAMP, {\n      bitmapFile: item.getAsFile(),\n    });\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (this.#canvas) {\n      this.div.focus();\n    }\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager\n        .getFromId(this.#bitmapId)\n        .then((data) => this.#getBitmapFetched(data, true))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromUrl(url)\n        .then((data) => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager\n        .getFromFile(file)\n        .then((data) => this.#getBitmapFetched(data))\n        .finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = StampEditor.supportedTypesStr;\n    this.#bitmapPromise = new Promise((resolve) => {\n      input.addEventListener('change', async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      });\n      input.addEventListener('cancel', () => {\n        this.remove();\n        resolve();\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      this.#observer?.disconnect();\n      this.#observer = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded() {\n    this._isDraggable = true;\n    this.div.focus();\n  }\n  isEmpty() {\n    return !(\n      this.#bitmapPromise ||\n      this.#bitmap ||\n      this.#bitmapUrl ||\n      this.#bitmapFile ||\n      this.#bitmapId\n    );\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.addAltTextButton();\n    if (this.#bitmap) {\n      this.#createCanvas();\n    } else {\n      this.#getBitmap();\n    }\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight,\n      );\n    }\n    return this.div;\n  }\n  #createCanvas() {\n    const { div } = this;\n    let { width, height } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min((MAX_RATIO * pageWidth) / width, (MAX_RATIO * pageHeight) / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims((width * parentWidth) / pageWidth, (height * parentHeight) / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = (this.#canvas = document.createElement('canvas'));\n    div.append(canvas);\n    div.hidden = false;\n    this.#drawBitmap(width, height);\n    this.#createObserver();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: 'inserted_image',\n    });\n    if (this.#bitmapFileName) {\n      canvas.setAttribute('aria-label', this.#bitmapFileName);\n    }\n  }\n  #setDimensions(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setDims(width, height);\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap(width, height);\n    }, TIME_TO_WAIT);\n  }\n  #scaleBitmap(width, height) {\n    const { width: bitmapWidth, height: bitmapHeight } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext('2d');\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap(width, height) {\n    width = Math.ceil(width);\n    height = Math.ceil(height);\n    const canvas = this.#canvas;\n    if (!canvas || (canvas.width === width && canvas.height === height)) {\n      return;\n    }\n    canvas.width = width;\n    canvas.height = height;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(width, height);\n    if (this._uiManager.hasMLManager && !this.hasAltText()) {\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext('2d');\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, width, height);\n      this._uiManager\n        .mlGuess({\n          service: 'image-to-text',\n          request: {\n            data: ctx.getImageData(0, 0, width, height).data,\n            width,\n            height,\n            channels: 4,\n          },\n        })\n        .then((response) => {\n          const altText = response?.output || '';\n          if (this.parent && altText && !this.hasAltText()) {\n            this.altTextData = {\n              altText,\n              decorative: false,\n            };\n          }\n        });\n    }\n    const ctx = canvas.getContext('2d');\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, width, height);\n  }\n  getImageForAltText() {\n    return this.#canvas;\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement('canvas');\n      ({ width: canvas.width, height: canvas.height } = this.#bitmap);\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext('2d');\n      ctx.drawImage(\n        this.#bitmap,\n        0,\n        0,\n        this.#bitmap.width,\n        this.#bitmap.height,\n        0,\n        0,\n        width,\n        height,\n      );\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  #createObserver() {\n    this.#observer = new ResizeObserver((entries) => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.#setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof StampAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    const { rect, bitmapUrl, bitmapId, isSvg, accessibilityData } = data;\n    if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId,\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.altTextData;\n      return serialized;\n    }\n    const { decorative, altText } = this.altTextData;\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: 'Figure',\n        alt: altText,\n      };\n    }\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg\n      ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1])\n      : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized,\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n} // CONCATENATED MODULE: ./src/display/editor/annotation_editor_layer.js\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #boundPointerup = null;\n  #boundPointerdown = null;\n  #boundTextLayerPointerDown = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isCleaningUp = false;\n  #isDisabling = false;\n  #textLayer = null;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map(\n    [FreeTextEditor, InkEditor, StampEditor, HighlightEditor].map((type) => [\n      type._editorType,\n      type,\n    ]),\n  );\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n,\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(mode) {\n    this.#uiManager.updateToolbar(mode);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.addInkEditorIfNeeded(false);\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.disableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  addInkEditorIfNeeded(isCommitting) {\n    if (this.#uiManager.getMode() !== AnnotationEditorType.INK) {\n      return;\n    }\n    if (!isCommitting) {\n      for (const editor of this.#editors.values()) {\n        if (editor.isEmpty()) {\n          editor.setInBackground();\n          return;\n        }\n      }\n    }\n    const editor = this.createAndAddNewEditor(\n      {\n        offsetX: 0,\n        offsetY: 0,\n      },\n      false,\n    );\n    editor.setInBackground();\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle('disabled', !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle('disabled', !enabled);\n  }\n  enable() {\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const { id } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          editor.renderAnnotationElement(editable);\n          editor.show(false);\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const { classList } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#boundTextLayerPointerDown) {\n      this.#boundTextLayerPointerDown = this.#textLayerPointerDown.bind(this);\n      this.#textLayer.div.addEventListener('pointerdown', this.#boundTextLayerPointerDown);\n      this.#textLayer.div.classList.add('highlighting');\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#boundTextLayerPointerDown) {\n      this.#textLayer.div.removeEventListener('pointerdown', this.#boundTextLayerPointerDown);\n      this.#boundTextLayerPointerDown = null;\n      this.#textLayer.div.classList.remove('highlighting');\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    if (event.target === this.#textLayer.div) {\n      const { isMac } = util_FeatureTest.platform;\n      if (event.button !== 0 || (event.ctrlKey && isMac)) {\n        return;\n      }\n      this.#uiManager.showAllEditors('highlight', true, true);\n      this.#textLayer.div.classList.add('free');\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === 'ltr', event);\n      this.#textLayer.div.addEventListener(\n        'pointerup',\n        () => {\n          this.#textLayer.div.classList.remove('free');\n        },\n        {\n          once: true,\n        },\n      );\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#boundPointerdown) {\n      return;\n    }\n    this.#boundPointerdown = this.pointerdown.bind(this);\n    this.#boundPointerup = this.pointerup.bind(this);\n    this.div.addEventListener('pointerdown', this.#boundPointerdown);\n    this.div.addEventListener('pointerup', this.#boundPointerup);\n  }\n  disableClick() {\n    if (!this.#boundPointerdown) {\n      return;\n    }\n    this.div.removeEventListener('pointerdown', this.#boundPointerdown);\n    this.div.removeEventListener('pointerup', this.#boundPointerup);\n    this.#boundPointerdown = null;\n    this.#boundPointerup = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const { annotationElementId } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n    if (!this.#isCleaningUp) {\n      this.addInkEditorIfNeeded(false);\n    }\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded();\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const { activeElement } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\n            'focusin',\n            () => {\n              editor._focusEventsAllowed = true;\n            },\n            {\n              once: true,\n            },\n          );\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(\n      this.div,\n      editor.div,\n      editor.contentDiv,\n      true,\n    );\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false,\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  pasteEditor(mode, params) {\n    this.#uiManager.updateToolbar(mode);\n    this.#uiManager.updateMode(mode);\n    const { offsetX, offsetY } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  deserialize(data) {\n    return (\n      AnnotationEditorLayer.#editorTypes\n        .get(data.annotationType ?? data.annotationEditorType)\n        ?.deserialize(data, this, this.#uiManager) || null\n    );\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const { x, y, width, height } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] =\n      this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY,\n    };\n  }\n  addNewEditor() {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  isSelected(editor) {\n    return this.#uiManager.isSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const { isMac } = util_FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    if (this.#uiManager.getMode() === AnnotationEditorType.STAMP) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const { isMac } = util_FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  destroy() {\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    this.#isCleaningUp = true;\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n    this.#isCleaningUp = false;\n  }\n  render({ viewport }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({ viewport }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation,\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n    this.addInkEditorIfNeeded(false);\n  }\n  get pageDimensions() {\n    const { pageWidth, pageHeight } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n} // CONCATENATED MODULE: ./src/display/draw_layer.js\n\nclass DrawLayer {\n  #parent = null;\n  #id = 0;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  constructor({ pageIndex }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, '_svgFactory', new DOMSVGFactory());\n  }\n  static #setBox(element, { x = 0, y = 0, width = 1, height = 1 } = {}) {\n    const { style } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG(box) {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute('aria-hidden', true);\n    DrawLayer.#setBox(svg, box);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement('clipPath');\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute('id', clipPathId);\n    clipPath.setAttribute('clipPathUnits', 'objectBoundingBox');\n    const clipPathUse = DrawLayer._svgFactory.createElement('use');\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute('href', `#${pathId}`);\n    clipPathUse.classList.add('clip');\n    return clipPathId;\n  }\n  highlight(outlines, color, opacity, isPathUpdatable = false) {\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add('highlight');\n    if (outlines.free) {\n      root.classList.add('free');\n    }\n    const defs = DrawLayer._svgFactory.createElement('defs');\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement('path');\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute('id', pathId);\n    path.setAttribute('d', outlines.toSVGPath());\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = this.#createClipPath(defs, pathId);\n    const use = DrawLayer._svgFactory.createElement('use');\n    root.append(use);\n    root.setAttribute('fill', color);\n    root.setAttribute('fill-opacity', opacity);\n    use.setAttribute('href', `#${pathId}`);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`,\n    };\n  }\n  highlightOutline(outlines) {\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add('highlightOutline');\n    const defs = DrawLayer._svgFactory.createElement('defs');\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement('path');\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute('id', pathId);\n    path.setAttribute('d', outlines.toSVGPath());\n    path.setAttribute('vector-effect', 'non-scaling-stroke');\n    let maskId;\n    if (outlines.free) {\n      root.classList.add('free');\n      const mask = DrawLayer._svgFactory.createElement('mask');\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute('id', maskId);\n      mask.setAttribute('maskUnits', 'objectBoundingBox');\n      const rect = DrawLayer._svgFactory.createElement('rect');\n      mask.append(rect);\n      rect.setAttribute('width', '1');\n      rect.setAttribute('height', '1');\n      rect.setAttribute('fill', 'white');\n      const use = DrawLayer._svgFactory.createElement('use');\n      mask.append(use);\n      use.setAttribute('href', `#${pathId}`);\n      use.setAttribute('stroke', 'none');\n      use.setAttribute('fill', 'black');\n      use.setAttribute('fill-rule', 'nonzero');\n      use.classList.add('mask');\n    }\n    const use1 = DrawLayer._svgFactory.createElement('use');\n    root.append(use1);\n    use1.setAttribute('href', `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute('mask', `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add('mainOutline');\n    use2.classList.add('secondaryOutline');\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeLine(id, line) {\n    const path = this.#toUpdate.get(id);\n    this.#toUpdate.delete(id);\n    this.updateBox(id, line.box);\n    path.setAttribute('d', line.toSVGPath());\n  }\n  updateLine(id, line) {\n    const root = this.#mapping.get(id);\n    const defs = root.firstChild;\n    const path = defs.firstChild;\n    path.setAttribute('d', line.toSVGPath());\n  }\n  removeFreeHighlight(id) {\n    this.remove(id);\n    this.#toUpdate.delete(id);\n  }\n  updatePath(id, line) {\n    this.#toUpdate.get(id).setAttribute('d', line.toSVGPath());\n  }\n  updateBox(id, box) {\n    DrawLayer.#setBox(this.#mapping.get(id), box);\n  }\n  show(id, visible) {\n    this.#mapping.get(id).classList.toggle('hidden', !visible);\n  }\n  rotate(id, angle) {\n    this.#mapping.get(id).setAttribute('data-main-rotation', angle);\n  }\n  changeColor(id, color) {\n    this.#mapping.get(id).setAttribute('fill', color);\n  }\n  changeOpacity(id, opacity) {\n    this.#mapping.get(id).setAttribute('fill-opacity', opacity);\n  }\n  addClass(id, className) {\n    this.#mapping.get(id).classList.add(className);\n  }\n  removeClass(id, className) {\n    this.#mapping.get(id).classList.remove(className);\n  }\n  remove(id) {\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n  }\n} // CONCATENATED MODULE: ./src/pdf.js\n\nconst pdfjsVersion = '4.3.99';\nconst pdfjsBuild = '2a52fda11';\n\nvar __foobar_exports__AbortException = __foobar_exports__.AbortException;\nvar __foobar_exports__AnnotationEditorLayer = __foobar_exports__.AnnotationEditorLayer;\nvar __foobar_exports__AnnotationEditorParamsType = __foobar_exports__.AnnotationEditorParamsType;\nvar __foobar_exports__AnnotationEditorType = __foobar_exports__.AnnotationEditorType;\nvar __foobar_exports__AnnotationEditorUIManager = __foobar_exports__.AnnotationEditorUIManager;\nvar __foobar_exports__AnnotationLayer = __foobar_exports__.AnnotationLayer;\nvar __foobar_exports__AnnotationMode = __foobar_exports__.AnnotationMode;\nvar __foobar_exports__CMapCompressionType = __foobar_exports__.CMapCompressionType;\nvar __foobar_exports__ColorPicker = __foobar_exports__.ColorPicker;\nvar __foobar_exports__DOMSVGFactory = __foobar_exports__.DOMSVGFactory;\nvar __foobar_exports__DrawLayer = __foobar_exports__.DrawLayer;\nvar __foobar_exports__FeatureTest = __foobar_exports__.FeatureTest;\nvar __foobar_exports__GlobalWorkerOptions = __foobar_exports__.GlobalWorkerOptions;\nvar __foobar_exports__ImageKind = __foobar_exports__.ImageKind;\nvar __foobar_exports__InvalidPDFException = __foobar_exports__.InvalidPDFException;\nvar __foobar_exports__MissingPDFException = __foobar_exports__.MissingPDFException;\nvar __foobar_exports__OPS = __foobar_exports__.OPS;\nvar __foobar_exports__Outliner = __foobar_exports__.Outliner;\nvar __foobar_exports__PDFDataRangeTransport = __foobar_exports__.PDFDataRangeTransport;\nvar __foobar_exports__PDFDateString = __foobar_exports__.PDFDateString;\nvar __foobar_exports__PDFWorker = __foobar_exports__.PDFWorker;\nvar __foobar_exports__PasswordResponses = __foobar_exports__.PasswordResponses;\nvar __foobar_exports__PermissionFlag = __foobar_exports__.PermissionFlag;\nvar __foobar_exports__PixelsPerInch = __foobar_exports__.PixelsPerInch;\nvar __foobar_exports__RenderingCancelledException = __foobar_exports__.RenderingCancelledException;\nvar __foobar_exports__TextLayer = __foobar_exports__.TextLayer;\nvar __foobar_exports__UnexpectedResponseException = __foobar_exports__.UnexpectedResponseException;\nvar __foobar_exports__Util = __foobar_exports__.Util;\nvar __foobar_exports__VerbosityLevel = __foobar_exports__.VerbosityLevel;\nvar __foobar_exports__XfaLayer = __foobar_exports__.XfaLayer;\nvar __foobar_exports__build = __foobar_exports__.build;\nvar __foobar_exports__createValidAbsoluteUrl = __foobar_exports__.createValidAbsoluteUrl;\nvar __foobar_exports__fetchData = __foobar_exports__.fetchData;\nvar __foobar_exports__getDocument = __foobar_exports__.getDocument;\nvar __foobar_exports__getFilenameFromUrl = __foobar_exports__.getFilenameFromUrl;\nvar __foobar_exports__getPdfFilenameFromUrl = __foobar_exports__.getPdfFilenameFromUrl;\nvar __foobar_exports__getXfaPageViewport = __foobar_exports__.getXfaPageViewport;\nvar __foobar_exports__isDataScheme = __foobar_exports__.isDataScheme;\nvar __foobar_exports__isPdfFile = __foobar_exports__.isPdfFile;\nvar __foobar_exports__noContextMenu = __foobar_exports__.noContextMenu;\nvar __foobar_exports__normalizeUnicode = __foobar_exports__.normalizeUnicode;\nvar __foobar_exports__renderTextLayer = __foobar_exports__.renderTextLayer;\nvar __foobar_exports__setLayerDimensions = __foobar_exports__.setLayerDimensions;\nvar __foobar_exports__shadow = __foobar_exports__.shadow;\nvar __foobar_exports__updateTextLayer = __foobar_exports__.updateTextLayer;\nvar __foobar_exports__version = __foobar_exports__.version;\nexport {\n  __foobar_exports__AbortException as AbortException,\n  __foobar_exports__AnnotationEditorLayer as AnnotationEditorLayer,\n  __foobar_exports__AnnotationEditorParamsType as AnnotationEditorParamsType,\n  __foobar_exports__AnnotationEditorType as AnnotationEditorType,\n  __foobar_exports__AnnotationEditorUIManager as AnnotationEditorUIManager,\n  __foobar_exports__AnnotationLayer as AnnotationLayer,\n  __foobar_exports__AnnotationMode as AnnotationMode,\n  __foobar_exports__CMapCompressionType as CMapCompressionType,\n  __foobar_exports__ColorPicker as ColorPicker,\n  __foobar_exports__DOMSVGFactory as DOMSVGFactory,\n  __foobar_exports__DrawLayer as DrawLayer,\n  __foobar_exports__FeatureTest as FeatureTest,\n  __foobar_exports__GlobalWorkerOptions as GlobalWorkerOptions,\n  __foobar_exports__ImageKind as ImageKind,\n  __foobar_exports__InvalidPDFException as InvalidPDFException,\n  __foobar_exports__MissingPDFException as MissingPDFException,\n  __foobar_exports__OPS as OPS,\n  __foobar_exports__Outliner as Outliner,\n  __foobar_exports__PDFDataRangeTransport as PDFDataRangeTransport,\n  __foobar_exports__PDFDateString as PDFDateString,\n  __foobar_exports__PDFWorker as PDFWorker,\n  __foobar_exports__PasswordResponses as PasswordResponses,\n  __foobar_exports__PermissionFlag as PermissionFlag,\n  __foobar_exports__PixelsPerInch as PixelsPerInch,\n  __foobar_exports__RenderingCancelledException as RenderingCancelledException,\n  __foobar_exports__TextLayer as TextLayer,\n  __foobar_exports__UnexpectedResponseException as UnexpectedResponseException,\n  __foobar_exports__Util as Util,\n  __foobar_exports__VerbosityLevel as VerbosityLevel,\n  __foobar_exports__XfaLayer as XfaLayer,\n  __foobar_exports__build as build,\n  __foobar_exports__createValidAbsoluteUrl as createValidAbsoluteUrl,\n  __foobar_exports__fetchData as fetchData,\n  __foobar_exports__getDocument as getDocument,\n  __foobar_exports__getFilenameFromUrl as getFilenameFromUrl,\n  __foobar_exports__getPdfFilenameFromUrl as getPdfFilenameFromUrl,\n  __foobar_exports__getXfaPageViewport as getXfaPageViewport,\n  __foobar_exports__isDataScheme as isDataScheme,\n  __foobar_exports__isPdfFile as isPdfFile,\n  __foobar_exports__noContextMenu as noContextMenu,\n  __foobar_exports__normalizeUnicode as normalizeUnicode,\n  __foobar_exports__renderTextLayer as renderTextLayer,\n  __foobar_exports__setLayerDimensions as setLayerDimensions,\n  __foobar_exports__shadow as shadow,\n  __foobar_exports__updateTextLayer as updateTextLayer,\n  __foobar_exports__version as version,\n};\n\n//# sourceMappingURL=pdf.mjs.map\n","// @ts-check\n\n/** Make periods for long numbers. Returns string presentation of number.\n * @param {string|number} num\n * @param {string} [periodChar=',']\n * @return {string}\n */\nexport function periodizeNumber(num, periodChar = ',') {\n  // periodChar = periodChar || ' ';\n  let numStr = String(num);\n  // If long number...\n  if (numStr.length > 3 && !numStr.match(/\\D/)) {\n    numStr = numStr.replace(/\\B(?=(\\d{3})+(?!\\d))/g, periodChar);\n  }\n  return numStr;\n}\n\n/**\n * @param {number|string} val\n */\nexport function formatPriceToStr(val) {\n  if (typeof val === 'string') {\n    return val;\n  }\n  if (!val) {\n    return '0.00';\n  }\n  let numStr = val.toFixed(2);\n  const parsed = numStr.match(/^(\\d+)[,.](\\d+)$/);\n  if (!parsed) {\n    return periodizeNumber(numStr);\n  }\n  numStr = periodizeNumber(parsed[1]) + '.' + parsed[2];\n  return numStr;\n}\n\n/**\n * @param {string|number} val\n * @return {number}\n */\nexport function parsePriceFromStr(val) {\n  if (typeof val === 'number') {\n    return val;\n  }\n  if (!val) {\n    return 0;\n  }\n  val = val.replace(/[, ]/g, '');\n  const numVal = Number(val);\n  if (isNaN(numVal)) {\n    return 0;\n  }\n  return numVal;\n}\n","// @ts-check\n\nimport { createApp } from 'vue/dist/vue.esm-bundler';\n\nimport { Swiper, SwiperSlide } from 'swiper/vue';\n\nimport axios from 'axios';\nimport html2canvas from 'html2canvas';\n\nimport { getDocument } from '../pdf.mjs';\n\nimport { getDataTypeSelectedItems } from './show-structure';\nimport { formatPriceToStr, parsePriceFromStr } from './numbers';\nimport { getErrorText } from './strings';\nimport { isDev } from './config';\nimport { showErrorToast, showSuccessToast } from './toast';\nimport { ServerDataError } from './ServerDataError';\nimport { saveCostChangesToServer } from './data';\nimport { debugDataStruct } from './helpers';\n\n/** DEBUG: Emulate changes at start */\nconst debugInitialChanges = false;\n\n/** Create global application\n * @param {DataJson} serverData\n * @param {boolean} isManage\n * @return {import('vue').App<Element>}\n */\nexport function createCalculatorApp(serverData, isManage) {\n  // Create Vue app\n  return createApp({\n    data(_app) {\n      return {\n        isDev,\n        isManage, // boolean,\n        pricesHasChanged: isDev && debugInitialChanges, // boolean\n        pricesChangedDataTypes: isDev && debugInitialChanges ? [0] : [], // number[]\n        data: null, // DataJson\n        preloaded: false,\n        title: null,\n        edition: 10, // number of items to produce\n        logo: null,\n        comment: null,\n        priceUnit: null,\n        priceTotal: null,\n        filteredPrices: [], // PriceItem[], Actual prices for the current DataType node\n        date: new Date(),\n      };\n    },\n    components: {\n      Swiper,\n      SwiperSlide,\n    },\n    setup() {\n      const onSwiper =\n        /** @param {Swiper} _swiper */\n        (_swiper) => {};\n      return {\n        onSwiper,\n      };\n    },\n    async mounted() {\n      /* // Toasts test\n       * showSuccessToast('Success text');\n       * // setTimeout(() => {\n       * //   showErrorToast('Long body text');\n       * // }, 7000);\n       */\n      const data = serverData;\n      debugDataStruct(data);\n      /* // DEBUG\n       * const app = this;\n       * console.log('[mounted]', {\n       *   test: data.types[0].prices,\n       *   app: { ...app },\n       * });\n       */\n      this.data = data;\n      // Select the first top-level type\n      this.setList(0);\n      this.preloaded = true;\n      setTimeout(() => {\n        const observerLogo = new MutationObserver((mutations) => {\n          mutations.forEach((mutationRecord) => {\n            const node = /** @type {HTMLElement} */ (mutationRecord.target);\n            const mutation = node.getAttribute('style');\n            this.$refs.logoElementBottom.setAttribute('style', mutation);\n          });\n        });\n\n        const targetLogo = this.$refs.logoElement;\n        observerLogo.observe(targetLogo, { attributes: true, attributeFilter: ['style'] });\n\n        const dragElement =\n          /** @param {HTMLElement} elmnt */\n          (elmnt) => {\n            let pos1 = 0;\n            let pos2 = 0;\n            let pos3 = 0;\n            let pos4 = 0;\n            const garabber = /** @type {HTMLElement} */ (elmnt.querySelector('.element'));\n            if (document.getElementById(elmnt.id + 'header')) {\n              const node = document.getElementById(elmnt.id + 'header');\n              if (node) {\n                node.onmousedown = dragMouseDown;\n              }\n            } else {\n              if (garabber) {\n                garabber.onmousedown = dragMouseDown;\n              }\n            }\n\n            /** @param {MouseEvent} e */\n            function dragMouseDown(e) {\n              e = e || window.event;\n              e.preventDefault();\n              pos3 = e.clientX;\n              pos4 = e.clientY;\n              document.onmouseup = closeDragElement;\n              document.onmousemove = elementDrag;\n            }\n\n            /** @param {MouseEvent} e */\n            function elementDrag(e) {\n              e = e || window.event;\n              e.preventDefault();\n              pos1 = pos3 - e.clientX;\n              pos2 = pos4 - e.clientY;\n              pos3 = e.clientX;\n              pos4 = e.clientY;\n              elmnt.style.top = elmnt.offsetTop - pos2 + 'px';\n              elmnt.style.left = elmnt.offsetLeft - pos1 + 'px';\n            }\n\n            function closeDragElement() {\n              document.onmouseup = null;\n              document.onmousemove = null;\n            }\n          };\n\n        dragElement(targetLogo);\n      }, 2000);\n    },\n    methods: {\n      /**\n       * @param {number} val\n       */\n      formatPrice(val) {\n        return formatPriceToStr(val);\n      },\n      /**\n       * @return {number}\n       */\n      getCurrentDataTypeIndex() {\n        /** @type {DataJson} */\n        const data = this.data;\n        /** @type {number} */\n        const idx = data.types.findIndex(({ selected }) => !!selected);\n        return idx;\n      },\n      /**\n       * @return {DataType | undefined}\n       */\n      getCurrentDataType() {\n        /** @type {DataJson} */\n        const data = this.data;\n        /** Selected data type\n         * @type {DataType | undefined}\n         */\n        const dataType = data.types.find(({ selected }) => !!selected);\n        if (!dataType) {\n          // eslint-disable-next-line no-console\n          console.warn('[getCurrentDataType] No data type selected!');\n          return undefined;\n        }\n        return dataType;\n      },\n      /**\n       * @param {string} reason\n       */\n      calcPrice(reason, reasonId = '') {\n        /** Selected data type\n         * @type {DataType | undefined}\n         */\n        const dataType = this.getCurrentDataType(); // data.types.find(({ selected }) => !!selected);\n        if (!dataType) {\n          // eslint-disable-next-line no-console\n          console.warn('[calcPrice]', reason, reasonId, 'No data type selected!');\n          debugger; // eslint-disable-line no-debugger\n          return;\n        }\n        const selectedItems = getDataTypeSelectedItems(dataType);\n        /* // DEBUG\n         * const selectedItemsCmp = getAllDataTypeItems(this.data);\n         * console.log('[calcPrice] Check items', {\n         *   selectedItems,\n         *   selectedItemsCmp,\n         * });\n         */\n        const { prices } = dataType;\n        const filteredPrices = /** @type {PriceItem[] | undefined} */ (\n          prices\n            ?.map((price, idx) => {\n              const { conditions } = price;\n              if (conditions) {\n                // Unfilter a price entry if any of conditions aren't presented in currently selected items\n                for (const condItem of conditions) {\n                  if (!selectedItems.includes(condItem)) {\n                    return null;\n                  }\n                }\n              }\n              return /** @type {PriceItem} */ ({\n                _idx: idx,\n                ...price,\n              });\n            })\n            .filter(Boolean)\n        );\n        const count = !this.edition || isNaN(this.edition) ? 1 : this.edition;\n        /* console.log('[calcPrice]', reason, reasonId, {\n         *   filteredPrices,\n         *   prices: { ...prices },\n         *   selectedItems,\n         *   dataType: { ...dataType },\n         *   count,\n         * });\n         */\n        this.filteredPrices = filteredPrices;\n        this.priceUnit = filteredPrices?.reduce((summ, price) => {\n          return summ + parsePriceFromStr(price.unitCost);\n        }, 0);\n        this.priceTotal = isNaN(this.priceUnit) ? 0 : this.priceUnit * count;\n      },\n      /** Handle update of a basic cost field\n       * @param {InputEvent} e\n       */\n      onBasicCostChange(e) {\n        /** @type {number} */\n        const dataTypeIdx = this.getCurrentDataTypeIndex();\n        /** Selected data type\n         * @type {DataType | undefined}\n         */\n        const dataType = this.data.types[dataTypeIdx]; // getCurrentDataType(); // data.types.find(({ selected }) => !!selected);\n        if (!dataType) {\n          // eslint-disable-next-line no-console\n          console.error('[onBasicCostChange] No data type selected!');\n          debugger; // eslint-disable-line no-debugger\n          return;\n        }\n        const prices = dataType.prices;\n        if (!prices) {\n          // eslint-disable-next-line no-console\n          console.error('[onBasicCostChange] Prices data not defined for the DataType!');\n          debugger; // eslint-disable-line no-debugger\n          return;\n        }\n        const node = /** @type {HTMLInputElement} */ (e.target);\n        const { dataset } = node;\n        const idx = dataset.idx;\n        if (idx == undefined || idx == '' || isNaN(Number(idx))) {\n          // eslint-disable-next-line no-console\n          console.error('[onBasicCostChange] Prices data not defined for the DataType!');\n          debugger; // eslint-disable-line no-debugger\n          return;\n        }\n        const idxN = Number(idx);\n        /** @type {PriceItem | undefined } */\n        const price = prices[idxN];\n        if (!price) {\n          // eslint-disable-next-line no-console\n          console.error('[onBasicCostChange] Not found price item for idx: ' + idx);\n          debugger; // eslint-disable-line no-debugger\n          return;\n        }\n        const value = node.value;\n        const parsedValue = parsePriceFromStr(value);\n        price.basicCost = parsedValue;\n        price.unitCost = parsePriceFromStr(price.unitMaterial) * parsedValue;\n        this.pricesHasChanged = true;\n        if (!this.pricesChangedDataTypes.includes(dataTypeIdx)) {\n          this.pricesChangedDataTypes.push(dataTypeIdx);\n        }\n        const reasonId = ['basicCost', idx, value].filter(Boolean).join(': ');\n        /* console.log('[onBasicCostChange]', reasonId, {\n         *   parsedValue,\n         *   value,\n         *   idxN,\n         *   idx,\n         *   prices,\n         *   dataType: { ...dataType },\n         * });\n         */\n        this.calcPrice('onBasicCostChange', reasonId);\n      },\n      /** Save changed data on the server */\n      async saveCostChanges() {\n        /** @type {DataJson} */\n        const data = this.data;\n        /** @type {number[]} */\n        const pricesChangedDataTypes = this.pricesChangedDataTypes;\n        try {\n          const _resData = await saveCostChangesToServer(data, pricesChangedDataTypes);\n          /*\n           * console.log('[saveCostChanges] success: Got data (parsed json)', {\n           *   resData,\n           * });\n           */\n          this.pricesHasChanged = false;\n          this.pricesChangedDataTypes = [];\n          showSuccessToast(' ');\n        } catch (err) {\n          const details = getErrorText(err);\n          const error = new ServerDataError('  ', details);\n          // eslint-disable-next-line no-console\n          console.error('[saveCostChanges] Network error', error.message, {\n            details,\n            err,\n            error,\n          });\n          debugger; // eslint-disable-line no-debugger\n          showErrorToast(error);\n        }\n      },\n      /** Set the topmost level type (DataType)\n       * @param {number} num\n       */\n      async setList(num) {\n        const data = /** @type {DataJson} */ (this.data);\n        /** @type {string | undefined} */\n        let reasonId;\n        data.types.forEach((_el, index) => {\n          const isSelected = num === index;\n          data.types[index].selected = isSelected;\n          if (isSelected) {\n            reasonId = data.types[index].name;\n          }\n        });\n        const item = data.types[num];\n        // item.selected = true;\n        /* // We don't have colors on the top level of `DataType`\n         * if (item?.colors?.length) {\n         *   item?.colors?.forEach((el, index) => {\n         *     el.selected = !index;\n         *   });\n         * }\n         */\n        if (item?.types?.length) {\n          item.types.forEach((el) => {\n            el.options.forEach((/** @type {TypeOption} */ option, /** @type {number} */ idx) => {\n              option.selected = !idx;\n              if (option.count) {\n                option.count = 0;\n              }\n            });\n            if (el?.colors) {\n              el.colors.forEach((color, idx) => {\n                color.selected = !idx;\n              });\n            }\n          });\n        }\n        let color = '';\n        await Promise.all(\n          data.types.map(\n            /** @param {DataType & TypeType} type */\n            async (type) => {\n              if (type.svg) {\n                color = type.colors ? this.getSelected(type.colors)?.code : null;\n                if (type.svgNew) {\n                  type.svgNew = this.changeColor(type.svgNew, color);\n                } else {\n                  type.svgNew = await this.fetchSvg(type.svg, color);\n                }\n                /* console.log('XXX', {\n                 *   type: {...type},\n                 * });\n                 */\n              }\n              await Promise.all(\n                type.types.map(async (t) => {\n                  await Promise.all(\n                    t.options.map(async (option) => {\n                      if (option.svg) {\n                        color = t.colors ? this.getSelected(t.colors)?.code : null;\n                        if (option.svgNew) {\n                          option.svgNew = this.changeColor(option.svgNew, color);\n                        } else {\n                          option.svgNew = await this.fetchSvg(option.svg, color);\n                        }\n                      }\n                    }),\n                  );\n                }),\n              );\n            },\n          ),\n        );\n        // TODO: Invoke the method after all the above async op's?\n        this.calcPrice('setList', reasonId);\n      },\n      /** The main property change funciton\n       * @param {Array<TypeColor>} arr\n       * @param {number} num\n       * @param {TypeType | null} mainobj\n       */\n      setProp(arr, num, mainobj = null) {\n        const it = arr[num];\n        const isCheckbox = !!mainobj?.checkbox;\n        const hasColors = !!mainobj?.colors;\n        const hasSvgNew = !!mainobj?.svgNew;\n        /* if (!mainobj) {\n         *   // XXX: Is ti possible to have unset mainobj?\n         *   debugger;\n         * }\n         */\n        if (isCheckbox) {\n          it.selected = !it.selected;\n        } else {\n          arr.forEach((el, index) => {\n            el.selected = num === index;\n          });\n        }\n        const reasonValue = arr\n          .filter(({ selected }) => selected)\n          .map(({ name }) => name)\n          .join(', ');\n        const reasonId = [\n          //\n          mainobj?.title,\n          hasColors && arr === mainobj.colors ? 'Color' : 'Option',\n          reasonValue,\n        ]\n          .filter(Boolean)\n          .join(': ');\n        /* console.log('[setProp]', mainobj?.title, num, it?.name, {\n         *   reasonId,\n         *   // reasonValue,\n         *   isCheckbox,\n         *   hasColors,\n         *   hasSvgNew,\n         *   num,\n         *   arr: [...arr],\n         *   it: { ...it },\n         *   mainobj: { ...mainobj },\n         * });\n         */\n        if (hasColors) {\n          const colorCode = this.getSelected(mainobj.colors)?.code;\n          if (hasSvgNew) {\n            mainobj.svgNew = this.changeColor(mainobj.svgNew, colorCode);\n          } else if (this.getSelected(mainobj.options).svgNew) {\n            this.getSelected(mainobj.options).svgNew = this.changeColor(\n              this.getSelected(mainobj.options).svgNew,\n              colorCode,\n            );\n          }\n        }\n        this.calcPrice('setProp', reasonId);\n      },\n      /**\n       * @param {any[]} arr\n       */\n      getSelected(arr) {\n        return arr.find((el) => el.selected);\n      },\n      printHtml() {\n        const cl = /** @type {HTMLElement} */ (document.querySelector('#capture'));\n        document.querySelector('html')?.classList.add('prntbl');\n        html2canvas(cl).then((canvas) => {\n          const nWindow = window.open('');\n          const style = document.createElement('style');\n          style.innerHTML = 'canvas{width: 100%!important; height: auto!important;}';\n          if (nWindow) {\n            nWindow.document.head.appendChild(style);\n            nWindow.document.body.appendChild(canvas);\n            nWindow.focus();\n            nWindow.print();\n          }\n          document.querySelector('html')?.classList.remove('prntbl');\n        });\n      },\n      /**\n       * @param {string} link\n       * @param {string | null} color\n       */\n      fetchSvg(link, color = null) {\n        return new Promise((resolve) => {\n          axios.get(link).then((svg) => {\n            resolve(this.changeColor(svg.data, color));\n          });\n        });\n      },\n      /**\n       * @param {string} svg\n       * @param {any} color\n       */\n      changeColor(svg, color) {\n        return color ? svg.replace(/fill=\"[#,a-z,A-Z,0-9]+\"/gm, `fill=\"${color}\"`) : svg;\n      },\n      getEditionCount() {\n        let value = Number(this.edition);\n        if (isNaN(value) || value < 1) {\n          value = 1;\n        }\n        return value;\n      },\n      /**\n       * @param {InputEvent} e\n       */\n      onValueChange(e) {\n        const node = /** @type {HTMLInputElement} */ (e.target);\n        const type = node.dataset.type;\n        const name = node.dataset.name;\n        const value = node.value;\n        const reasonId = [type, name, value].filter(Boolean).join(': ');\n        /* console.log('[onValueChange]', {\n         *   reasonId,\n         *   name,\n         *   type,\n         *   value,\n         * });\n         */\n        this.calcPrice('onValueChange', reasonId);\n      },\n      /**\n       * @param {InputEvent} e\n       */\n      onSelectChange(e) {\n        const node = /** @type {HTMLSelectElement} */ (e.target);\n        const selectedOptions = node.selectedOptions;\n        const type = node.dataset.type;\n        const name = node.dataset.name;\n        const option = selectedOptions[0];\n        const value = option.value;\n        const reasonId = [type, name, value].filter(Boolean).join(': ');\n        /* // DEBUG\n         * const selectedIndex = Number(node.selectedIndex);\n         * console.log('[onSelectChange]', {\n         *   reasonId,\n         *   option,\n         *   node,\n         *   selectedIndex,\n         *   selectedOptions,\n         * });\n         */\n        this.calcPrice('onSelectChange', reasonId);\n      },\n      /**\n       * @param {InputEvent} e\n       */\n      onEditionChange(e) {\n        const node = /** @type {HTMLInputElement} */ (e.target);\n        const value = Number(node.value);\n        /* console.log('[onEditionChange]', {\n         *   edition: this.edition,\n         *   value,\n         * });\n         */\n        // TODO: Just to multiply price?\n        this.calcPrice('onEditionChange', 'count: ' + value);\n      },\n      /**\n       * @param {InputEvent} e\n       */\n      onFileChange(e) {\n        // @ts-ignore\n        const files = e.target?.files || e.dataTransfer.files;\n        if (!files.length) return;\n        this.createImage(files[0]);\n      },\n      /** @param {Blob} file */\n      createImage(file) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          this.logo = '';\n          if (file.type === 'application/pdf') {\n            getDocument(e.target?.result)\n              .promise.then(\n                /** @param {import('pdfjs-dist').PDFDocumentProxy} pdf */\n                (pdf) => {\n                  pdf.getPage(1).then((page) => {\n                    const scale = 1.5;\n                    const viewport = page.getViewport({ scale: scale });\n                    const canvas = document.createElement('canvas');\n                    const context = canvas.getContext('2d');\n                    if (context) {\n                      canvas.height = viewport.height;\n                      canvas.width = viewport.width;\n                      const renderContext = {\n                        canvasContext: context,\n                        viewport: viewport,\n                      };\n                      page.render(renderContext).promise.then(() => {\n                        this.logo = canvas.toDataURL();\n                      });\n                    }\n                  });\n                },\n              )\n              .catch((/** @type {Error | string} */ reason) => {\n                // eslint-disable-next-line no-console\n                console.error(reason);\n              });\n          } else {\n            this.logo = e.target?.result;\n          }\n        };\n        reader.readAsDataURL(file);\n      },\n      removeImage: function (/** @type {Event} */ _e) {\n        this.$refs.logoUpload.value = null;\n        this.logo = '';\n      },\n    },\n  });\n}\n","// @ts-check\n\nimport { createApp } from 'vue/dist/vue.esm-bundler';\n\nimport { Swiper, SwiperSlide } from 'swiper/vue';\n\nimport { formatPriceToStr, parsePriceFromStr } from './numbers';\nimport { getErrorText } from './strings';\nimport { isDev } from './config';\nimport { showErrorToast, showSuccessToast } from './toast';\nimport { ServerDataError } from './ServerDataError';\nimport { saveCostChangesToServer } from './data';\nimport { getDataTypeSelectedItems } from './show-structure';\n\n/** DEBUG: Emulate changes at start */\nconst debugInitialChanges = false;\n\n/** TODO: Add implementation type for app core object via jsdoc\n * @typedef {Object} AppCore\n * @property {DataJson} data\n */\n\n/** Create global application\n * @param {DataJson} serverData\n * @return {import('vue').App<Element>}\n */\nexport function createEditorApp(serverData) {\n  const appCore = {\n    /** @param {MouseEvent} ev */\n    passHandler(ev) {\n      ev.preventDefault();\n      return false;\n    },\n\n    /** @param {HTMLElement} target */\n    getAllDataForWrapperChild(target) {\n      const wrapper = /** @type {HTMLElement} */ (target.closest('div.data-type-wrapper'));\n      if (!wrapper) {\n        throw new Error('Can not find prices wrapper');\n      }\n      const { dataset } = wrapper;\n      const typeIdx = Number(dataset.typeIdx);\n      if (isNaN(typeIdx)) {\n        throw new Error('Undefined data type index');\n      }\n      /** @type {number[][]} */\n      const pricesSelected = this.pricesSelected;\n      const selectedList = pricesSelected[typeIdx]\n        ? pricesSelected[typeIdx]\n        : (pricesSelected[typeIdx] = []);\n      /** @type {DataJson} */\n      const data = this.data;\n      const dataType = data.types[typeIdx];\n      const { prices } = dataType;\n      return {\n        wrapper,\n        dataset,\n        typeIdx,\n        pricesSelected,\n        selectedList,\n        data,\n        dataType,\n        prices,\n      };\n    },\n\n    /** @param {HTMLElement} target */\n    getAllDataForRowChild(target) {\n      const row = target.closest('tr');\n      if (!row) {\n        throw new Error('Can not find prices row');\n      }\n      const { dataset } = row;\n      const typeIdx = Number(dataset.typeIdx);\n      if (isNaN(typeIdx)) {\n        throw new Error('Undefined data type index');\n      }\n      /** @type {number[][]} */\n      const pricesSelected = this.pricesSelected;\n      const selectedList = pricesSelected[typeIdx]\n        ? pricesSelected[typeIdx]\n        : (pricesSelected[typeIdx] = []);\n      /** @type {DataJson} */\n      const data = this.data;\n      const dataType = data.types[typeIdx];\n      const { prices } = dataType;\n      const priceRowIdx = Number(dataset.idx);\n      const isHeader = isNaN(priceRowIdx);\n      const price = !isHeader && prices ? prices[priceRowIdx] : undefined;\n      return {\n        row,\n        dataset,\n        typeIdx,\n        pricesSelected,\n        selectedList,\n        data,\n        dataType,\n        prices,\n        price,\n        priceRowIdx,\n        isHeader,\n      };\n    },\n\n    /** @param {MouseEvent} ev */\n    onConditionModalItemClick(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const textNode = /** @type {HTMLElement} */ (target.querySelector('.text'));\n      const text = textNode?.innerText;\n      /** @type {string[]} */\n      const addConditionsSelected = this.addConditionsSelected;\n      if (this.addConditionsSelected.includes(text)) {\n        this.addConditionsSelected = addConditionsSelected.filter((it) => it !== text);\n      } else {\n        this.addConditionsSelected = addConditionsSelected.concat(text);\n      }\n    },\n\n    onConditionModalSave() {\n      /** @type {DataJson} */\n      const data = this.data;\n      /** @type {string[]} */\n      const addConditionsSelected = this.addConditionsSelected;\n      /** @type {number} */\n      const typeIdx = this.addConditionsTypeIdx;\n      /** @type {number} */\n      const priceRowIdx = this.addConditionsPriceRowIdx;\n      const dataType = data.types[typeIdx];\n      const prices = dataType.prices;\n      if (!prices) {\n        throw new Error('Prices data not defined for the DataType!');\n      }\n      const price = prices[priceRowIdx];\n      if (!price) {\n        throw new Error('Not found price item for idx: ' + priceRowIdx);\n      }\n      price.conditions = price.conditions\n        ? price.conditions.concat(addConditionsSelected)\n        : addConditionsSelected;\n      price.conditions.sort();\n      this.pricesHasChanged = true;\n      if (!this.pricesChangedDataTypes.includes(typeIdx)) {\n        this.pricesChangedDataTypes.push(typeIdx);\n      }\n    },\n\n    /** @param {MouseEvent} ev */\n    onConditionModalAdd(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const textNode = /** @type {HTMLElement} */ (target.querySelector('.text'));\n      const text = textNode.innerText;\n      /** @type {string[]} */\n      const addConditionsSelected = this.addConditionsSelected;\n      if (this.addConditionsSelected.includes(text)) {\n        this.addConditionsSelected = addConditionsSelected.filter((it) => it !== text);\n      } else {\n        this.addConditionsSelected = addConditionsSelected.concat(text);\n      }\n    },\n\n    /** @param {MouseEvent} ev */\n    addPriceItem(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const {\n        wrapper,\n        // dataset,\n        typeIdx,\n        // pricesSelected,\n        // selectedList,\n        // data,\n        dataType,\n        prices,\n      } = this.getAllDataForWrapperChild(target);\n      /** New row data\n       * @type {PriceItem}\n       */\n      const newPriceItem = {\n        conditions: undefined, // string[];\n        material: '', // string;\n        units: '', // string;\n        // The numbers here could be formatted ones in a form like `1,123.99`\n        unitMaterial: 0, // number | string;\n        basicCost: 0, // number | string;\n        unitCost: 0, // number | string;\n      };\n      // Add a row\n      let addedIdx = 0;\n      if (!prices) {\n        dataType.prices = [newPriceItem];\n      } else {\n        addedIdx = prices.length;\n        dataType.prices = prices.concat(newPriceItem);\n      }\n      // Set 'updated' flags\n      this.pricesHasChanged = true;\n      if (!this.pricesChangedDataTypes.includes(typeIdx)) {\n        this.pricesChangedDataTypes.push(typeIdx);\n      }\n      // Show and indicate newly added record\n      const rowId = 'price-row-' + typeIdx + '-' + addedIdx;\n      setTimeout(() => {\n        requestAnimationFrame(() => {\n          const row = wrapper.querySelector('tr#' + rowId);\n          if (row) {\n            row.scrollIntoView({\n              behavior: 'smooth',\n              block: 'center',\n            });\n            row.classList.add('new');\n            setTimeout(() => {\n              row.classList.remove('new');\n            }, 250);\n          }\n        });\n      }, 50);\n    },\n\n    /** @param {MouseEvent} ev */\n    deleteSelectedPrices(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const {\n        // wrapper,\n        // dataset,\n        typeIdx,\n        pricesSelected,\n        selectedList,\n        // data,\n        dataType,\n        prices,\n      } = this.getAllDataForWrapperChild(target);\n      if (prices && selectedList.length) {\n        dataType.prices = prices.filter((_item, itemIdx) => !selectedList.includes(itemIdx));\n        pricesSelected[typeIdx] = [];\n        this.pricesHasChanged = true;\n        if (!this.pricesChangedDataTypes.includes(typeIdx)) {\n          this.pricesChangedDataTypes.push(typeIdx);\n        }\n      }\n    },\n\n    /** @param {MouseEvent} ev */\n    showConditionsModal(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const {\n        // row,\n        // dataset,\n        typeIdx,\n        // pricesSelected,\n        // selectedList,\n        // data,\n        dataType,\n        // prices,\n        price,\n        priceRowIdx,\n        // isHeader,\n      } = this.getAllDataForRowChild(target);\n      if (!price) {\n        throw new Error('Not found price item for idx: ' + priceRowIdx);\n      }\n      const addConditionsList = getDataTypeSelectedItems(dataType, { getAll: true });\n      const conditions = price.conditions;\n      this.addConditionsTypeIdx = typeIdx;\n      this.addConditionsPriceRowIdx = priceRowIdx;\n\n      this.addConditionsList = addConditionsList; // string[], current conditions to show in the modal to add to the current price item\n      this.addConditionsSelected = []; // string[], selected conditions to add\n      this.addConditionsUsed = conditions ? [...conditions] : [];\n    },\n\n    /** @param {MouseEvent} ev */\n    deleteConditionsItem(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const { dataset } = target;\n      const condIdx = Number(dataset.condIdx);\n      const {\n        // row,\n        // dataset,\n        typeIdx,\n        // pricesSelected,\n        // selectedList,\n        // data,\n        // dataType,\n        // prices,\n        price,\n        priceRowIdx,\n        // isHeader,\n      } = this.getAllDataForRowChild(target);\n      if (!price) {\n        throw new Error('Not found price item for idx: ' + priceRowIdx);\n      }\n      const conditions = price.conditions;\n      if (conditions) {\n        price.conditions = conditions.filter((_it, idx) => idx != condIdx);\n      }\n      this.pricesHasChanged = true;\n      if (!this.pricesChangedDataTypes.includes(typeIdx)) {\n        this.pricesChangedDataTypes.push(typeIdx);\n      }\n    },\n\n    /** @param {MouseEvent} ev */\n    onCheckCellClick(ev) {\n      const target = /** @type {HTMLElement} */ (ev.currentTarget);\n      const {\n        // row,\n        // dataset,\n        typeIdx,\n        pricesSelected,\n        selectedList,\n        // data,\n        // dataType,\n        prices,\n        priceRowIdx,\n        isHeader,\n      } = this.getAllDataForRowChild(target);\n      if (!prices || !prices.length) {\n        return;\n      }\n      if (isHeader) {\n        if (selectedList.length >= prices.length) {\n          pricesSelected[typeIdx] = [];\n        } else {\n          pricesSelected[typeIdx] = prices.map((_, n) => n);\n        }\n      } else {\n        if (selectedList.includes(priceRowIdx)) {\n          pricesSelected[typeIdx] = selectedList.filter((n) => n != priceRowIdx);\n        } else {\n          pricesSelected[typeIdx] = selectedList.concat(priceRowIdx);\n        }\n      }\n      pricesSelected[typeIdx].sort((a, b) => a - b);\n    },\n\n    /** @param {number} val */\n    formatPrice(val) {\n      return formatPriceToStr(val);\n    },\n\n    /** @return {DataType | undefined} */\n    getCurrentDataType() {\n      /** @type {DataJson} */\n      const data = this.data;\n      /** Selected data type\n       * @type {DataType | undefined}\n       */\n      const dataType = data.types.find(({ selected }) => !!selected);\n      if (!dataType) {\n        // eslint-disable-next-line no-console\n        console.warn('[getCurrentDataType] No data type selected!');\n        return undefined;\n      }\n      return dataType;\n    },\n\n    /**\n     * @param {number} typeIdx\n     * @param {PriceItem} price\n     */\n    updatePriceRow(typeIdx, price) {\n      price.unitCost = parsePriceFromStr(price.unitMaterial) * parsePriceFromStr(price.basicCost);\n      this.pricesHasChanged = true;\n      if (!this.pricesChangedDataTypes.includes(typeIdx)) {\n        this.pricesChangedDataTypes.push(typeIdx);\n      }\n    },\n\n    /** Handle update of a basic cost field\n     * @param {InputEvent} ev\n     */\n    onPriceNumericFieldChanged(ev) {\n      const target = /** @type {HTMLInputElement} */ (ev.currentTarget);\n      const fieldId = target.id;\n      const {\n        // row,\n        // dataset,\n        typeIdx,\n        // pricesSelected,\n        // selectedList,\n        // data,\n        // dataType,\n        // prices,\n        price,\n        priceRowIdx,\n      } = this.getAllDataForRowChild(target);\n      if (!price) {\n        throw new Error('Not found price item for idx: ' + priceRowIdx);\n      }\n      const value = target.value;\n      const parsedValue = parsePriceFromStr(value);\n      price[fieldId] = parsedValue;\n      this.updatePriceRow(typeIdx, price);\n    },\n\n    /** Save changed data on the server */\n    async saveCostChanges() {\n      /** @type {DataJson} */\n      const data = this.data;\n      /** @type {number[]} */\n      const pricesChangedDataTypes = this.pricesChangedDataTypes;\n      try {\n        await saveCostChangesToServer(data, pricesChangedDataTypes);\n        /* // XXX FUTURE: It's possible to get the results here and update all the data\n         * console.log('[saveCostChanges] success: Got data (parsed json)', {\n         *   resData,\n         * });\n         */\n        this.pricesHasChanged = false;\n        this.pricesChangedDataTypes = [];\n        showSuccessToast(' ');\n      } catch (err) {\n        const details = getErrorText(err);\n        const error = new ServerDataError('  ', details);\n        // eslint-disable-next-line no-console\n        console.error('[saveCostChanges] Network error', error.message, {\n          details,\n          err,\n          error,\n        });\n        debugger; // eslint-disable-line no-debugger\n        showErrorToast(error);\n      }\n    },\n\n    /**\n     * @param {any[]} arr\n     */\n    getSelected(arr) {\n      return arr.find((el) => el.selected);\n    },\n\n    /**\n     * @param {InputEvent} ev\n     */\n    onPriceFieldUpdated(ev) {\n      const target = /** @type {HTMLInputElement} */ (ev.currentTarget);\n      const { typeIdx, prices, priceRowIdx } = this.getAllDataForRowChild(target);\n      if (!prices) {\n        throw new Error('Prices data not defined for the DataType!');\n      }\n      const price = prices[priceRowIdx];\n      if (!price) {\n        throw new Error('Not found price item for idx: ' + priceRowIdx);\n      }\n      this.updatePriceRow(typeIdx, price);\n    },\n  };\n\n  // Create Vue app\n  return createApp({\n    data(_app) {\n      return {\n        isDev,\n        // fullMode, // boolean,\n        pricesSelected: [], // number[][]\n        pricesHasChanged: isDev && debugInitialChanges, // boolean\n        pricesChangedDataTypes: isDev && debugInitialChanges ? [0] : [], // number[]\n        addConditionsTypeIdx: undefined, // number\n        addConditionsPriceRowIdx: undefined, // number\n        addConditionsList: ['xxx'], // string[], current conditions to show in the modal to add to the current price item\n        addConditionsUsed: [], // string[], selected conditions to add\n        addConditionsSelected: [], // string[], selected conditions to add\n        data: null, // DataJson\n        preloaded: false,\n      };\n    },\n    components: {\n      Swiper,\n      SwiperSlide,\n    },\n    setup() {\n      const onSwiper =\n        /** @param {Swiper} _swiper */\n        (_swiper) => {};\n      return {\n        onSwiper,\n      };\n    },\n    async mounted() {\n      /* // Toasts test\n       * showSuccessToast('App edit');\n       * // setTimeout(() => {\n       * //   showErrorToast('Long body text');\n       * // }, 7000);\n       */\n      const data = serverData;\n      // debugDataStruct(data);\n      this.data = data;\n      // Select the first top-level type\n      // this.setList(0);\n      this.preloaded = true;\n    },\n    methods: appCore,\n  });\n}\n","// @ts-check\n\nimport { showErrorToast } from './js/toast';\nimport { loadServerData } from './js/data';\nimport { getAppMode, showGlobalError } from './js/helpers';\n\nimport { createCalculatorApp } from './js/app-calculator';\nimport { createEditorApp } from './js/app-editor';\n\nimport 'swiper/css';\n\nimport './scss/index.scss';\n\nasync function start() {\n  try {\n    const data = await loadServerData();\n    const appMode = getAppMode();\n    /** @type {import('vue').App} */\n    const app =\n      appMode === 'editor'\n        ? createEditorApp(data)\n        : createCalculatorApp(data, appMode === 'manage');\n    window.globalApp = app.mount('#app');\n  } catch (err) {\n    const error = /** @type {import('src/@types/ErrorLike').ErrorLike} */ (err);\n    // eslint-disable-next-line no-console\n    console.error('[start] error', {\n      error,\n    });\n    debugger; // eslint-disable-line no-debugger\n    // Show error pane over the application\n    showGlobalError(error);\n    // Show error toast?\n    showErrorToast(error);\n  }\n}\n\nstart();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkall4promo_calculator\"] = self[\"webpackChunkall4promo_calculator\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [197], () => (__webpack_require__(777)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","getErrorText","error","Array","isArray","map","this","bind","join","Error","message","String","toastNode","toastInstance","bgClasses","info","success","textClasses","iconClasses","getToastNode","document","getElementById","updateToastNode","params","type","node","removeClassPrefix","replaceClass","regEx","RegExp","match","className","length","forEach","str","classList","remove","toggle","replaceNodeClasses","iconNode","querySelector","titleNode","innerText","title","bodyNode","body","showToast","Toast","getToastInstance","show","showErrorToast","showSuccessToast","isDev","nodeDev","dataFileUrl","updatePricesUrl","defaultContentType","ServerDataError","details","name","loadServerData","url","fetch","res","ok","status","statusText","console","log","reason","filter","Boolean","msg","text","err","data","JSON","parse","saveCostChangesToServer","pricesChangedDataTypes","changedPricesData","idx","prices","types","reqUrl","reqInit","method","headers","Accept","stringify","changedPrices","resText","startsWith","resData","DELIM","getTypeOptionSelectedItems","opts","prefix","selectionsChoose","arr","selections","getAll","selected","push","items","prototype","apply","selection","find","getTypeTypeSelectedItems","options","it","getDataTypeSelectedItems","topLevelPrefix","typeTypes","getAppMode","window","location","pathname","search","debugDataStruct","allItems","nextOpts","dataType","getAllDataTypeItems","showGlobalError","errorNode","detailsNode","__foobar_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","hasOwnProperty","call","__foobar_exports__","globalThis","pdfjsLib","d","AbortException","AnnotationEditorLayer","AnnotationEditorParamsType","AnnotationEditorType","AnnotationEditorUIManager","AnnotationLayer","AnnotationMode","CMapCompressionType","ColorPicker","DOMSVGFactory","DrawLayer","FeatureTest","util_FeatureTest","GlobalWorkerOptions","ImageKind","util_ImageKind","InvalidPDFException","MissingPDFException","OPS","Outliner","PDFDataRangeTransport","PDFDateString","PDFWorker","PasswordResponses","PermissionFlag","PixelsPerInch","RenderingCancelledException","TextLayer","UnexpectedResponseException","Util","VerbosityLevel","XfaLayer","build","createValidAbsoluteUrl","fetchData","getDocument","getFilenameFromUrl","getPdfFilenameFromUrl","getXfaPageViewport","isDataScheme","isPdfFile","noContextMenu","normalizeUnicode","renderTextLayer","setLayerDimensions","shadow","updateTextLayer","version","isNodeJS","process","versions","nw","electron","IDENTITY_MATRIX","FONT_IDENTITY_MATRIX","LINE_FACTOR","RenderingIntentFlag","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","TextRenderingMode","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","AnnotationBorderStyleType","ERRORS","WARNINGS","INFOS","BINARY","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","NEED_PASSWORD","INCORRECT_PASSWORD","verbosity","setVerbosityLevel","level","Number","isInteger","getVerbosityLevel","warn","unreachable","assert","cond","baseUrl","addDefaultProtocol","tryConvertEncoding","decodeURIComponent","escape","absoluteUrl","URL","protocol","_isValidProtocol","value","nonSerializable","configurable","writable","BaseException","constructor","PasswordException","code","super","UnknownErrorException","FormatError","bytesToString","bytes","undefined","MAX_ARGUMENT_COUNT","fromCharCode","strBuf","i","chunkEnd","Math","min","chunk","subarray","stringToBytes","Uint8Array","charCodeAt","objectFromMap","create","isLittleEndian","buffer8","Uint32Array","buffer","isEvalSupported","Function","isOffscreenCanvasSupported","OffscreenCanvas","platform","navigator","isMac","includes","isCSSRoundSupported","CSS","supports","hexNumbers","from","keys","n","toString","padStart","static","r","g","b","minMax","temp","m1","m2","p","m","p1","applyTransform","p2","slice","p3","p4","max","transpose","a","c","first","second","sqrt","sx","sy","rect","rect1","rect2","xLow","xHigh","yLow","yHigh","x0","x1","x2","x3","y0","y1","y2","y3","t","mt","tt","ttt","x","y","abs","delta","sqrtDelta","a2","NormalizeRegex","NormalizationMap","Map","replaceAll","_","normalize","AnnotationPrefix","FontRenderOps","BaseFilterFactory","addFilter","maps","addHCMFilter","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","destroy","keepHCM","BaseCanvasFactory","width","height","canvas","_createCanvas","context","getContext","reset","canvasAndContext","BaseCMapReaderFactory","isCompressed","async","compressionType","_fetchData","catch","BaseStandardFontDataFactory","filename","BaseSVGFactory","skipDimensions","svg","_createSVG","setAttribute","createElement","SVG_NS","PDF","isValidFetchUrl","baseURI","response","arrayBuffer","blob","json","Promise","resolve","reject","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","responseText","send","DOMCMapReaderFactory","then","cMapData","ArrayBuffer","DOMStandardFontDataFactory","createElementNS","PageViewport","viewBox","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","rawDims","pageWidth","pageHeight","pageX","pageY","clone","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","applyInverseTransform","extraDelay","ii","trim","substring","toLowerCase","test","split","lastIndexOf","defaultFilename","reFilename","splitURI","exec","suggestedFilename","StatTimer","started","times","time","Date","now","timeEnd","start","end","outBuf","longest","padEnd","e","preventDefault","deprecated","pdfDateStringRegex","input","matches","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","xfaPage","attributes","style","getRGB","color","colorRGB","getCurrentTransform","ctx","f","getTransform","getCurrentTransformInverse","invertSelf","div","viewport","mustFlip","mustRotate","useRound","w","h","widthStr","heightStr","EditorToolbar","editor","render","editToolbar","addEventListener","buttons","append","position","toolbarPosition","_uiManager","direction","insetInlineEnd","top","stopPropagation","_focusEventsAllowed","element","capture","hide","add","hideDropdown","button","tabIndex","editorType","delete","divider","addAltTextButton","prepend","addColorPicker","colorPicker","renderButton","HighlightToolbar","uiManager","boxes","isLTR","lastY","lastX","box","parent","span","highlightSelection","bindEvents","names","IdManager","id","ImageManager","crypto","randomUUID","buf","getRandomValues","floor","random","getUuid","_isSVGFittingCanvas","image","Image","src","decode","drawImage","getImageData","rawData","bitmap","refCounter","isSvg","file","mustRemoveAspectRatioPromise","fileReader","FileReader","imageElement","imagePromise","onload","svgUrl","result","onerror","readAsDataURL","createImageBitmap","set","lastModified","size","getFromFile","getFromUrl","getSvgUrl","deleteId","isValidId","CommandManager","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","next","splice","redo","hasSomethingToUndo","hasSomethingToRedo","KeyboardManager","callbacks","allKeys","Set","callback","isMacKey","at","event","altKey","ctrlKey","metaKey","shiftKey","self","has","bubbles","args","checker","ColorManager","_colors","colors","visibility","computedColor","getComputedStyle","getColorValues","convert","rgb","matchMedia","RGB","every","_colorsMapping","getHexCode","makeHexColor","blur","focus","copy","cut","paste","keydown","keyup","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","_keyboardManager","proto","arrowChecker","contains","activeElement","tagName","hasSomethingToControl","textInputChecker","_self","target","el","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","isEnterHandled","unselectAll","translateSelectedEditors","container","viewer","altTextManager","eventBus","pdfDocument","pageColors","highlightColors","enableHighlightFloatingButton","mlManager","_eventBus","_on","annotationStorage","filterFactory","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","_off","layer","values","clear","clearTimeout","guess","hasMLManager","hcmFilter","foreground","background","pair","highlightColorNames","reverse","setMainHighlightColorPicker","editAltText","pageNumber","focusMainContainer","findParent","layerX","layerY","getBoundingClientRect","disableUserSelect","addShouldRescale","removeShouldRescale","commitOrRemove","pagesRotation","anchorNode","nodeType","Node","TEXT_NODE","parentElement","methodOfCreation","getSelection","isCollapsed","anchorOffset","focusNode","focusOffset","textLayer","closest","getSelectionBoxes","empty","dispatch","source","mode","showAllEditors","hasTextLayer","createAndAddNewEditor","addToAnnotationStorage","setValue","pointerup","removeEventListener","hasSelection","lastEditor","lastActiveElement","once","addEditListeners","removeEditListeners","editors","serialized","serialize","clipboardData","setData","item","isHandlingMimeForPasting","currentLayer","getData","ex","newEditors","deserializedEditor","deserialize","addCommands","isEditorHandlingKeyboard","entries","some","assign","setEditingState","registerEditorTypes","defaultPropertiesToUpdate","getId","getLayer","pageIndex","currentPageIndex","addLayer","enable","disable","removeLayer","updateMode","editId","isFromKeyboard","annotationElementId","setSelected","enterInEditMode","canCreateNewEmptyEditor","addNewEditor","updateToolbar","updateParams","updateColor","action","updateDefaultParams","visible","updateButton","enableWaiting","mustWait","disableClick","enableClick","getEditors","getEditor","addEditor","removeEditor","setTimeout","unselect","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","addOrRebuild","setActiveEditor","propertiesToUpdate","ed","updateUI","toggleSelected","select","isSelected","firstSelectedEditor","commit","noCommit","totalX","totalY","translateInPage","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","renderAnnotationElement","annotation","editorId","getRawValue","hasBeenModified","AltText","l10nPromise","_l10nPromise","altText","textContent","onClick","finish","focusVisible","decorative","enabled","disabled","tooltip","DELAY_TO_SHOW_TOOLTIP","_reportTelemetry","parentNode","getImageForAltText","AnnotationEditor","focusin","focusout","_initialOptions","_isVisible","_zIndex","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_willKeepAspectRatio","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","getPrototypeOf","_type","_defaultLineColor","_colorManager","fakeEditor","FakeEditor","getNextId","l10n","strings","_borderLineWidth","documentElement","parseFloat","getPropertyValue","_value","mime","_isDraggable","center","parentRotation","fixAndSetPosition","setInBackground","zIndex","setInForeground","setParent","relatedTarget","isMultipleSelection","setAt","screenToPageTranslation","translate","scrollIntoView","block","findNewParent","bx","by","getBaseTranslation","left","toFixed","_hasBeenMoved","_mustFixPosition","moveInDOM","angle","pageTranslationToScreen","parentScale","scaledWidth","scaledHeight","round","setDims","fixDims","widthPercent","endsWith","heightPercent","getInitialTranslation","classes","boundResizerPointermove","savedDraggable","pointerMoveOptions","passive","togglePointerEvents","savedWidth","savedHeight","savedParentCursor","cursor","savedCursor","pointerUpCallback","newWidth","newHeight","minWidth","MIN_SIZE","minHeight","rotationMatrix","transf","invRotationMatrix","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","ratioX","ratioY","deltaX","deltaY","movementX","movementY","oldDiag","hypot","altTextFinish","removeEditToolbar","getClientDimensions","initialize","addEditToolbar","altTextData","hasAltText","maxWidth","maxHeight","pointerdown","pointerMoveCallback","clientX","clientY","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","disableEditMode","isInEditMode","needsToBeRebuilt","rotate","_angle","isForCopying","timeout","isResizable","makeResizable","children","boundResizerKeydown","boundResizerBlur","firstPosition","nextFirstPosition","firstChild","before","lastChild","child","stopImmediatePropagation","preventScroll","disableEditing","enableEditing","contentDiv","setAspectRatio","aspectRatio","telemetryInitialData","telemetryFinalData","_telemetryTimeout","content","nodeName","resetAnnotationElement","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","isView","byteLength","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","freeze","hash","transfer","AnnotationStorage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","modified","entry","val","setAll","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","counters","count","computeTelemetryFinalData","structuredClone","FontLoader","ownerDocument","styleElement","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","systemFontInfo","_inspectFont","loadedName","disableFontFace","isFontLoadingAPISupported","fontFace","FontFace","load","baseFontName","font","attached","missingFile","loadSystemFont","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","supported","userAgent","done","complete","otherRequest","shift","_loadTestFont","atob","int32","offset","spliceString","s","insert","called","XXXX_VALUE","checksum","btoa","fontFamily","isFontReady","fillText","FontFaceObject","translatedData","inspectFont","compiledGlyphs","cssFontInfo","css","weight","fontWeight","italicAngle","mimetype","getPathGenerator","objs","character","cmds","commands","bezierCurveTo","quadraticCurveTo","packageCapability","withResolvers","packageMap","fs","import","http","https","path2d","loadPackages","NodePackages","promise","node_utils_fetchData","promises","readFile","PathType","applyBoundingBox","bbox","region","Path2D","BaseShadingPattern","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","matrix","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","pattern","ownerBBox","current","getClippedPathBoundingBox","ceil","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","baseTransform","fillStyle","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","c1","c2","c3","coords","rowSize","tmp","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","k","x1_","x2_","j","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","boundsWidth","boundsHeight","paddedWidth","BORDER_SIZE","paddedHeight","createImageData","putImageData","singularValueDecompose2dScale","matrixScale","temporaryPatternCanvas","DummyShadingPattern","PaintType","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","curMatrixScale","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","adjustedX0","adjustedY0","adjustedX1","adjustedY1","clipBbox","executeOperatorList","endDrawing","step","realOutputSize","MAX_PATTERN_SIZE","bboxWidth","bboxHeight","updateRectMinMax","strokeStyle","fillColor","strokeColor","cssColor","convertBlackAndWhiteToRGBA","srcPos","dest","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","FULL_CHUNK_HEIGHT","CachedCanvases","canvasFactory","cache","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","patternFill","fillAlpha","strokeAlpha","lineWidth","activeSMask","transferMaps","startNewPathAndClipBox","clipBox","setCurrentPoint","updatePathMinMax","minX","maxX","updateScalingPathMinMax","scaleMinMax","updateCurvePathMinMax","bezierBoundingBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","intersect","isEmptyClip","Infinity","putBinaryImageData","imgData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","kind","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","mask","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","getImageSmoothingEnabled","interpolate","fround","actualScale","devicePixelRatio","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","optionalContentConfig","markedContentStack","annotationCanvasMap","stateStack","pendingClip","pendingEOFill","xobjs","groupStack","processingType3","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","beginDrawing","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","nextBreakPoint","breakIt","depObjId","objsPool","inSMaskMode","HTMLCanvasElement","hcmFilterId","savedFilter","_scaleImage","img","inverseTransform","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","isPatternFill","currentTransform","cacheKey","scaled","maskCanvas","mainKey","cachedImage","maskToCanvas","getAxialAlignedBoundingBox","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","limit","dashArray","dashPhase","intent","flatness","states","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","mirrorContextOperations","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","old","pop","ops","startX","startY","isScalingMatrix","minMaxForBezier","xw","yh","consumePath","rescaleAndStroke","needRestore","paths","pendingTextPaths","path","addToPath","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","paintChar","patternTransform","fillStrokeMode","isAddToPathSet","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","_getPattern","arguments","objId","getShadingPattern","inv","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","canvasWidth","canvasHeight","annotationCanvas","savedCtx","compiled","POINT_TYPES","width1","j0","points","lineSize","pos","sum","Int32Array","p0","pp","compileType3Glyph","skewX","skewY","positions","trans","images","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","HTMLElement","tag","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","op","workerPort","Worker","workerSrc","CallbackKind","StreamKind","wrapReason","MessageHandler","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","_onComObjOnMessage","stream","capability","cbSourceName","cbTargetName","postMessage","on","actionName","handler","ah","transfers","sendWithPromise","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancel","cancelCapability","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","close","onPull","onCancel","streamController","allSettled","Metadata","parsedData","getRaw","INTERNAL","Symbol","OptionalContentGroup","renderingIntent","usage","view","viewState","printState","_setVisible","internal","userSet","OptionalContentConfig","creator","order","groups","baseState","off","getHash","array","operator","state","expression","policy","ids","setVisibility","setOCGState","preserveRB","hasInitialVisibility","getOrder","getGroups","getGroup","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_enqueue","rangeReader","_begin","_progressiveDataLength","_loaded","evt","onProgress","_removeRangeReader","reader","indexOf","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","abort","_stream","_done","_filename","_requests","_headersReady","headersReady","isRangeSupported","isStreamingSupported","contentLength","requestCapability","_end","_queuedChunk","validateRangeRequestCapabilities","getResponseHeader","isHttp","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","extractFilenameFromHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","contentDispositionStr","iter","quot","part","parts","rfc2231getparam","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","fatal","quotindex","extvalue","encodingend","replace","charset","hex","getFilenameFromContentDispositionHeader","createResponseStatusError","validateResponseStatus","createFetchOptions","withCredentials","abortController","signal","credentials","redirect","createHeaders","httpHeaders","Headers","getArrayBuffer","PDFFetchStream","_rangeRequestReaders","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_abortController","AbortController","_headers","getReader","read","_readCapability","NetworkManager","currXhrId","pendingRequests","requestRange","listeners","requestFull","xhr","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","network_getArrayBuffer","rangeHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_onHeadersReceived","_onDone","_onError","_url","_fullRequestId","_headersReceivedCapability","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","lengthComputable","_requestId","_close","fileUriRegex","PDFNodeStream","sourceUrl","parsedUrl","host","parseUrl","isFsUrl","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","BaseFullReader","_readableStream","_error","_setReadableStream","readableStream","BaseRangeReader","createRequestOptions","auth","hostname","port","handleResponse","statusCode","_request","_httpHeaders","Range","href","lstat","stat","createReadStream","DEFAULT_FONT_SIZE","FontInspector","WeakMap","textContentSource","prevFontSize","prevFontFamily","pump","lang","styles","onBefore","abortEx","textDivs","textContentItemsStr","geom","textDiv","textDivProperties","hasText","hasEOL","atan2","fontName","PI","fontSubstitution","fontHeight","fontAscent","sin","cos","scaleFactorStr","divStyle","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","canvasContext","alpha","cachedAscent","savedFont","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","pixels","rest","restKeys","XfaText","xfa","output","walk","shouldBuildText","DefaultCanvasFactory","createCanvas","DefaultCMapReaderFactory","DefaultFilterFactory","docId","contain","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","tableR","tableG","tableB","fgRGB","bgRGB","getSteps","tableA","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","newStart","newStep","prev","feColorMatrix","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","DefaultStandardFontDataFactory","task","PDFDocumentLoadingTask","getUrlProp","Buffer","isNaN","getDataProp","password","rangeTransport","worker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","standardFontDataUrl","StandardFontDataFactory","ignoreErrors","stopAtErrors","maxImageSize","canvasMaxAreaInBytes","fontExtraProperties","enableXfa","disableAutoFetch","pdfBug","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","workerParams","fromPort","_worker","docParams","apiVersion","evaluatorOptions","transportParams","destroyed","workerIdPromise","messageHandler","networkStream","Response","isFetchSupported","createPDFNetworkStream","workerId","transport","WorkerTransport","_transport","_capability","isRefProxy","ref","num","gen","onPassword","_pendingDestroy","_rangeListeners","_progressListeners","_progressiveReadListeners","_progressiveDoneListeners","_readyCapability","listener","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","cleanup","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","loadingParams","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pageInfo","_pageIndex","_pageInfo","_stats","_pdfBug","PDFObjects","_maybeCleanupAfterRender","_intentStates","userUnit","getViewport","getAnnotations","getPageJSActions","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","renderTasks","internalRenderTask","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","all","initializeGraphics","operatorListChanged","getOperatorList","opListTask","opListReadCapability","streamTextContent","includeMarkedContent","disableNormalization","highWaterMark","getTextContent","getXfa","getStructTree","_destroy","waitOn","force","completed","resetStats","delayed","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","delay","curCacheKey","curIntentState","LoopbackPort","terminate","PDFWorkerUtil","isWorkerDisabled","fakeWorkerId","isSameOrigin","otherUrl","base","origin","other","createCDNWrapper","wrapper","createObjectURL","Blob","_port","_webWorker","_messageHandler","_initializeFromPort","_initialize","terminateEarly","onWorkerError","_setupFakeWorker","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","cachedPort","pdfjsWorker","loader","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","cachedPromise","isOpList","page","terminated","sink","readyReason","headersCapability","fullReader","_numPages","htmlForXfa","exception","updatePassword","exportedData","exportedError","fontAdded","finally","imageRef","pageProxy","dataLen","imageData","refStr","results","metadata","INITIAL_DATA","iterator","RenderTask","onContinue","form","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvas","StepperManager","init","getNextBreakPoint","gfx","updateOperatorList","requestAnimationFrame","makeColorComp","scaleAndClamp","ColorConverters","G","components","CMYK_RGB","RGB_HTML","html","storage","storedData","xfaOn","xfaOff","removeAttribute","checked","option","selectedIndex","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","setupStorage","root","xfaHtml","rootHtml","setAttributes","isNotForRichText","rootDiv","createTextNode","stack","childHtml","xmlns","querySelectorAll","hidden","DEFAULT_TAB_INDEX","GetElementsByNameSet","getRectDims","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","titleObj","contentsObj","richText","hasPopupData","_hasPopupData","updateEdited","popup","resetEdited","currentRect","setRotation","popupRef","alternativeText","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","normalizeRect","elementWidth","elementHeight","_commonActions","setColor","jsName","styleName","detail","colorType","colorArray","display","noView","noPrint","userName","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","defs","clipPath","rectWidth","rectHeight","backgroundImage","_createPopup","modificationDate","parentRect","elements","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","maybeShow","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_isEditable","_editOnDoubleClick","annotationEditorType","isTooltipOnly","link","isBound","_bindNamedAction","attachment","attachmentDest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","description","openOrDownloadData","executeSetOCGState","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","allIds","dispatchEvent","Event","showElementAndHideCanvas","previousSibling","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","modifier","focused","_setEventListeners","getter","Blur","Focus","_setBackgroundColor","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","lineHeight","textAlignment","textAlign","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","multipleSelection","index","findIndex","selectChild","indices","editable","changeEx","keyDown","PopupElement","elementIds","toDateObject","trigger","flatMap","baseColor","outlineColor","BACKGROUND_ENLIGHT","header","date","toLocaleDateString","toLocaleTimeString","contents","_formatContents","popupLines","popupContent","lineAttributes","line","lines","useParentRect","normalizedRect","popupLeft","popupTop","textPosition","lineSpan","lineCoordinates","square","circle","containerClassName","svgElementName","coordinate","vertices","polyline","inkList","inkLists","accessibilityManager","annotationEditorUIManager","_annotationEditorUIManager","contentElement","moveElementInDOM","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","replaceWith","after","getEditableAnnotations","getEditableAnnotation","EOL_PATTERN","FreeTextEditor","editorDivBlur","editorDivFocus","editorDivInput","editorDivKeydown","editorDivPaste","_translateEmpty","_defaultColor","_defaultFontSize","_internalPadding","setFontsize","editorDiv","savedFontsize","col","savedColor","overlayDiv","contentEditable","childNodes","savedDisplay","savedVisibility","savedText","newText","trimEnd","setText","dblclick","baseX","baseY","posX","posY","nodeValue","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","newRange","beforeLength","reduce","acc","setStart","setEnd","removeAllRanges","addRange","replaceChildren","padding","structTreeParentId","innerMargin","EPSILON","right","shiftedMinX","shiftedMinY","lastEdge","lastPoint","edge","getOutlines","sort","outlineVerticalEdges","edges","allEdges","edge1","edge2","outlines","outline","lastPointX","lastPointY","HighlightOutline","middle","jj","y4","Outline","toSVGPath","_rotation","free","FreeHighlightOutline","polygon","prevX","prevY","FreeOutliner","Float64Array","scaleFactor","thickness","lastTop","lastBottom","diffX","diffY","diffD","K","nY","thX","thY","bottom","lastTopX","lastTopY","lastBottomX","lastBottomY","last","N","ltrCallback","getNewOutline","outliner","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","swatch","renderMainDropdown","dropdown","role","nextSibling","HighlightEditor","_moveCaret","_defaultThickness","opacity","_defaultOpacity","highlightId","numberOfColors","outlinerForOutline","highlightOutlines","clipPathId","drawLayer","finalizeLine","highlightOutline","updateLine","updateBox","changeColor","savedThickness","setThickness","th","toolbar","addUndoableEditor","mustBeSelected","highlight","highlightDiv","pointerover","addClass","pointerleave","removeClass","setPosition","pointerMove","pointerDownOptions","pointerDown","_freeHighlight","_freeHighlightId","_freeHighlightClipId","updatePath","removeFreeHighlight","InkEditor","canvasPointermove","canvasPointerleave","canvasPointerup","canvasPointerdown","bezierPath2D","allRawPaths","currentPath","translationX","translationY","setOpacity","savedOpacity","disconnect","setDimensions","opacityToHex","path2D","bezier","xy","lastPoints","bezierPoints","control1","control2","addInkEditorIfNeeded","ResizeObserver","contentRect","observe","roundedWidth","roundedHeight","scaleFactorW","scaleFactorH","p10","p11","p20","p21","p30","p31","p40","p41","xMin","xMax","yMin","yMax","firstTime","prevTranslationX","prevTranslationY","unscaledPadding","StampEditor","bitmapUrl","bitmapFile","supportedTypes","supportedTypesStr","pasteEditor","getAsFile","fromId","getFromId","accept","files","click","MAX_RATIO","factor","bitmapWidth","bitmapHeight","prevWidth","prevHeight","offscreen","transferToImageBitmap","mlGuess","service","channels","toUrl","toDataURL","bitmapId","accessibilityData","alt","stamps","area","prevData","_editorType","annotationLayer","editorTypes","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","isCommitting","annotationElementIds","editables","changedAnnotations","resetAnnotations","startHighlighting","attach","detach","removePointerInTextLayer","deleteAnnotationElement","innerWidth","innerHeight","oldRotation","_svgFactory","pathId","clipPathUse","isPathUpdatable","use","maskId","use1","use2","cloneNode","changeOpacity","__foobar_exports__getDocument","periodizeNumber","periodChar","numStr","formatPriceToStr","parsed","parsePriceFromStr","numVal","createCalculatorApp","serverData","isManage","createApp","_app","pricesHasChanged","preloaded","edition","logo","comment","priceUnit","priceTotal","filteredPrices","Swiper","SwiperSlide","onSwiper","_swiper","mounted","setList","observerLogo","MutationObserver","mutations","mutationRecord","mutation","$refs","logoElementBottom","targetLogo","logoElement","attributeFilter","elmnt","pos1","pos2","pos3","pos4","garabber","onmousedown","dragMouseDown","onmouseup","closeDragElement","onmousemove","elementDrag","offsetTop","offsetLeft","dragElement","methods","formatPrice","getCurrentDataTypeIndex","getCurrentDataType","calcPrice","reasonId","selectedItems","price","conditions","condItem","_idx","summ","unitCost","onBasicCostChange","dataTypeIdx","parsedValue","basicCost","unitMaterial","saveCostChanges","_el","getSelected","svgNew","fetchSvg","setProp","mainobj","isCheckbox","hasColors","hasSvgNew","reasonValue","colorCode","printHtml","cl","html2canvas","nWindow","innerHTML","head","appendChild","axios","getEditionCount","onValueChange","onSelectChange","selectedOptions","onEditionChange","onFileChange","dataTransfer","createImage","pdf","renderContext","removeImage","_e","logoUpload","createEditorApp","appCore","passHandler","ev","getAllDataForWrapperChild","typeIdx","pricesSelected","selectedList","getAllDataForRowChild","row","priceRowIdx","isHeader","onConditionModalItemClick","textNode","currentTarget","addConditionsSelected","concat","onConditionModalSave","addConditionsTypeIdx","addConditionsPriceRowIdx","onConditionModalAdd","addPriceItem","newPriceItem","material","units","addedIdx","rowId","behavior","deleteSelectedPrices","_item","itemIdx","showConditionsModal","addConditionsList","addConditionsUsed","deleteConditionsItem","condIdx","_it","onCheckCellClick","updatePriceRow","onPriceNumericFieldChanged","fieldId","onPriceFieldUpdated","appMode","app","globalApp","mount","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","O","chunkIds","fn","priority","notFulfilled","fulfilled","__esModule","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}